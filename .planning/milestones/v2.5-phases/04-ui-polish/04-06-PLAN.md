---
phase: 04-ui-polish
plan: 06
type: execute
wave: 2
depends_on: [04-01, 04-02, 04-03]
files_modified:
  - src/components/capture/CameraCapture.tsx
  - src/pages/quick-capture.tsx
  - src/components/capture/PhotoPreviewStrip.tsx
autonomous: false
must_haves:
  truths:
    - Capture button 64px minimum
    - Button positioned for thumb reach
    - Secondary buttons 44px minimum
    - Touch targets work with gloved hands
  artifacts:
    - path: src/components/capture/CameraCapture.tsx
      provides: Capture button with proper sizing
    - path: src/pages/quick-capture.tsx
      provides: Touch-optimized layout
  key_links:
    - from: Capture button
      to: photo capture function
      via: onClick handler
---

<objective>
Improve touch targets in Quick Capture for gloved hands and mobile use.

Purpose: Field staff wear gloves and need reliable touch interaction.
Output: Camera capture button 64px+, positioned for thumb reach.
</objective>

<execution_context>
@C:/Users/veloc/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/04-ui-polish/04-CONTEXT.md
@src/components/capture/CameraCapture.tsx
</context>

<tasks>

<task type="checkpoint:decision" gate="blocking">
  <name>Checkpoint: Capability inventory and orchestration</name>
  <files>.planning/phases/04-ui-polish/04-06-PLAN.md</files>
  <decision>Confirm tool, agent, and skill inventory for touch-target and reachability polish</decision>
  <context>
    Inventory useful tools, agents, and skills and orchestrate them before implementation. Recommended baseline for this plan:
    - frontend-design (touch-target sizing and control placement)
    - web-design-guidelines (accessibility and target-size compliance)
    - webapp-testing (mobile interaction validation)
    - tools: read/edit/apply_patch and bash verification commands
    - agents: gsd-plan-checker for validation; explore/general if control ownership spans multiple components
  </context>
  <options>
    <option id="option-a">
      <name>Use recommended baseline skills</name>
      <pros>Fast, standards-aligned execution path.</pros>
      <cons>Potentially misses niche ergonomics references.</cons>
    </option>
    <option id="option-b">
      <name>Expand skill inventory first</name>
      <pros>Higher confidence across device ergonomics.</pros>
      <cons>Longer pre-implementation phase.</cons>
    </option>
  </options>
  <action>Record selected tools, agents, and skills and orchestrate them before adjusting touch-target sizes and mobile control placement.</action>
  <verify>Decision is recorded and selected tool/agent/skill choices are documented before implementation begins.</verify>
  <done>Capability orchestration checkpoint completed and implementation can proceed.</done>
  <resume-signal>Select: option-a or option-b to continue execution.</resume-signal>
</task>

<task type="auto">
  <name>Enlarge capture button to 64px</name>
  <files>src/components/capture/CameraCapture.tsx</files>
  <action>
    Increase capture button size:
    1. Find capture button in CameraCapture component
    2. Set minimum size to 64px x 64px (w-16 h-16 in Tailwind)
    3. Keep button circular (rounded-full)
    4. Increase icon size proportionally (e.g., w-8 h-8)
    5. Ensure adequate spacing around button (min 8px)
    6. Keep existing amber color and styling
    7. Add touch feedback (active:scale-95 or similar)
    
    Current size may be smaller; verify in component.
    Maintain visual hierarchy with other controls.
  </action>
  <verify>
    Run `npm run check` and confirm exit code 0.
    Run `npm run build` and confirm build succeeds.
    Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-flow-check.cjs` and confirm `quickCaptureTransition: true`.
  </verify>
  <done>
    Capture button 64px diameter minimum
    Touch feedback working
  </done>
</task>

<task type="auto">
  <name>Position button for thumb reach</name>
  <files>src/pages/quick-capture.tsx</files>
  <action>
    Optimize button position for one-handed use:
    1. Position button in bottom center or bottom-right
    2. Distance from bottom: comfortable thumb reach (80-120px from bottom)
    3. Center horizontally or offset right for right-handed users
    4. Ensure button not obscured by camera feed
    5. Keep button visible above fold on 375px height screens
    6. Test positioning with device mockups
    
    Reference existing Quick Capture layout.
    Consider safe-area-inset-bottom for notched phones.
  </action>
  <verify>
    Run `node tests/visual-analysis.cjs` and confirm `tests/screenshots/visual-analysis/05-quick-capture-mobile.png` is generated.
    Confirm capture button remains visible in mobile screenshot and not clipped at the viewport edge.
  </verify>
  <done>
    Button positioned bottom-center or offset
    Reachable with one hand
    Visible on all screen sizes
  </done>
</task>

<task type="auto">
  <name>Verify secondary button sizes</name>
  <files>src/components/capture/PhotoPreviewStrip.tsx</files>
  <action>
    Ensure all secondary buttons meet minimums:
    1. Photo delete/remove buttons: 44px minimum
    2. Notes toggle: 44px height minimum
    3. Location selector: 44px touch target
    4. School selector: 44px touch target
    5. Save/submit button: 44px height minimum
    6. Check spacing between adjacent buttons (min 8px gap)
    
    Review all interactive elements in Quick Capture flow.
    Update any that fall below 44px.
  </action>
  <verify>
    Run `npm run check` and confirm exit code 0.
    Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-deep-journey.cjs` and confirm JSON contains `quickCaptureApiFallbackWorked: true`.
    Confirm secondary actions remain clickable and no overlap regressions appear during the flow.
  </verify>
  <done>
    All interactive elements meet 44px minimum
    Adequate spacing verified
  </done>
</task>

</tasks>

<verification>
- Run `npm run check` and `npm run build` successfully.
- Run `node tests/visual-analysis.cjs` and review `05-quick-capture-mobile.png` for button size/placement.
- Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-flow-check.cjs` and confirm `quickCaptureTransition: true`.
- Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-deep-journey.cjs` and confirm flow remains successful.
</verification>

<success_criteria>
- Primary capture button 64px minimum
- Button positioned for easy thumb reach
- Secondary buttons 44px minimum
- All touch targets functional
- Works on 320px+ screens
</success_criteria>

<output>
After completion, create `.planning/phases/04-ui-polish/04-06-SUMMARY.md`
</output>
