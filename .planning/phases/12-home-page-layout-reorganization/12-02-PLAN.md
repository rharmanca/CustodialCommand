---
phase: 12-home-page-layout-reorganization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/dashboard/ReviewSection.tsx
  - src/components/dashboard/PendingBadge.tsx
  - src/pages/Dashboard.tsx
autonomous: true
must_haves:
  truths:
    - Review section is visible and easily locatable
    - Pending badge displays current count of inspections awaiting review
    - Pending badge uses amber color for 1-4 items, red for 5+ items
    - Review section has minimal visual distinction (relies on content/position)
    - Pending badge updates when inspections are completed or discarded
  artifacts:
    - path: src/components/dashboard/PendingBadge.tsx
      provides: Badge showing pending inspection count with urgency colors
      exports: [PendingBadge]
    - path: src/components/dashboard/ReviewSection.tsx
      provides: Review workflow section with pending badge and recent preview
      exports: [ReviewSection]
    - path: src/pages/Dashboard.tsx
      provides: Integration of ReviewSection into dashboard
      contains: [ReviewSection usage]
  key_links:
    - from: src/components/dashboard/ReviewSection.tsx
      to: src/components/dashboard/PendingBadge.tsx
      via: import and render
      pattern: import.*PendingBadge
    - from: src/components/dashboard/ReviewSection.tsx
      to: src/hooks/usePendingInspections.ts
      via: data fetching hook
      pattern: usePendingInspections
---

<objective>
Create Review section with PendingBadge integration to satisfy LAYOUT-02 (Review Inspections and pending badge visibility).

Purpose: Make Review workflow discoverable and show real-time pending count.
Output: ReviewSection and PendingBadge components integrated into Dashboard.
</objective>

<execution_context>
@C:/Users/veloc/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/veloc/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/12-home-page-layout-reorganization/12-CONTEXT.md
@.planning/phases/12-home-page-layout-reorganization/12-RESEARCH.md

# Existing hooks and patterns
@src/hooks/usePendingInspections.ts

# Existing badge component for reference
@src/components/ui/badge.tsx
</context>

<tasks>

<task type="auto">
  <name>Create PendingBadge component</name>
  <files>src/components/dashboard/PendingBadge.tsx</files>
  <action>
Create PendingBadge component that displays the count of pending inspections.

Features:
1. Accepts `count: number` prop
2. Shows number inside a circular/rounded badge
3. Color coding (from Decision 17):
   - Amber/yellow (bg-amber-500) for count 1-4
   - Red (bg-red-500) for count >= 5
   - Gray/ghost for count 0
4. Optional pulse animation when count > 0 (from Phase 04 requirement)
5. Accessible: aria-label indicating "X inspections pending review"

Component signature:
```typescript
interface PendingBadgeProps {
  count: number;
  showZero?: boolean; // if true, shows "0" in gray; if false, hides when 0
  className?: string;
}
```

Use existing shadcn Badge component as base. Style with appropriate colors.

Add subtle pulse animation for non-zero counts using Tailwind animate-pulse.
  </action>
  <verify>cat src/components/dashboard/PendingBadge.tsx</verify>
  <done>PendingBadge exists with count prop, amber/red color coding, pulse animation for non-zero. Component passes TypeScript check.</done>
</task>

<task type="auto">
  <name>Create ReviewSection component</name>
  <files>src/components/dashboard/ReviewSection.tsx</files>
  <action>
Create ReviewSection component for the Review workflow area.

Structure:
1. **Header row**:
   - Title: "Review Inspections" (text-xl font-semibold)
   - PendingBadge integrated inline (right side of header)
   - Brief description: "Complete detailed assessments from captured photos"

2. **Quick actions**:
   - Link/button to "Review All Pending" (navigates to /review)
   - Show count text like "3 inspections waiting" when count > 0

3. **Recent preview** (optional enhancement):
   - Show 2-3 most recent pending inspections with thumbnails
   - Click to open specific inspection review
   - If no pending, show encouraging empty state

4. **Styling**:
   - Teal/cool color theme (bg-teal-50/5, border-teal-100)
   - Minimal visual distinction from Capture section
   - Rely on position (below Capture) and content (different icon/description)

Component signature:
```typescript
interface ReviewSectionProps {
  className?: string;
}
```

Use usePendingInspections hook to fetch pending count (already exists from Phase 03/06).

Import PendingBadge and render it in the header.

Handle loading state (skeleton or spinner) while fetching count.

Handle error state gracefully (show "Unable to load" or retry).
  </action>
  <verify>grep -n "PendingBadge\|usePendingInspections\|Review Inspections" src/components/dashboard/ReviewSection.tsx | head -20</verify>
  <done>ReviewSection has header with title and PendingBadge, quick actions link, uses usePendingInspections hook. Component passes TypeScript check.</done>
</task>

<task type="auto">
  <name>Integrate ReviewSection into Dashboard</name>
  <files>src/pages/Dashboard.tsx</files>
  <action>
Update Dashboard.tsx to include ReviewSection in the Review workflow area.

Placement:
- Mobile: Below Capture section
- Desktop: Right column (side-by-side with Capture)

Import ReviewSection and render it within the Review workflow section (from Plan 01).

Ensure Review section has teal/cool background color block (bg-teal-50/5).

Verify the Review section is visible without scrolling on typical mobile viewport (iPhone 12 height ~800px).

Keep existing FAB positioning (FAB floats above both sections).
  </action>
  <verify>grep -n "ReviewSection\|bg-teal" src/pages/Dashboard.tsx | head -10</verify>
  <done>ReviewSection is imported and rendered in Dashboard within teal-themed section. Layout responsive (mobile stacked, desktop side-by-side). No TypeScript errors.</done>
</task>

<task type="auto">
  <name>Wire Review navigation</name>
  <files>src/components/dashboard/ReviewSection.tsx</files>
  <action>
Add navigation to Review section components:

1. "Review All Pending" button/link navigates to /review-inspections
2. Individual inspection preview items navigate to /review-inspections/:id
3. Use useNavigate from react-router-dom

Verify routes exist from Phase 03-05 implementation.

Add proper hover states and cursor-pointer to all clickable elements.
  </action>
  <verify>grep -n "navigate.*review\|onClick" src/components/dashboard/ReviewSection.tsx</verify>
  <done>All interactive elements in ReviewSection navigate to appropriate routes. No TypeScript errors.</done>
</task>

</tasks>

<verification>
- [ ] PendingBadge component exists with count prop, amber/red color coding, pulse animation
- [ ] ReviewSection exists with header, PendingBadge, quick actions, and recent preview
- [ ] ReviewSection uses usePendingInspections hook for data
- [ ] ReviewSection is integrated into Dashboard
- [ ] Review section has teal/cool background color block
- [ ] Pending badge shows correct count from API
- [ ] Colors update correctly (amber 1-4, red 5+, gray 0)
- [ ] npm run check passes (TypeScript)
- [ ] npm run build succeeds
</verification>

<success_criteria>
1. ReviewSection component exists and is rendered in Dashboard
2. PendingBadge displays current pending inspection count
3. PendingBadge uses amber for 1-4 items, red for 5+ items, gray for 0
4. Review section has minimal visual distinction (position + content, not heavy styling)
5. "Review All Pending" link navigates to /review-inspections
6. Pending count updates when inspections are completed/discarded (hook already handles this)
7. Review section is easily locatable (prominent position below Capture on mobile)
8. Layout responsive (mobile: stacked sections, desktop: side-by-side)
</success_criteria>

<output>
After completion, create `.planning/phases/12-home-page-layout-reorganization/12-02-SUMMARY.md`
</output>
