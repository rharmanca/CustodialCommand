---
phase: 03-workflow-improvements
plan: 06
type: execute
wave: 4
depends_on:
  - 03-04
  - 03-05
files_modified:
  - src/App.tsx
  - src/pages/dashboard.tsx
  - src/components/ui/FloatingActionButton.tsx
  - public/sw.js
autonomous: true

must_haves:
  truths:
    - Mobile dashboard has prominent Quick Capture entry point
    - Desktop dashboard shows link to Photo-First Review
    - Quick Capture mode loads in under 1 second on mobile 4G
    - Photo thumbnails display for fast browsing in pending list
    - Visual distinction between capture and review modes
    - Offline capability works for quick capture
  artifacts:
    - path: src/components/ui/FloatingActionButton.tsx
      provides: Large FAB for quick capture entry
      exports: ["FloatingActionButton"]
    - path: src/pages/dashboard.tsx
      provides: Updated dashboard with quick capture entry
    - path: public/sw.js
      provides: Enhanced service worker for offline quick capture
  key_links:
    - from: FAB on dashboard
      to: /quick-capture route
      via: React Router navigation
      pattern: navigate.*quick-capture
---

<objective>
Integrate quick capture and photo-first review into the main application with performance optimizations and mobile UX improvements.

Purpose: Connect new workflow features to existing app navigation, optimize loading performance, and ensure mobile-friendly UX.

Output: Fully integrated workflow features with performance targets met.
</objective>

<execution_context>
@C:/Users/veloc/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/veloc/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/03-workflow-improvements/03-RESEARCH.md
@src/App.tsx
@src/pages/dashboard.tsx

## Key Research Findings
- Quick capture entry: Large floating action button (FAB) on mobile dashboard
- Load time target: <1s on mobile 4G (PERF-01)
- Thumbnails essential for fast pending list browsing (PERF-03)
- Visual distinction: different colors/themes for capture vs review modes (MOB-02)
- Offline: use existing service worker PhotoManager (MOB-04)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Quick Capture entry point to mobile dashboard</name>
  <files>src/pages/dashboard.tsx, src/components/ui/FloatingActionButton.tsx</files>
  <action>
    Create FAB component and add to dashboard:

    1. src/components/ui/FloatingActionButton.tsx:
       - Large circular button (64px, min 44px touch target)
       - Position: fixed bottom-right (safe area)
       - Icon: Camera or Plus
       - Color: Primary brand color (distinct from other actions)
       - Props: onClick, icon, label (optional)
       - Animation: subtle pulse or scale on hover/press
       - Accessibility: aria-label, keyboard focus

    2. Update src/pages/dashboard.tsx:
       - Add FAB for Quick Capture (mobile only)
       - Hide on desktop (use media query or device detection)
       - On click: navigate to /quick-capture
       - Show badge with pending inspection count (optional)

    3. Add Quick Capture card/link:
       - Add prominent card in dashboard grid
       - Title: "Quick Capture"
       - Description: "Rapid photo documentation for field use"
       - Icon: Camera
       - Shows only on mobile or always visible

    Follow existing dashboard component patterns.
  </action>
  <verify>Dashboard shows FAB on mobile; clicking navigates to quick capture</verify>
  <done>Quick capture entry point integrated into dashboard</done>
</task>

<task type="auto">
  <name>Task 2: Add Photo-First Review link to desktop dashboard</name>
  <files>src/pages/dashboard.tsx</files>
  <action>
    Update dashboard with photo-first review entry:

    1. Add Review Inspections card:
       - Title: "Review Inspections"
       - Description: "Complete pending inspections from photos"
       - Icon: ClipboardCheck or Images
       - Show pending count badge
       - Click: navigate to /review or /inspections/review
       - Desktop-optimized (larger card, more detail)

    2. Conditional display:
       - Show Quick Capture card prominently on mobile
       - Show Review Inspections card prominently on desktop
       - Both available but emphasized appropriately

    3. Pending count indicator:
       - Fetch pending inspection count on dashboard load
       - Show badge on Review Inspections card
       - Update in real-time or on refresh

    Use existing card and navigation patterns.
  </action>
  <verify>Desktop dashboard shows Review Inspections card with pending count</verify>
  <done>Photo-first review entry point integrated into dashboard</done>
</task>

<task type="auto">
  <name>Task 3: Optimize performance and add routes</name>
  <files>src/App.tsx, public/sw.js</files>
  <action>
    Add routes and optimize for performance:

    1. Update src/App.tsx:
       - Add route: /quick-capture -> QuickCapture page
       - Add route: /review -> PhotoFirstReview page
       - Lazy load new pages for code splitting:
         const QuickCapture = lazy(() => import('./pages/quick-capture'));
       - Add Suspense fallback (loading spinner)

    2. Performance optimizations:
       - Preload quick-capture chunk on dashboard (mobile)
       - Preload review chunk on dashboard (desktop)
       - Use React.lazy and Suspense for route-level code splitting

    3. Update public/sw.js (if needed):
       - Ensure PhotoManager supports quick capture workflow
       - Add quick-capture route to precache (optional)
       - Verify offline photo storage works with new workflow
       - Test background sync for pending uploads

    4. Visual distinction:
       - Quick Capture: use warm/action color (amber/orange)
       - Review: use cool/info color (blue/teal)
       - Apply colors to FAB, cards, and page headers

    Test load times: target <1s for quick capture on simulated 4G.
  </action>
  <verify>Routes work; lazy loading functions; load time <2s on simulated slow 3G</verify>
  <done>Routes added, performance optimized, visual distinction applied</done>
</task>

</tasks>

<verification>
- [ ] FAB appears on mobile dashboard (min 44px touch target)
- [ ] FAB navigates to /quick-capture
- [ ] Quick Capture card visible on mobile dashboard
- [ ] Review Inspections card visible on desktop dashboard
- [ ] Pending count badge shows correct number
- [ ] Routes /quick-capture and /review work
- [ ] Lazy loading reduces initial bundle size
- [ ] Quick capture loads in <2s on simulated 4G
- [ ] Visual distinction between capture and review modes
- [ ] Offline photo capture works via service worker
</verification>

<success_criteria>
- Mobile dashboard has prominent Quick Capture entry (FAB + card)
- Desktop dashboard highlights Photo-First Review
- Quick Capture loads in <2s on mobile 4G
- Route-level code splitting reduces initial bundle
- Visual color distinction between capture (warm) and review (cool) modes
- Pending inspection count visible on dashboard
- All touch targets minimum 44px
- Offline photo capture functional via service worker
- Progressive enhancement: works with JS disabled (graceful degradation)
</success_criteria>

<output>
After completion, create `.planning/phases/03-workflow-improvements/03-06-SUMMARY.md`
</output>
