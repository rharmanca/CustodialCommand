---
phase: 04-ui-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/quick-capture.tsx
  - src/components/capture/QuickNoteInput.tsx
autonomous: true
must_haves:
  truths:
    - Quick Capture shows camera first, notes collapsed
    - Notes section expands when clicked
    - Photo preview strip shows below camera
    - Capture remains one-tap operation
  artifacts:
    - path: src/pages/quick-capture.tsx
      provides: Simplified Quick Capture layout
    - path: src/components/capture/QuickNoteInput.tsx
      provides: Collapsible notes component
  key_links:
    - from: Notes toggle
      to: notes form visibility
      via: React state toggle
---

<objective>
Simplify Quick Capture by collapsing notes into an expandable section, keeping camera as the primary focus.

Purpose: Faster capture when walking - one-tap operation is the goal.
Output: Quick Capture with camera prominent, notes collapsed, photo strip visible.
</objective>

<execution_context>
@C:/Users/veloc/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/04-ui-polish/04-CONTEXT.md
@src/pages/quick-capture.tsx
@src/components/capture/QuickNoteInput.tsx
</context>

<tasks>

<task type="auto">
  <name>Collapse notes section by default</name>
  <files>src/pages/quick-capture.tsx</files>
  <action>
    Modify Quick Capture page layout:
    1. Show camera feed and capture button as primary elements
    2. Move notes input into collapsible section below camera
    3. Add toggle button: "Add Note (optional)" or similar
    4. When expanded, show the existing QuickNoteInput component
    5. When collapsed, show only a hint or icon
    6. Keep photo preview strip visible below notes section
    
    Maintain existing amber/warm theme colors.
    Do not change camera component or photo handling.
  </action>
  <verify>
    Run `npm run check` and confirm exit code 0.
    Run `npm run build` and confirm build succeeds.
    Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-flow-check.cjs` and confirm `quickCaptureTransition: true`.
  </verify>
  <done>
    Page loads with camera prominent
    Notes section collapsed
    One-tap capture possible without expanding notes
  </done>
</task>

<task type="auto">
  <name>Enhance photo preview strip</name>
  <files>src/pages/quick-capture.tsx</files>
  <action>
    Improve the photo preview strip visibility:
    1. Ensure horizontal scroll for multiple photos
    2. Show thumbnails at consistent size (80x80px or similar)
    3. Add subtle border or shadow for visual separation
    4. Make photos deletable with clear remove button
    5. Keep strip visible below camera area
    
    Reference existing PhotoPreviewStrip component if it exists.
  </action>
  <verify>
    Run `node tests/visual-analysis.cjs` and confirm `tests/screenshots/visual-analysis/03-quick-capture-desktop.png` and `05-quick-capture-mobile.png` are generated.
    Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-deep-journey.cjs` and confirm `quickCaptureApiFallbackWorked: true`.
    Confirm photo preview strip is visible and supports multiple thumbnails without layout overflow.
  </verify>
  <done>
    Photo strip clearly visible and functional
    Captured photos appear immediately in strip
  </done>
</task>

</tasks>

<verification>
- Run `npm run check` and `npm run build` successfully.
- Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-flow-check.cjs` and confirm transitions remain `true`.
- Run `npx cross-env TARGET_URL=https://custodialcommand-dev.up.railway.app node tests/dev-browser-deep-journey.cjs` and confirm review/completion still succeed.
</verification>

<success_criteria>
- Notes section collapsed by default
- Single-tap capture possible without opening notes
- Photo strip shows captured photos
- Form submits with or without notes
</success_criteria>

<output>
After completion, create `.planning/phases/04-ui-polish/04-03-SUMMARY.md`
</output>
