var jt=Object.defineProperty,yt=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var $e=(t,r,s)=>r in t?jt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,I=(t,r)=>{for(var s in r||(r={}))Qe.call(r,s)&&$e(t,s,r[s]);if(Ie)for(var s of Ie(r))_e.call(r,s)&&$e(t,s,r[s]);return t},M=(t,r)=>yt(t,Nt(r));var O=(t,r)=>{var s={};for(var i in t)Qe.call(t,i)&&r.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&Ie)for(var i of Ie(t))r.indexOf(i)<0&&_e.call(t,i)&&(s[i]=t[i]);return s};var Pe=(t,r,s)=>$e(t,typeof r!="symbol"?r+"":r,s);var je=(t,r,s)=>new Promise((i,n)=>{var u=v=>{try{l(s.next(v))}catch(x){n(x)}},m=v=>{try{l(s.throw(v))}catch(x){n(x)}},l=v=>v.done?i(v.value):Promise.resolve(v.value).then(u,m);l((s=s.apply(t,r)).next())});import{r as o,x as de,b as _,f as wt,h as St,O as Ct,i as kt,Z as we,j as e,R as It}from"./ui-BqtzBtHj-v6.js";import{b as Et,c as Rt,s as le,i as Dt,l as Lt,u as At}from"./forms-Ba_dyWLB-v6.js";import{T as Ft,t as $t,n as Pt,c as Mt,f as Me}from"./textarea-goZqq0ZK-v6.js";import{c as ue,S as B,d as Ot,B as ee,C as Oe,e as Te,f as Ue,g as qe,h as ze}from"./index-BaYUFHT0-v6.js";import{L as te,I as ye,a as Tt}from"./LoadingOverlay-C66DN95D-v6.js";import{A as Ut,b as qt,c as zt,d as Wt,e as Bt,f as Ht,g as Kt,h as Gt}from"./alert-dialog-D16k0HHK-v6.js";import{k as Vt,h as Je,C as Yt,l as We,m as Qt,a as _t,n as Ee}from"./icons-CP4MPgx_-v6.js";import{P as Re,a as De,b as Le}from"./popover-CTFYECxd-v6.js";import"./vendor-oOSsakeb-v6.js";import"./charts-ChLs-CWD-v6.js";import"./utils-Cj9wHvoQ-v6.js";const Jt=Et({inspectorName:le().min(1,"Inspector name is required").max(100,"Inspector name too long"),school:le().min(1,"School is required").max(100,"School name too long"),date:le().min(1,"Date is required").refine(t=>!isNaN(Date.parse(t)),"Invalid date format"),location:le().min(1,"Location is required").max(200,"Location too long"),locationDescription:le().max(500,"Location description too long").optional().or(Lt("")),notes:le().min(10,"Please provide a detailed description (minimum 10 characters)").max(5e3,"Notes too long"),images:Rt(Dt(File)).max(5,"Maximum 5 images allowed").optional().default([])}),Zt={inspectorName:"",school:"",date:new Date().toISOString().split("T")[0],location:"",locationDescription:"",notes:"",images:[]};var Ze=1,Xt=.9,es=.8,ts=.17,Be=.1,He=.999,ss=.9999,rs=.99,as=/[\\\/_+.#"@\[\(\{&]/,ns=/[\\\/_+.#"@\[\(\{&]/g,os=/[\s-]/,st=/[\s-]/g;function Ge(t,r,s,i,n,u,m){if(u===r.length)return n===t.length?Ze:rs;var l=`${n},${u}`;if(m[l]!==void 0)return m[l];for(var v=i.charAt(u),x=s.indexOf(v,n),h=0,f,D,L,A;x>=0;)f=Ge(t,r,s,i,x+1,u+1,m),f>h&&(x===n?f*=Ze:as.test(t.charAt(x-1))?(f*=es,L=t.slice(n,x-1).match(ns),L&&n>0&&(f*=Math.pow(He,L.length))):os.test(t.charAt(x-1))?(f*=Xt,A=t.slice(n,x-1).match(st),A&&n>0&&(f*=Math.pow(He,A.length))):(f*=ts,n>0&&(f*=Math.pow(He,x-n))),t.charAt(x)!==r.charAt(u)&&(f*=ss)),(f<Be&&s.charAt(x-1)===i.charAt(u+1)||i.charAt(u+1)===i.charAt(u)&&s.charAt(x-1)!==i.charAt(u))&&(D=Ge(t,r,s,i,x+1,u+2,m),D*Be>f&&(f=D*Be)),f>h&&(h=f),x=s.indexOf(v,x+1);return m[l]=h,h}function Xe(t){return t.toLowerCase().replace(st," ")}function ls(t,r,s){return t=s&&s.length>0?`${t+" "+s.join(" ")}`:t,Ge(t,r,Xe(t),Xe(r),0,0,{})}var Ne='[cmdk-group=""]',Ke='[cmdk-group-items=""]',is='[cmdk-group-heading=""]',rt='[cmdk-item=""]',et=`${rt}:not([aria-disabled="true"])`,Ve="cmdk-item-select",ie="data-value",cs=(t,r,s)=>ls(t,r,s),at=o.createContext(void 0),Se=()=>o.useContext(at),nt=o.createContext(void 0),Ye=()=>o.useContext(nt),ot=o.createContext(void 0),lt=o.forwardRef((t,r)=>{let s=ce(()=>{var a,p;return{search:"",value:(p=(a=t.value)!=null?a:t.defaultValue)!=null?p:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=ce(()=>new Set),n=ce(()=>new Map),u=ce(()=>new Map),m=ce(()=>new Set),l=it(t),ve=t,{label:v,children:x,value:h,onValueChange:f,filter:D,shouldFilter:L,loop:A,disablePointerSelection:me=!1,vimBindings:W=!0}=ve,E=O(ve,["label","children","value","onValueChange","filter","shouldFilter","loop","disablePointerSelection","vimBindings"]),re=de(),G=de(),V=de(),H=o.useRef(null),U=js();se(()=>{if(h!==void 0){let a=h.trim();s.current.value=a,N.emit()}},[h]),se(()=>{U(6,Ce)},[]);let N=o.useMemo(()=>({subscribe:a=>(m.current.add(a),()=>m.current.delete(a)),snapshot:()=>s.current,setState:(a,p,y)=>{var c,j,S,P;if(!Object.is(s.current[a],p)){if(s.current[a]=p,a==="search")xe(),he(),U(1,pe);else if(a==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let F=document.getElementById(V);F?F.focus():(c=document.getElementById(re))==null||c.focus()}if(U(7,()=>{var F;s.current.selectedItemId=(F=Y())==null?void 0:F.id,N.emit()}),y||U(5,Ce),((j=l.current)==null?void 0:j.value)!==void 0){let F=p!=null?p:"";(P=(S=l.current).onValueChange)==null||P.call(S,F);return}}N.emit()}},emit:()=>{m.current.forEach(a=>a())}}),[]),q=o.useMemo(()=>({value:(a,p,y)=>{var c;p!==((c=u.current.get(a))==null?void 0:c.value)&&(u.current.set(a,{value:p,keywords:y}),s.current.filtered.items.set(a,z(p,y)),U(2,()=>{he(),N.emit()}))},item:(a,p)=>(i.current.add(a),p&&(n.current.has(p)?n.current.get(p).add(a):n.current.set(p,new Set([a]))),U(3,()=>{xe(),he(),s.current.value||pe(),N.emit()}),()=>{u.current.delete(a),i.current.delete(a),s.current.filtered.items.delete(a);let y=Y();U(4,()=>{xe(),(y==null?void 0:y.getAttribute("id"))===a&&pe(),N.emit()})}),group:a=>(n.current.has(a)||n.current.set(a,new Set),()=>{u.current.delete(a),n.current.delete(a)}),filter:()=>l.current.shouldFilter,label:v||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:re,inputId:V,labelId:G,listInnerRef:H}),[]);function z(a,p){var y,c;let j=(c=(y=l.current)==null?void 0:y.filter)!=null?c:cs;return a?j(a,s.current.search,p):0}function he(){if(!s.current.search||l.current.shouldFilter===!1)return;let a=s.current.filtered.items,p=[];s.current.filtered.groups.forEach(c=>{let j=n.current.get(c),S=0;j.forEach(P=>{let F=a.get(P);S=Math.max(F,S)}),p.push([c,S])});let y=H.current;J().sort((c,j)=>{var S,P;let F=c.getAttribute("id"),oe=j.getAttribute("id");return((S=a.get(oe))!=null?S:0)-((P=a.get(F))!=null?P:0)}).forEach(c=>{let j=c.closest(Ke);j?j.appendChild(c.parentElement===j?c:c.closest(`${Ke} > *`)):y.appendChild(c.parentElement===y?c:c.closest(`${Ke} > *`))}),p.sort((c,j)=>j[1]-c[1]).forEach(c=>{var j;let S=(j=H.current)==null?void 0:j.querySelector(`${Ne}[${ie}="${encodeURIComponent(c[0])}"]`);S==null||S.parentElement.appendChild(S)})}function pe(){let a=J().find(y=>y.getAttribute("aria-disabled")!=="true"),p=a==null?void 0:a.getAttribute(ie);N.setState("value",p||void 0)}function xe(){var a,p,y,c;if(!s.current.search||l.current.shouldFilter===!1){s.current.filtered.count=i.current.size;return}s.current.filtered.groups=new Set;let j=0;for(let S of i.current){let P=(p=(a=u.current.get(S))==null?void 0:a.value)!=null?p:"",F=(c=(y=u.current.get(S))==null?void 0:y.keywords)!=null?c:[],oe=z(P,F);s.current.filtered.items.set(S,oe),oe>0&&j++}for(let[S,P]of n.current)for(let F of P)if(s.current.filtered.items.get(F)>0){s.current.filtered.groups.add(S);break}s.current.filtered.count=j}function Ce(){var a,p,y;let c=Y();c&&(((a=c.parentElement)==null?void 0:a.firstChild)===c&&((y=(p=c.closest(Ne))==null?void 0:p.querySelector(is))==null||y.scrollIntoView({block:"nearest"})),c.scrollIntoView({block:"nearest"}))}function Y(){var a;return(a=H.current)==null?void 0:a.querySelector(`${rt}[aria-selected="true"]`)}function J(){var a;return Array.from(((a=H.current)==null?void 0:a.querySelectorAll(et))||[])}function fe(a){let p=J()[a];p&&N.setState("value",p.getAttribute(ie))}function ae(a){var p;let y=Y(),c=J(),j=c.findIndex(P=>P===y),S=c[j+a];(p=l.current)!=null&&p.loop&&(S=j+a<0?c[c.length-1]:j+a===c.length?c[0]:c[j+a]),S&&N.setState("value",S.getAttribute(ie))}function ge(a){let p=Y(),y=p==null?void 0:p.closest(Ne),c;for(;y&&!c;)y=a>0?bs(y,Ne):vs(y,Ne),c=y==null?void 0:y.querySelector(et);c?N.setState("value",c.getAttribute(ie)):ae(a)}let be=()=>fe(J().length-1),ne=a=>{a.preventDefault(),a.metaKey?be():a.altKey?ge(1):ae(1)},ke=a=>{a.preventDefault(),a.metaKey?fe(0):a.altKey?ge(-1):ae(-1)};return o.createElement(_.div,M(I({ref:r,tabIndex:-1},E),{"cmdk-root":"",onKeyDown:a=>{var p;(p=E.onKeyDown)==null||p.call(E,a);let y=a.nativeEvent.isComposing||a.keyCode===229;if(!(a.defaultPrevented||y))switch(a.key){case"n":case"j":{W&&a.ctrlKey&&ne(a);break}case"ArrowDown":{ne(a);break}case"p":case"k":{W&&a.ctrlKey&&ke(a);break}case"ArrowUp":{ke(a);break}case"Home":{a.preventDefault(),fe(0);break}case"End":{a.preventDefault(),be();break}case"Enter":{a.preventDefault();let c=Y();if(c){let j=new Event(Ve);c.dispatchEvent(j)}}}}}),o.createElement("label",{"cmdk-label":"",htmlFor:q.inputId,id:q.labelId,style:Ns},v),Ae(t,a=>o.createElement(nt.Provider,{value:N},o.createElement(at.Provider,{value:q},a))))}),ds=o.forwardRef((t,r)=>{var s,i;let n=de(),u=o.useRef(null),m=o.useContext(ot),l=Se(),v=it(t),x=(i=(s=v.current)==null?void 0:s.forceMount)!=null?i:m==null?void 0:m.forceMount;se(()=>{if(!x)return l.item(n,m==null?void 0:m.id)},[x]);let h=ct(n,u,[t.value,t.children,u],t.keywords),f=Ye(),D=Q(N=>N.value&&N.value===h.current),L=Q(N=>x||l.filter()===!1?!0:N.search?N.filtered.items.get(n)>0:!0);o.useEffect(()=>{let N=u.current;if(!(!N||t.disabled))return N.addEventListener(Ve,A),()=>N.removeEventListener(Ve,A)},[L,t.onSelect,t.disabled]);function A(){var N,q;me(),(q=(N=v.current).onSelect)==null||q.call(N,h.current)}function me(){f.setState("value",h.current,!0)}if(!L)return null;let U=t,{disabled:W,value:E,onSelect:re,forceMount:G,keywords:V}=U,H=O(U,["disabled","value","onSelect","forceMount","keywords"]);return o.createElement(_.div,M(I({ref:we(u,r)},H),{id:n,"cmdk-item":"",role:"option","aria-disabled":!!W,"aria-selected":!!D,"data-disabled":!!W,"data-selected":!!D,onPointerMove:W||l.getDisablePointerSelection()?void 0:me,onClick:W?void 0:A}),t.children)}),us=o.forwardRef((t,r)=>{let L=t,{heading:s,children:i,forceMount:n}=L,u=O(L,["heading","children","forceMount"]),m=de(),l=o.useRef(null),v=o.useRef(null),x=de(),h=Se(),f=Q(A=>n||h.filter()===!1?!0:A.search?A.filtered.groups.has(m):!0);se(()=>h.group(m),[]),ct(m,l,[t.value,t.heading,v]);let D=o.useMemo(()=>({id:m,forceMount:n}),[n]);return o.createElement(_.div,M(I({ref:we(l,r)},u),{"cmdk-group":"",role:"presentation",hidden:f?void 0:!0}),s&&o.createElement("div",{ref:v,"cmdk-group-heading":"","aria-hidden":!0,id:x},s),Ae(t,A=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?x:void 0},o.createElement(ot.Provider,{value:D},A))))}),ms=o.forwardRef((t,r)=>{let m=t,{alwaysRender:s}=m,i=O(m,["alwaysRender"]),n=o.useRef(null),u=Q(l=>!l.search);return!s&&!u?null:o.createElement(_.div,M(I({ref:we(n,r)},i),{"cmdk-separator":"",role:"separator"}))}),hs=o.forwardRef((t,r)=>{let x=t,{onValueChange:s}=x,i=O(x,["onValueChange"]),n=t.value!=null,u=Ye(),m=Q(h=>h.search),l=Q(h=>h.selectedItemId),v=Se();return o.useEffect(()=>{t.value!=null&&u.setState("search",t.value)},[t.value]),o.createElement(_.input,M(I({ref:r},i),{"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":v.listId,"aria-labelledby":v.labelId,"aria-activedescendant":l,id:v.inputId,type:"text",value:n?t.value:m,onChange:h=>{n||u.setState("search",h.target.value),s==null||s(h.target.value)}}))}),ps=o.forwardRef((t,r)=>{let x=t,{children:s,label:i="Suggestions"}=x,n=O(x,["children","label"]),u=o.useRef(null),m=o.useRef(null),l=Q(h=>h.selectedItemId),v=Se();return o.useEffect(()=>{if(m.current&&u.current){let h=m.current,f=u.current,D,L=new ResizeObserver(()=>{D=requestAnimationFrame(()=>{let A=h.offsetHeight;f.style.setProperty("--cmdk-list-height",A.toFixed(1)+"px")})});return L.observe(h),()=>{cancelAnimationFrame(D),L.unobserve(h)}}},[]),o.createElement(_.div,M(I({ref:we(u,r)},n),{"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":i,id:v.listId}),Ae(t,h=>o.createElement("div",{ref:we(m,v.listInnerRef),"cmdk-list-sizer":""},h)))}),xs=o.forwardRef((t,r)=>{let v=t,{open:s,onOpenChange:i,overlayClassName:n,contentClassName:u,container:m}=v,l=O(v,["open","onOpenChange","overlayClassName","contentClassName","container"]);return o.createElement(wt,{open:s,onOpenChange:i},o.createElement(St,{container:m},o.createElement(Ct,{"cmdk-overlay":"",className:n}),o.createElement(kt,{"aria-label":t.label,"cmdk-dialog":"",className:u},o.createElement(lt,I({ref:r},l)))))}),fs=o.forwardRef((t,r)=>Q(s=>s.filtered.count===0)?o.createElement(_.div,M(I({ref:r},t),{"cmdk-empty":"",role:"presentation"})):null),gs=o.forwardRef((t,r)=>{let m=t,{progress:s,children:i,label:n="Loading..."}=m,u=O(m,["progress","children","label"]);return o.createElement(_.div,M(I({ref:r},u),{"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n}),Ae(t,l=>o.createElement("div",{"aria-hidden":!0},l)))}),T=Object.assign(lt,{List:ps,Item:ds,Input:hs,Group:us,Separator:ms,Dialog:xs,Empty:fs,Loading:gs});function bs(t,r){let s=t.nextElementSibling;for(;s;){if(s.matches(r))return s;s=s.nextElementSibling}}function vs(t,r){let s=t.previousElementSibling;for(;s;){if(s.matches(r))return s;s=s.previousElementSibling}}function it(t){let r=o.useRef(t);return se(()=>{r.current=t}),r}var se=typeof window=="undefined"?o.useEffect:o.useLayoutEffect;function ce(t){let r=o.useRef();return r.current===void 0&&(r.current=t()),r}function Q(t){let r=Ye(),s=()=>t(r.snapshot());return o.useSyncExternalStore(r.subscribe,s,s)}function ct(t,r,s,i=[]){let n=o.useRef(),u=Se();return se(()=>{var m;let l=(()=>{var x;for(let h of s){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(x=h.current.textContent)==null?void 0:x.trim():n.current}})(),v=i.map(x=>x.trim());u.value(t,l,v),(m=r.current)==null||m.setAttribute(ie,l),n.current=l}),n}var js=()=>{let[t,r]=o.useState(),s=ce(()=>new Map);return se(()=>{s.current.forEach(i=>i()),s.current=new Map},[t]),(i,n)=>{s.current.set(i,n),r({})}};function ys(t){let r=t.type;return typeof r=="function"?r(t.props):"render"in r?r.render(t.props):t}function Ae({asChild:t,children:r},s){return t&&o.isValidElement(r)?o.cloneElement(ys(r),{ref:r.ref},s(r.props.children)):s(r)}var Ns={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const dt=o.forwardRef((i,s)=>{var n=i,{className:t}=n,r=O(n,["className"]);return e.jsx(T,I({ref:s,className:ue("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t)},r))});dt.displayName=T.displayName;const ut=o.forwardRef((i,s)=>{var n=i,{className:t}=n,r=O(n,["className"]);return e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Vt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(T.Input,I({ref:s,className:ue("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t)},r))]})});ut.displayName=T.Input.displayName;const ws=o.forwardRef((i,s)=>{var n=i,{className:t}=n,r=O(n,["className"]);return e.jsx(T.List,I({ref:s,className:ue("max-h-[300px] overflow-y-auto overflow-x-hidden",t)},r))});ws.displayName=T.List.displayName;const mt=o.forwardRef((t,r)=>e.jsx(T.Empty,I({ref:r,className:"py-6 text-center text-sm"},t)));mt.displayName=T.Empty.displayName;const ht=o.forwardRef((i,s)=>{var n=i,{className:t}=n,r=O(n,["className"]);return e.jsx(T.Group,I({ref:s,className:ue("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t)},r))});ht.displayName=T.Group.displayName;const Ss=o.forwardRef((i,s)=>{var n=i,{className:t}=n,r=O(n,["className"]);return e.jsx(T.Separator,I({ref:s,className:ue("-mx-1 h-px bg-border",t)},r))});Ss.displayName=T.Separator.displayName;const pt=o.forwardRef((i,s)=>{var n=i,{className:t}=n,r=O(n,["className"]);return e.jsx(T.Item,I({ref:s,className:ue("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t)},r))});pt.displayName=T.Item.displayName;class Cs extends It.Component{constructor(s){super(s);Pe(this,"handleRetry",()=>{window.location.reload()});Pe(this,"handleClearData",()=>{try{localStorage.clear(),console.log("LocalStorage cleared successfully")}catch(s){console.error("Failed to clear localStorage:",s)}window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,i){console.error("LocalStorage Error Boundary caught an error:",s),console.error("Component Stack:",i.componentStack),this.setState({errorInfo:i})}render(){const{hasError:s}=this.state,{children:i,fallback:n}=this.props;return s?n||e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"rounded-full bg-red-100 p-3",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something Went Wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We encountered an issue saving your preferences. This might happen if your browser's storage is full or if you're using private browsing mode."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Retry"}),e.jsx("button",{onClick:this.handleClearData,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors",children:"Clear Saved Data & Retry"})]}),!1]})}):i}}const tt={WARNING:80,CRITICAL:95};function ks(t={}){const{onWarning:r,checkInterval:s=3e4,checkOnMount:i=!0}=t,n=o.useRef(new Set),u=()=>je(null,null,function*(){try{const m=yield B.getQuotaInfo();if(!m||m.percentage===0)return;const{percentage:l,usage:v,quota:x}=m,h=f=>{const D=f/1048576;return D<1?`${(f/1024).toFixed(1)} KB`:`${D.toFixed(1)} MB`};if(l>=tt.CRITICAL){const f=`critical-${Math.floor(l)}`;n.current.has(f)||(console.warn(`[Storage Quota Monitor] CRITICAL: Storage at ${l.toFixed(1)}% capacity`),r==null||r(`Your browser storage is nearly full (${l.toFixed(1)}% used). Using ${h(v)} of ${h(x)} available. Please clear old data or browser cache to continue using this feature.`,l,"critical"),n.current.add(f))}else if(l>=tt.WARNING){const f=`warning-${Math.floor(l/5)*5}`;n.current.has(f)||(console.warn(`[Storage Quota Monitor] WARNING: Storage at ${l.toFixed(1)}% capacity`),r==null||r(`Your browser storage is ${l.toFixed(1)}% full. Using ${h(v)} of ${h(x)} available. Consider clearing old data to ensure smooth operation.`,l,"warning"),n.current.add(f))}}catch(m){console.error("[Storage Quota Monitor] Failed to check quota:",m)}});return o.useEffect(()=>{i&&u();const m=setInterval(u,s);return()=>{clearInterval(m)}},[s,i,r]),{checkQuota:u}}const Is=["ASA","CBR","GWC","LCA","OA","WLC"],Es=`
  @keyframes progress {
    from {
      width: 0%;
    }
    to {
      width: 100%;
    }
  }
`;function zs({onBack:t}){const{toast:r}=Ot();ks({onWarning:(d,g,w)=>{r({variant:w==="critical"?"destructive":"default",title:w==="critical"?"‚ö†Ô∏è Storage Almost Full":"‚ö° Storage Warning",description:d,duration:7e3})},checkInterval:3e4,checkOnMount:!0});const{register:s,handleSubmit:i,formState:{errors:n,isSubmitting:u},reset:m,setValue:l,watch:v,clearErrors:x}=At({resolver:$t(Jt),defaultValues:Zt}),h=v(),[f,D]=o.useState([]),[L,A]=o.useState([]),[me,W]=o.useState(!1),[E,re]=o.useState(null),[G,V]=o.useState(!1),[H,U]=o.useState(!1),[N,q]=o.useState(""),[z,he]=o.useState(null),[pe,xe]=o.useState(!0),[Ce,Y]=o.useState(!1),[J,fe]=o.useState(!0),[ae,ge]=o.useState([]),[be,ne]=o.useState(null),[ke,ve]=o.useState(!1),[a,p]=o.useState(!1),[y,c]=o.useState(!1),[j,S]=o.useState(null);o.useEffect(()=>{const d=()=>{const g=document.querySelectorAll(".form-section"),w=window.scrollY+window.innerHeight/2;g.forEach((C,b)=>{const $=C.getBoundingClientRect(),k=$.top+window.scrollY,Z=k+$.height;w>=k&&w<Z&&he(b+1)}),window.scrollY>100&&xe(!1)};return window.addEventListener("scroll",d),d(),()=>window.removeEventListener("scroll",d)},[]),o.useEffect(()=>{const d=()=>{const g=window.innerWidth<=768,w=window.innerHeight<500;Y(g&&w)};return d(),window.addEventListener("resize",d),window.addEventListener("orientationchange",d),()=>{window.removeEventListener("resize",d),window.removeEventListener("orientationchange",d)}},[]),o.useEffect(()=>{if(Object.values(h).some(g=>g&&g!=="")&&!G){const g=setTimeout(()=>{ve(!0);const w=M(I({},h),{selectedSchool:N,savedAt:new Date().toISOString()});B.setItem("custodialNotesDraft",JSON.stringify(w)),ne(new Date),ve(!1)},2e3);return()=>clearTimeout(g)}},[h,N,G]),o.useEffect(()=>{try{const d=B.getItem("custodialNotesDraft");let g=!1;if(d){const C=JSON.parse(d),b=new Date(C.savedAt);(Date.now()-b.getTime())/(1e3*60*60)<24?(g=!0,Object.keys(C).forEach(k=>{k!=="savedAt"&&k!=="selectedSchool"&&l(k,C[k])}),C.selectedSchool&&(q(C.selectedSchool),l("school",C.selectedSchool)),ne(b),r({title:"Draft Restored",description:`Your work from ${b.toLocaleString()} was restored.`,duration:5e3})):B.removeItem("custodialNotesDraft")}if(!g){const C=B.getItem("custodialInspectorName");C&&l("inspectorName",C);const b=B.getItem("custodialLastSchool");b&&(q(b),l("school",b))}const w=B.getItem("custodialRecentLocations");if(w){const C=JSON.parse(w);ge(Array.isArray(C)?C:[])}}catch(d){console.error("Error loading saved data:",d)}},[l,q,r]);const P=d=>je(null,null,function*(){const g=d.target.files;if(g&&g.length>0){const w=Array.from(g),b=5-f.length,$=w.slice(0,b);$.length<w.length&&r({title:"Maximum Images Reached",description:`Only ${$.length} images were added. Maximum of 5 images allowed.`});const k=[];let Z=0,K=0;for(const R of $)if(Z+=R.size,Pt(R,500))try{const X=yield Mt(R,{maxSizeKB:500});k.push(X.compressedFile),K+=X.compressedSize,console.log(`Compressed ${R.name}: ${Me(R.size)} ‚Üí ${Me(X.compressedSize)}`)}catch(X){console.error("Failed to compress image:",X),k.push(R),K+=R.size}else k.push(R),K+=R.size;D(R=>[...R,...k]);const Fe=k.map(R=>URL.createObjectURL(R));if(A(R=>[...R,...Fe]),k.length>0){const R=Z-K,X=R>0?(R/Z*100).toFixed(1):"0";r({title:"üì∏ Photos Uploaded Successfully!",description:`Successfully added ${k.length} photo${k.length>1?"s":""} to your custodial note documentation.${R>0?` Saved ${Me(R)} (${X}% compression).`:""}`,duration:3e3})}}d.target.value=""}),F=()=>{if(f.length>=5){r({variant:"destructive",title:"Maximum Images Reached",description:"Maximum of 5 images allowed. Please remove some images first."});return}const d=document.createElement("input");d.type="file",d.accept="image/*",d.capture="environment",d.onchange=g=>{const w=g;w.target.files&&w.target.files.length>0&&r({title:"üì∑ Photo Captured Successfully!",description:"Camera photo is being processed and added to your documentation.",duration:2e3}),P(w)},d.click()},oe=d=>{const g=f.filter((C,b)=>b!==d),w=L.filter((C,b)=>b!==d);URL.revokeObjectURL(L[d]),D(g),A(w)},xt=d=>{d.trim()&&ge(g=>{const w=g.filter(b=>b!==d),C=[d,...w].slice(0,5);try{B.setItem("custodialRecentLocations",JSON.stringify(C))}catch(b){console.error("Error saving recent locations:",b)}return C})},ft=()=>{j&&(l("inspectorName",j.inspectorName),l("school",j.school),l("date",j.date),l("location",j.location),l("locationDescription",j.locationDescription||""),q(j.school),l("notes",""),l("images",[]),c(!1),S(null),window.scrollTo({top:0,behavior:"smooth"}),r({title:"Form Pre-filled",description:"Inspector, school, date, and location have been filled in. Just add new notes and photos!",duration:4e3}))},gt=()=>{c(!1),S(null),t&&t()},bt=d=>je(null,null,function*(){re(d),W(!0)}),vt=()=>je(null,null,function*(){var d;if(E){V(!0),W(!1);try{const g=new FormData;Object.entries(E).forEach(([b,$])=>{b!=="images"&&g.append(b,($==null?void 0:$.toString())||"")}),f.forEach(b=>{g.append("images",b)});const C=yield fetch("/api/custodial-notes",{method:"POST",body:g,headers:{}});if(C.ok){p(!0),B.removeItem("custodialNotesDraft");try{B.setItem("custodialInspectorName",E.inspectorName),B.setItem("custodialLastSchool",N),xt(E.location)}catch(k){console.error("Error saving user preferences:",k)}S(E),r({title:"‚úÖ Custodial Note Submitted Successfully!",description:"Your custodial concern has been recorded and will be reviewed.",variant:"default",duration:5e3});const b=E.inspectorName,$=N;m(),l("inspectorName",b),l("school",$),q($),D([]),L.forEach(k=>URL.revokeObjectURL(k)),A([]),re(null),ne(null),V(!1),setTimeout(()=>{p(!1),c(!0)},3e3)}else{const b=yield C.json().catch(()=>({success:!1,message:"Unknown error occurred",details:"Unable to parse server response"}));let $=b.message||"Unable to submit custodial note. Please try again.",k="";b.success===!1&&b.details&&(Array.isArray(b.details)?k=`Please check: ${b.details.map(K=>`${K.field}: ${K.message}`).join(", ")}`:typeof b.details=="object"?k=`Required: ${Object.entries(b.details).filter(([K,Fe])=>Fe==="‚úó required").map(([K])=>K.replace(/([A-Z])/g," $1").trim()).join(", ")}`:k=b.details),(b.technical==="FormData parsing failed"||(d=b.message)!=null&&d.includes("form data is malformed"))&&($="Form submission error",k="Please refresh the page and try submitting again. If the problem persists, contact support."),r({variant:"destructive",title:"‚ùå Submission Failed",description:`${$}${k?`

${k}`:""}`,duration:8e3}),V(!1)}}catch(g){console.error("Error submitting custodial note:",g);let w="Network Error",C="Unable to connect to the server. Please check your connection and try again.";g instanceof TypeError&&(g.message.includes("Failed to fetch")?(w="Connection Failed",C=`Unable to reach the server. Please check:
‚Ä¢ Internet connection
‚Ä¢ Server is running
‚Ä¢ No firewall blocking the request`):g.message.includes("NetworkError")&&(w="Network Error",C="A network error occurred. Please try again.")),r({variant:"destructive",title:`‚ùå ${w}`,description:C,duration:8e3}),V(!1)}}});return e.jsxs(Cs,{children:[e.jsx("style",{children:Es}),e.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8",children:[t&&e.jsx(ee,{onClick:t,variant:"outline",className:"mb-4 back-button min-h-[48px] px-6",children:"‚Üê Back to Custodial"}),Ce&&J&&e.jsx("div",{className:"bg-orange-50 border-2 border-orange-400 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"üì±"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-orange-900 text-lg mb-1",children:"Landscape Mode Detected"}),e.jsxs("p",{className:"text-orange-800 text-sm",children:["For the best experience filling out this form, please"," ",e.jsx("strong",{children:"rotate your device to portrait mode"})," ","(vertical orientation)."]})]})]}),e.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>fe(!1),className:"text-orange-900 hover:bg-orange-100 flex-shrink-0",children:"‚úï"})]})}),be&&e.jsx("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:ke?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 animate-pulse"}),e.jsx("span",{children:"Saving draft..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:["Draft saved at ",be.toLocaleTimeString()]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-800 mb-2",children:"Submit Custodial Note"}),e.jsx("p",{className:"text-gray-600",children:"Report maintenance issues, concerns, or general observations"})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b-2 border-blue-200 py-3 -mx-6 px-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Form Progress:"}),z&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-blue-100 text-blue-800 border-2 border-blue-300",children:["Section ",z," of 3"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${z===1?"bg-blue-600":z&&z>1?"bg-blue-400":"bg-gray-200"}`}),e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${z===2?"bg-blue-600":z&&z>2?"bg-blue-400":"bg-gray-200"}`}),e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${z===3?"bg-blue-600":"bg-gray-200"}`})]})]})}),pe&&e.jsxs("div",{className:"animate-bounce text-center text-gray-500 text-sm",children:[e.jsx(Yt,{className:"inline-block"}),e.jsx("p",{children:"Scroll down to continue"})]}),e.jsx("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"‚≠ê"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-900 text-lg mb-1",children:"New Requirement: Inspector Name"}),e.jsxs("p",{className:"text-amber-800 text-sm",children:["Please enter your name in the ",e.jsx("strong",{children:"Inspector Name"})," ","field. This is now required for all custodial notes to ensure proper accountability and follow-up."]})]})]})}),e.jsxs("form",{onSubmit:i(bt),className:"space-y-8",children:[e.jsxs(Oe,{className:"form-section",children:[e.jsxs(Te,{children:[e.jsx(Ue,{children:"Basic Information"}),e.jsx(qe,{children:"Enter the basic details for this custodial note"})]}),e.jsxs(ze,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"inspectorName",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Inspector Name"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"}),e.jsxs(Re,{children:[e.jsx(De,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(Le,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Why is this required?"}),e.jsx("p",{className:"text-gray-600",children:"Your name ensures accountability and allows for proper follow-up on reported issues. This helps maintain quality standards across all facilities."})]})]})]}),e.jsx(ye,M(I({id:"inspectorName"},s("inspectorName")),{placeholder:"Enter your name",className:"border-2 min-h-[48px]"})),n.inspectorName&&e.jsx("p",{className:"text-sm text-red-500",children:n.inspectorName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"school",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"School"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"})]}),e.jsxs(Re,{open:H,onOpenChange:U,children:[e.jsx(De,{asChild:!0,children:e.jsxs(ee,{variant:"outline",role:"combobox","aria-expanded":H,className:"w-full justify-between border-2 min-h-[48px] text-left font-normal",children:[N||"Select school...",e.jsx(Qt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Le,{className:"w-full p-0",align:"start",children:e.jsxs(dt,{children:[e.jsx(ut,{placeholder:"Search schools..."}),e.jsx(mt,{children:"No school found."}),e.jsx(ht,{children:Is.map(d=>e.jsxs(pt,{value:d,onSelect:g=>{const w=g.toUpperCase();q(w),l("school",w),U(!1)},className:"min-h-[48px] cursor-pointer",children:[e.jsx(_t,{className:`mr-2 h-4 w-4 ${N===d?"opacity-100":"opacity-0"}`}),d]},d))})]})})]}),n.school&&e.jsx("p",{className:"text-sm text-red-500",children:n.school.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"date",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Date"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"})]}),e.jsx(ye,M(I({id:"date",type:"date"},s("date")),{className:"border-2 min-h-[48px]"})),n.date&&e.jsx("p",{className:"text-sm text-red-500",children:n.date.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"location",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Location"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"}),e.jsxs(Re,{children:[e.jsx(De,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(Le,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Location Examples"}),e.jsxs("ul",{className:"text-gray-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:'Room numbers: "Room 105", "Classroom 202"'}),e.jsx("li",{children:'Common areas: "Gymnasium", "Cafeteria", "Library"'}),e.jsx("li",{children:'Outdoor: "Playground", "Parking Lot", "Field"'}),e.jsx("li",{children:'Facilities: "Restroom 1st Floor", "Main Office"'})]})]})]})]}),ae.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"Recent locations:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ae.map((d,g)=>e.jsx("button",{type:"button",onClick:()=>{l("location",d),n.location&&x("location")},className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 hover:border-blue-300 transition-colors",children:d},g))})]}),e.jsx(ye,M(I({id:"location"},s("location")),{placeholder:"e.g., Room 105, Gymnasium, Cafeteria",className:"border-2 min-h-[48px]"})),n.location&&e.jsx("p",{className:"text-sm text-red-500",children:n.location.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx(ye,M(I({id:"locationDescription"},s("locationDescription")),{placeholder:"e.g., Main Building, East Wing, 2nd Floor",className:"min-h-[48px]"})),n.locationDescription&&e.jsx("p",{className:"text-sm text-red-500",children:n.locationDescription.message})]})]})]}),e.jsxs(Oe,{className:"form-section",children:[e.jsxs(Te,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:["Issue Description & Notes",e.jsxs(Re,{children:[e.jsx(De,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(Le,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"What to Include"}),e.jsxs("ul",{className:"text-gray-600 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"What:"})," Describe the issue clearly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Where:"})," Specific location details"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"When:"})," When you noticed it"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Severity:"})," Is it urgent or can it wait?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Impact:"})," How does it affect operations?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Action:"})," What needs to be done?"]})]})]})]})]}),e.jsx(qe,{children:"Provide detailed information about the custodial issue or observation"})]}),e.jsxs(ze,{children:[e.jsx(Ft,M(I({},s("notes")),{placeholder:`Describe the issue, maintenance need, or observation...

Examples:
‚Ä¢ Broken equipment or fixtures
‚Ä¢ Cleaning supply needs
‚Ä¢ Safety concerns
‚Ä¢ Maintenance requests
‚Ä¢ General observations
‚Ä¢ Follow-up needed`,rows:10,className:"min-h-[250px]"})),n.notes&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:n.notes.message})]})]}),e.jsxs(Oe,{className:"form-section",children:[e.jsxs(Te,{children:[e.jsx(Ue,{children:"Photos & Documentation"}),e.jsx(qe,{children:"Upload images or capture photos to document the issue"})]}),e.jsxs(ze,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(te,{htmlFor:"imageUpload",className:"block mb-2",children:"Upload Images (Optional)"}),e.jsx(ye,{id:"imageUpload",type:"file",accept:"image/*",multiple:!0,onChange:P,className:"hidden"}),e.jsx(ee,{type:"button",onClick:()=>{var d;return(d=document.getElementById("imageUpload"))==null?void 0:d.click()},variant:"outline",className:"w-full h-12 border-2 border-dashed hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsxs("span",{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"text-2xl",children:"üìÅ"}),e.jsxs("span",{className:"font-medium",children:["Tap to Select Photos"," ",f.length>0&&`(${f.length} selected)`]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 5 images ‚Ä¢ Images auto-compressed"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(ee,{type:"button",onClick:F,variant:"outline",className:"w-full sm:w-auto h-12 border-2",children:e.jsxs("span",{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"text-xl",children:"üì∑"}),e.jsx("span",{children:"Capture Photo"})]})})})]}),L.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(te,{className:"block mb-2",children:["Uploaded Images (",f.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:L.map((d,g)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:d,alt:`Upload ${g+1}`,className:"w-full h-24 object-cover rounded-lg border"}),e.jsx(ee,{type:"button",onClick:()=>oe(g),variant:"destructive",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:"√ó"})]},g))})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(ee,{type:"submit",size:"lg",disabled:u||G,className:"w-full md:w-auto disabled:bg-gray-400 disabled:cursor-not-allowed min-h-[56px] text-lg font-semibold transition-all duration-300 relative overflow-hidden",children:u||G?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-5 h-5 border-3 border-white/30 rounded-full"})]}),e.jsx("span",{className:"animate-pulse",children:"Submitting your report..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Custodial Note"})]})})})]}),e.jsx(Ut,{open:me,onOpenChange:W,children:e.jsxs(qt,{className:"max-w-lg",children:[e.jsxs(zt,{children:[e.jsx(Wt,{className:"text-blue-800 text-xl",children:"‚úÖ Confirm Submission"}),e.jsx(Bt,{className:"text-left",children:"Please review your custodial note before submitting:"})]}),E&&e.jsx("div",{className:"space-y-3 py-4",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900",children:E.inspectorName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"School:"}),e.jsx("p",{className:"text-gray-900",children:E.school})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Date:"}),e.jsx("p",{className:"text-gray-900",children:E.date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Location:"}),e.jsx("p",{className:"text-gray-900",children:E.location})]})]}),E.locationDescription&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Location Details:"}),e.jsx("p",{className:"text-gray-900 text-sm",children:E.locationDescription})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Notes:"}),e.jsx("p",{className:"text-gray-900 text-sm max-h-24 overflow-y-auto",children:E.notes&&E.notes.length>200?`${E.notes.substring(0,200)}...`:E.notes||"No notes provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Photos:"}),e.jsxs("p",{className:"text-gray-900",children:[f.length," image",f.length!==1?"s":""," ","attached"]})]})]})}),e.jsxs(Ht,{children:[e.jsx(Kt,{children:"Review/Edit"}),e.jsx(Gt,{onClick:vt,className:"bg-blue-600 hover:bg-blue-700",children:"Confirm & Submit"})]})]})}),G&&e.jsx(Tt,{message:"Submitting report..."}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center animate-bounce",children:e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("svg",{className:"w-12 h-12 text-white animate-in zoom-in duration-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsx(Ee,{className:"absolute -top-2 -right-2 h-8 w-8 text-yellow-400 animate-pulse"}),e.jsx(Ee,{className:"absolute -bottom-2 -left-2 h-6 w-6 text-yellow-400 animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx(Ee,{className:"absolute -top-2 -left-2 h-5 w-5 text-blue-400 animate-pulse",style:{animationDelay:"0.4s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-700",children:"üéâ Success!"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Your custodial note has been submitted successfully!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you back to the home page..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full animate-[progress_3s_ease-in-out]",style:{animation:"progress 3s ease-in-out forwards"}})})]})})}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Report Another Issue?"}),e.jsx("p",{className:"text-gray-600",children:"Found another issue at the same location?"}),e.jsx("p",{className:"text-sm text-gray-500",children:"We can pre-fill your inspector name, school, date, and location to save you time!"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:ft,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors shadow-md hover:shadow-lg min-h-[48px]",children:"üìù Report Another Issue Here"}),e.jsx("button",{onClick:gt,className:"w-full px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg transition-colors min-h-[48px]",children:"üè† Return to Home"})]})]})})})]})]})}export{zs as default};
