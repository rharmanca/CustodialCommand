const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/custodial-inspection-CA0rmuaV-v6.js","assets/ui-BqtzBtHj-v6.js","assets/vendor-oOSsakeb-v6.js","assets/forms-Ba_dyWLB-v6.js","assets/textarea-goZqq0ZK-v6.js","assets/collapsible-section-B7qixoUz-v6.js","assets/icons-CP4MPgx_-v6.js","assets/LoadingOverlay-C66DN95D-v6.js","assets/dialog-DQHEhcSp-v6.js","assets/rating-criteria-DCg5BUcG-v6.js","assets/charts-ChLs-CWD-v6.js","assets/utils-Cj9wHvoQ-v6.js","assets/inspection-data-DnEJZeRZ-v6.js","assets/separator-3IPEVzVw-v6.js","assets/tabs-BvmPf-cb-v6.js","assets/collapsible-BPj4fPej-v6.js","assets/popover-CTFYECxd-v6.js","assets/scores-dashboard-DuAQqHLo-v6.js","assets/custodial-notes-CMfTMAdR-v6.js","assets/alert-dialog-D16k0HHK-v6.js","assets/whole-building-inspection-D1xATlrT-v6.js","assets/admin-inspections-CBXNI3NC-v6.js","assets/monthly-feedback-BgDMhQ1p-v6.js"])))=>i.map(i=>d[i]);
var hs=Object.defineProperty,fs=Object.defineProperties;var ms=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var at=t=>{throw TypeError(t)},it=Math.pow,Qe=(t,e,s)=>e in t?hs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,m=(t,e)=>{for(var s in e||(e={}))rt.call(e,s)&&Qe(t,s,e[s]);if(Ie)for(var s of Ie(e))nt.call(e,s)&&Qe(t,s,e[s]);return t},j=(t,e)=>fs(t,ms(e));var I=(t,e)=>{var s={};for(var r in t)rt.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&Ie)for(var r of Ie(t))e.indexOf(r)<0&&nt.call(t,r)&&(s[r]=t[r]);return s};var je=(t,e,s)=>Qe(t,typeof e!="symbol"?e+"":e,s),$e=(t,e,s)=>e.has(t)||at("Cannot "+s);var o=(t,e,s)=>($e(t,e,"read from private field"),s?s.call(t):e.get(t)),E=(t,e,s)=>e.has(t)?at("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),x=(t,e,s,r)=>($e(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),F=(t,e,s)=>($e(t,e,"access private method"),s);var Oe=(t,e,s,r)=>({set _(n){x(t,e,n,s)},get _(){return o(t,e,r)}});var G=(t,e,s)=>new Promise((r,n)=>{var i=l=>{try{c(s.next(l))}catch(f){n(f)}},u=l=>{try{c(s.throw(l))}catch(f){n(f)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((s=s.apply(t,e)).next())});import{r as h,a6 as ps,j as a,a7 as Ft,a8 as Dt,a9 as Lt,aa as Mt,ab as qt,ac as _t,Y as gs,ad as ys,R as bs}from"./ui-BqtzBtHj-v6.js";import{a as vs,r as xs}from"./vendor-oOSsakeb-v6.js";import{_ as ie}from"./charts-ChLs-CWD-v6.js";import{c as Qt,t as ws}from"./utils-Cj9wHvoQ-v6.js";import{X as $t,g as Be,f as Ss,w as Vt,W as Ht,I as ot,U as js,H as Ns,x as Cs,y as Es,z as As,o as ks}from"./icons-CP4MPgx_-v6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Re={},ct;function Ps(){if(ct)return Re;ct=1;var t=vs();return Re.createRoot=t.createRoot,Re.hydrateRoot=t.hydrateRoot,Re}var Is=Ps();const lt=768;function Os(){const[t,e]=h.useState(void 0),[s,r]=h.useState(!1),[n,i]=h.useState("portrait");return h.useEffect(()=>{const u=window.matchMedia(`(max-width: ${lt-1}px)`),c=window.matchMedia("(orientation: portrait)"),l=()=>{e(window.innerWidth<lt),i(c.matches?"portrait":"landscape")},f=()=>{r("ontouchstart"in window||navigator.maxTouchPoints>0)};return u.addEventListener("change",l),c.addEventListener("change",l),l(),f(),()=>{u.removeEventListener("change",l),c.removeEventListener("change",l)}},[]),{isMobile:!!t,isTouch:s,orientation:n}}function Rs(){const[t,e]=h.useState([]),s=h.useCallback(f=>{const p=Math.random().toString(36).substr(2,9),d=f.type==="error"?7e3:5e3,g=j(m({},f),{id:p,duration:f.duration||d});return e(y=>[...y,g]),g.duration!==0&&setTimeout(()=>{r(p)},g.duration),p},[]),r=h.useCallback(f=>{e(p=>p.filter(d=>d.id!==f))},[]),n=h.useCallback(()=>{e([])},[]),i=h.useCallback((f,p,d)=>s({type:"success",message:f,title:p||"Success",duration:d}),[s]),u=h.useCallback((f,p,d)=>s({type:"error",message:f,title:p||"Error",duration:d}),[s]),c=h.useCallback((f,p,d)=>s({type:"info",message:f,title:p||"Info",duration:d}),[s]),l=h.useCallback((f,p,d)=>s({type:"warning",message:f,title:p||"Warning",duration:d}),[s]);return{notifications:t,addNotification:s,removeNotification:r,clearAllNotifications:n,showSuccess:i,showError:u,showInfo:c,showWarning:l}}const oe=class oe{constructor(){je(this,"storage",new Map);je(this,"useLocalStorage");je(this,"warnings",new Set);this.useLocalStorage=this.checkLocalStorageAvailability(),this.useLocalStorage||console.warn("SafeLocalStorage: localStorage is unavailable. Using in-memory fallback storage. Data will not persist across page reloads.")}static getInstance(){return oe.instance||(oe.instance=new oe),oe.instance}checkLocalStorageAvailability(){try{if(typeof window=="undefined"||!("localStorage"in window))return!1;const e=window.localStorage,s="__safe_storage_test__",r="test";e.setItem(s,r);const n=e.getItem(s);return e.removeItem(s),n===r}catch(e){return!1}}setItem(e,s){if(this.useLocalStorage)try{localStorage.setItem(e,s);return}catch(r){this.handleStorageError(r,"setItem")}this.storage.set(e,s)}getItem(e){if(this.useLocalStorage)try{return localStorage.getItem(e)}catch(s){this.handleStorageError(s,"getItem")}return this.storage.get(e)||null}removeItem(e){if(this.useLocalStorage)try{localStorage.removeItem(e);return}catch(s){this.handleStorageError(s,"removeItem")}this.storage.delete(e)}clear(){if(this.useLocalStorage)try{localStorage.clear();return}catch(e){this.handleStorageError(e,"clear")}this.storage.clear()}keys(){if(this.useLocalStorage)try{return Object.keys(localStorage)}catch(e){this.handleStorageError(e,"keys")}return Array.from(this.storage.keys())}get length(){if(this.useLocalStorage)try{return localStorage.length}catch(e){this.handleStorageError(e,"length")}return this.storage.size}isUsingLocalStorage(){return this.useLocalStorage}getQuotaInfo(){return G(this,null,function*(){if("storage"in navigator&&"estimate"in navigator.storage)try{const e=yield navigator.storage.estimate(),s=e.usage||0,r=e.quota||0,n=r>0?s/r*100:0;return{usage:s,quota:r,percentage:Math.round(n*100)/100}}catch(e){console.warn("SafeLocalStorage: Unable to get quota info",e)}return null})}handleStorageError(e,s){const r=`${s}:${e.name}`;this.warnings.has(r)||(console.warn(`SafeLocalStorage: ${s} failed with ${e.name}. Switching to in-memory fallback storage.`,e),this.warnings.add(r)),(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&console.error("SafeLocalStorage: Storage quota exceeded. Consider clearing old data or increasing storage allocation."),this.useLocalStorage&&(this.useLocalStorage=!1,console.warn("SafeLocalStorage: Permanently switched to in-memory fallback mode for this session."))}};je(oe,"instance");let We=oe;const J=We.getInstance(),Ts=1,Fs=1e6;let Ve=0;function Ds(){return Ve=(Ve+1)%Number.MAX_SAFE_INTEGER,Ve.toString()}const He=new Map,ut=t=>{if(He.has(t))return;const e=setTimeout(()=>{He.delete(t),Ne({type:"REMOVE_TOAST",toastId:t})},Fs);He.set(t,e)},Ls=(t,e)=>{switch(e.type){case"ADD_TOAST":return j(m({},t),{toasts:[e.toast,...t.toasts].slice(0,Ts)});case"UPDATE_TOAST":return j(m({},t),{toasts:t.toasts.map(s=>s.id===e.toast.id?m(m({},s),e.toast):s)});case"DISMISS_TOAST":{const{toastId:s}=e;return s?ut(s):t.toasts.forEach(r=>{ut(r.id)}),j(m({},t),{toasts:t.toasts.map(r=>r.id===s||s===void 0?j(m({},r),{open:!1}):r)})}case"REMOVE_TOAST":return e.toastId===void 0?j(m({},t),{toasts:[]}):j(m({},t),{toasts:t.toasts.filter(s=>s.id!==e.toastId)})}},Fe=[];let De={toasts:[]};function Ne(t){De=Ls(De,t),Fe.forEach(e=>{e(De)})}function Ms(e){var t=I(e,[]);const s=Ds(),r=i=>Ne({type:"UPDATE_TOAST",toast:j(m({},i),{id:s})}),n=()=>Ne({type:"DISMISS_TOAST",toastId:s});return Ne({type:"ADD_TOAST",toast:j(m({},t),{id:s,open:!0,onOpenChange:i=>{i||n()}})}),{id:s,dismiss:n,update:r}}function qs(){const[t,e]=h.useState(De);return h.useEffect(()=>(Fe.push(e),()=>{const s=Fe.indexOf(e);s>-1&&Fe.splice(s,1)}),[t]),j(m({},t),{toast:Ms,dismiss:s=>Ne({type:"DISMISS_TOAST",toastId:s})})}const dt=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ht=Qt,Ye=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return ht(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:i}=e,u=Object.keys(n).map(f=>{const p=s==null?void 0:s[f],d=i==null?void 0:i[f];if(p===null)return null;const g=dt(p)||dt(d);return n[f][g]}),c=s&&Object.entries(s).reduce((f,p)=>{let[d,g]=p;return g===void 0||(f[d]=g),f},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let N=p,{class:d,className:g}=N,y=I(N,["class","className"]);return Object.entries(y).every(b=>{let[w,S]=b;return Array.isArray(S)?S.includes(m(m({},i),c)[w]):m(m({},i),c)[w]===S})?[...f,d,g]:f},[]);return ht(t,u,l,s==null?void 0:s.class,s==null?void 0:s.className)};function O(...t){return ws(Qt(t))}const _s=ps,Kt=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx(qt,m({ref:s,className:O("fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[999999] flex max-h-screen w-auto flex-col items-center justify-center p-4 pointer-events-none",t),style:{maxWidth:"500px"}},e))});Kt.displayName=qt.displayName;const Qs=Ye("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-lg border-2 p-6 pr-8 shadow-xl transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-top-full data-[state=open]:slide-in-from-top-full backdrop-blur-sm",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ut=h.forwardRef((n,r)=>{var i=n,{className:t,variant:e}=i,s=I(i,["className","variant"]);return a.jsx(Ft,m({ref:r,className:O(Qs({variant:e}),t)},s))});Ut.displayName=Ft.displayName;const $s=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx(_t,m({ref:s,className:O("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t)},e))});$s.displayName=_t.displayName;const zt=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx(Mt,j(m({ref:s,className:O("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":""},e),{children:a.jsx($t,{className:"h-4 w-4"})}))});zt.displayName=Mt.displayName;const Bt=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx(Dt,m({ref:s,className:O("text-sm font-semibold",t)},e))});Bt.displayName=Dt.displayName;const Wt=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx(Lt,m({ref:s,className:O("text-sm opacity-90",t)},e))});Wt.displayName=Lt.displayName;function Vs(){const{toasts:t}=qs();return a.jsxs(_s,{children:[t.map(function(u){var c=u,{id:e,title:s,description:r,action:n}=c,i=I(c,["id","title","description","action"]);return a.jsxs(Ut,j(m({},i),{children:[a.jsxs("div",{className:"grid gap-1",children:[s&&a.jsx(Bt,{children:s}),r&&a.jsx(Wt,{children:r})]}),n,a.jsx(zt,{})]}),e)}),a.jsx(Kt,{})]})}const Hs=Ye("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-md hover:shadow-lg active:scale-95 min-h-[48px] touch-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 border-3 border-primary/30 hover:border-primary/40 shadow-lg hover:shadow-xl",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-3 border-destructive/30 hover:border-destructive/40 shadow-lg hover:shadow-xl",outline:"border-3 border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-accent/50 shadow-md hover:shadow-lg",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-3 border-secondary/30 hover:border-secondary/40 shadow-md hover:shadow-lg",ghost:"hover:bg-accent hover:text-accent-foreground border-3 border-transparent hover:border-accent/20",link:"text-primary underline-offset-4 hover:underline border-3 border-transparent"},size:{default:"h-12 px-6 py-3 font-semibold min-h-[48px]",sm:"h-10 rounded-md px-4 font-medium min-h-[44px]",lg:"h-14 rounded-md px-8 font-semibold text-base min-h-[56px]",icon:"h-12 w-12 min-h-[48px] min-w-[48px]"}},defaultVariants:{variant:"default",size:"default"}}),Le=h.forwardRef((u,i)=>{var c=u,{className:t,variant:e,size:s,asChild:r=!1}=c,n=I(c,["className","variant","size","asChild"]);const l=r?gs:"button";return a.jsx(l,m({className:O(Hs({variant:e,size:s,className:t})),ref:i},n))});Le.displayName="Button";function Ks({notifications:t,onRemove:e}){return t.length?a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(s=>a.jsx("div",{className:`
            p-4 rounded-lg shadow-lg max-w-sm cursor-pointer transform transition-all
            ${s.type==="success"?"bg-green-50 border border-green-200 text-green-800":""}
            ${s.type==="error"?"bg-red-50 border border-red-200 text-red-800":""}
            ${s.type==="warning"?"bg-yellow-50 border border-yellow-200 text-yellow-800":""}
            ${s.type==="info"?"bg-blue-50 border border-blue-200 text-blue-800":""}
          `,onClick:()=>e(s.id),children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:s.title}),a.jsx("p",{className:"text-sm mt-1",children:s.message})]}),a.jsx("button",{onClick:r=>{r.stopPropagation(),e(s.id)},className:"ml-2 text-gray-400 hover:text-gray-600",children:"Ã—"})]})},s.id))}):null}const Us=Ye("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ft(r){var n=r,{className:t,variant:e}=n,s=I(n,["className","variant"]);return a.jsx("div",m({className:O(Us({variant:e}),t)},s))}const Gt=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx("div",m({ref:s,className:O("rounded-lg border-2 bg-card text-card-foreground shadow-md transition-all duration-300","[@media(hover:hover)_and_(pointer:fine)]:hover:-translate-y-1 [@media(hover:hover)_and_(pointer:fine)]:hover:shadow-xl",t)},e))});Gt.displayName="Card";const zs=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx("div",m({ref:s,className:O("flex flex-col space-y-1.5 p-6 bg-gradient-to-r from-primary/5 to-accent/5 border-b border-border/50",t)},e))});zs.displayName="CardHeader";const Bs=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx("h3",m({ref:s,className:O("text-2xl font-bold leading-none tracking-tight text-foreground",t)},e))});Bs.displayName="CardTitle";const Ws=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx("p",m({ref:s,className:O("text-sm text-muted-foreground",t)},e))});Ws.displayName="CardDescription";const Xt=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx("div",m({ref:s,className:O("p-6 pt-0",t)},e))});Xt.displayName="CardContent";const Gs=h.forwardRef((r,s)=>{var n=r,{className:t}=n,e=I(n,["className"]);return a.jsx("div",m({ref:s,className:O("flex items-center p-6 pt-0",t)},e))});Gs.displayName="CardFooter";function Xs({className:t}){const[e,s]=h.useState(navigator.onLine),[r,n]=h.useState([]),[i,u]=h.useState(!1);h.useEffect(()=>{const d=()=>s(!0),g=()=>s(!1);return window.addEventListener("online",d),window.addEventListener("offline",g),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",y=>{y.data.type==="FORM_SYNC_SUCCESS"&&n(N=>N.filter(b=>b.id!==y.data.formId))}),c(),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",g)}},[]);const c=()=>G(null,null,function*(){if("serviceWorker"in navigator&&navigator.serviceWorker.controller){const d=new MessageChannel;d.port1.onmessage=g=>{if(g.data.type==="OFFLINE_FORMS_RESPONSE"){const y=Object.values(g.data.forms);n(y)}},navigator.serviceWorker.controller.postMessage({type:"GET_OFFLINE_FORMS"},[d.port2])}}),l=()=>e?r.length>0?a.jsx(Ss,{className:"w-4 h-4 text-yellow-500"}):a.jsx(Vt,{className:"w-4 h-4 text-green-500"}):a.jsx(Ht,{className:"w-4 h-4 text-red-500"}),f=()=>e?r.length>0?`${r.length} form${r.length>1?"s":""} pending sync`:"Online":"Offline",p=()=>e?r.length>0?"secondary":"default":"destructive";return e&&r.length===0?null:a.jsx("div",{className:t,children:a.jsx(Gt,{className:"border-l-4 border-l-blue-500",children:a.jsxs(Xt,{className:"p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[l(),a.jsx("span",{className:"text-sm font-medium",children:f()}),r.length>0&&a.jsx(ft,{variant:p(),className:"text-xs",children:r.length})]}),r.length>0&&a.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>u(!i),className:"text-xs",children:i?"Hide":"Details"})]}),i&&r.length>0&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Forms saved offline will be submitted when connection is restored:"}),r.map(d=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Be,{className:"w-3 h-3 text-yellow-500"}),a.jsxs("span",{children:[d.data.school," - ",new Date(d.timestamp).toLocaleTimeString()]})]}),a.jsx(ft,{variant:"outline",className:"text-xs",children:d.retryCount>0?`Retry ${d.retryCount}`:"Pending"})]},d.id))]}),!e&&a.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Your forms are being saved locally and will sync when you're back online."})]})})})}function Ys({notifications:t,onRemove:e,maxNotifications:s=5}){const[r,n]=h.useState([]);h.useEffect(()=>{const l=[...t].sort((f,p)=>p.timestamp.getTime()-f.timestamp.getTime()).slice(0,s);n(l),l.forEach(f=>{if(!f.persistent&&f.duration!==0){const p=f.duration||5e3;setTimeout(()=>{e(f.id)},p)}})},[t,e,s]);const i=l=>{switch(l){case"success":return a.jsx(Vt,{className:"w-5 h-5 text-green-600"});case"error":return a.jsx(Be,{className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(Be,{className:"w-5 h-5 text-yellow-600"});case"info":return a.jsx(ot,{className:"w-5 h-5 text-blue-600"});case"offline":return a.jsx(Ht,{className:"w-5 h-5 text-orange-600"});case"sync":return a.jsx(js,{className:"w-5 h-5 text-blue-600"});default:return a.jsx(ot,{className:"w-5 h-5 text-gray-600"})}},u=l=>{switch(l){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";case"offline":return"bg-orange-50 border-orange-200";case"sync":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}},c=l=>{switch(l){case"success":return"text-green-900";case"error":return"text-red-900";case"warning":return"text-yellow-900";case"info":return"text-blue-900";case"offline":return"text-orange-900";case"sync":return"text-blue-900";default:return"text-gray-900"}};return r.length===0?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full",children:r.map(l=>a.jsx("div",{className:`relative p-4 rounded-lg border shadow-lg transition-all duration-300 transform animate-in slide-in-from-right-full ${u(l.type)}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:i(l.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:`text-sm font-semibold ${c(l.type)}`,children:l.title}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:l.timestamp.toLocaleTimeString()}),a.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>e(l.id),className:"h-6 w-6 p-0 hover:bg-black/10",children:a.jsx($t,{className:"w-3 h-3"})})]})]}),a.jsx("p",{className:`text-sm mt-1 ${c(l.type)} opacity-90`,children:l.message}),l.actions&&l.actions.length>0&&a.jsx("div",{className:"flex space-x-2 mt-3",children:l.actions.map((f,p)=>a.jsx(Le,{variant:f.variant||"outline",size:"sm",onClick:f.action,className:"text-xs h-7",children:f.label},p))})]})]})},l.id))})}function Js(){const[t,e]=h.useState([]),s=d=>{const g=j(m({},d),{id:`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date});return e(y=>[...y,g]),g.id};return{notifications:t,addNotification:s,removeNotification:d=>{e(g=>g.filter(y=>y.id!==d))},clearAllNotifications:()=>{e([])},showSuccess:(d,g,y)=>s(m({type:"success",title:d,message:g},y)),showError:(d,g,y)=>s(m({type:"error",title:d,message:g,persistent:!0},y)),showWarning:(d,g,y)=>s(m({type:"warning",title:d,message:g},y)),showInfo:(d,g,y)=>s(m({type:"info",title:d,message:g},y)),showOffline:(d,g,y)=>s(m({type:"offline",title:d,message:g,persistent:!0},y)),showSync:(d,g,y)=>s(m({type:"sync",title:d,message:g},y))}}var qe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_e=typeof window=="undefined"||"Deno"in globalThis;function H(){}function Zs(t,e){return typeof t=="function"?t(e):t}function er(t){return typeof t=="number"&&t>=0&&t!==1/0}function tr(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ge(t,e){return typeof t=="function"?t(e):t}function sr(t,e){return typeof t=="function"?t(e):t}function mt(t,e){const{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:u,stale:c}=t;if(u){if(r){if(e.queryHash!==Je(u,e.options))return!1}else if(!Ee(e.queryKey,u))return!1}if(s!=="all"){const l=e.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||n&&n!==e.state.fetchStatus||i&&!i(e))}function pt(t,e){const{exact:s,status:r,predicate:n,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(Ce(e.options.mutationKey)!==Ce(i))return!1}else if(!Ee(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function Je(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ce)(t)}function Ce(t){return JSON.stringify(t,(e,s)=>Xe(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function Ee(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>Ee(t[s],e[s])):!1}function Yt(t,e){if(t===e)return t;const s=gt(t)&&gt(e);if(s||Xe(t)&&Xe(e)){const r=s?t:Object.keys(t),n=r.length,i=s?e:Object.keys(e),u=i.length,c=s?[]:{},l=new Set(r);let f=0;for(let p=0;p<u;p++){const d=s?p:i[p];(!s&&l.has(d)||s)&&t[d]===void 0&&e[d]===void 0?(c[d]=void 0,f++):(c[d]=Yt(t[d],e[d]),c[d]===t[d]&&t[d]!==void 0&&f++)}return n===u&&f===n?t:c}return e}function gt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xe(t){if(!yt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!yt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yt(t){return Object.prototype.toString.call(t)==="[object Object]"}function rr(t){return new Promise(e=>{setTimeout(e,t)})}function nr(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Yt(t,e):e}function ar(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function ir(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var Ze=Symbol();function Jt(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ze?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ce,te,fe,Et,or=(Et=class extends qe{constructor(){super();E(this,ce);E(this,te);E(this,fe);x(this,fe,e=>{if(!_e&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){o(this,te)||this.setEventListener(o(this,fe))}onUnsubscribe(){var e;this.hasListeners()||((e=o(this,te))==null||e.call(this),x(this,te,void 0))}setEventListener(e){var s;x(this,fe,e),(s=o(this,te))==null||s.call(this),x(this,te,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){o(this,ce)!==e&&(x(this,ce,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof o(this,ce)=="boolean"?o(this,ce):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ce=new WeakMap,te=new WeakMap,fe=new WeakMap,Et),Zt=new or,me,se,pe,At,cr=(At=class extends qe{constructor(){super();E(this,me,!0);E(this,se);E(this,pe);x(this,pe,e=>{if(!_e&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){o(this,se)||this.setEventListener(o(this,pe))}onUnsubscribe(){var e;this.hasListeners()||((e=o(this,se))==null||e.call(this),x(this,se,void 0))}setEventListener(e){var s;x(this,pe,e),(s=o(this,se))==null||s.call(this),x(this,se,e(this.setOnline.bind(this)))}setOnline(e){o(this,me)!==e&&(x(this,me,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return o(this,me)}},me=new WeakMap,se=new WeakMap,pe=new WeakMap,At),Me=new cr;function lr(){let t,e;const s=new Promise((n,i)=>{t=n,e=i});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},s.reject=n=>{r({status:"rejected",reason:n}),e(n)},s}function ur(t){return Math.min(1e3*it(2,t),3e4)}function es(t){return(t!=null?t:"online")==="online"?Me.isOnline():!0}var ts=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ss(t){let e=!1,s=0,r;const n=lr(),i=()=>n.status!=="pending",u=b=>{var w;i()||(g(new ts(b)),(w=t.abort)==null||w.call(t))},c=()=>{e=!0},l=()=>{e=!1},f=()=>Zt.isFocused()&&(t.networkMode==="always"||Me.isOnline())&&t.canRun(),p=()=>es(t.networkMode)&&t.canRun(),d=b=>{i()||(r==null||r(),n.resolve(b))},g=b=>{i()||(r==null||r(),n.reject(b))},y=()=>new Promise(b=>{var w;r=S=>{(i()||f())&&b(S)},(w=t.onPause)==null||w.call(t)}).then(()=>{var b;r=void 0,i()||(b=t.onContinue)==null||b.call(t)}),N=()=>{if(i())return;let b;const w=s===0?t.initialPromise:void 0;try{b=w!=null?w:t.fn()}catch(S){b=Promise.reject(S)}Promise.resolve(b).then(d).catch(S=>{var C,D,$;if(i())return;const T=(C=t.retry)!=null?C:_e?0:3,q=(D=t.retryDelay)!=null?D:ur,v=typeof q=="function"?q(s,S):q,P=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,S);if(e||!P){g(S);return}s++,($=t.onFail)==null||$.call(t,s,S),rr(v).then(()=>f()?void 0:y()).then(()=>{e?g(S):N()})})};return{promise:n,status:()=>n.status,cancel:u,continue:()=>(r==null||r(),n),cancelRetry:c,continueRetry:l,canStart:p,start:()=>(p()?N():y().then(N),n)}}var dr=t=>setTimeout(t,0);function hr(){let t=[],e=0,s=c=>{c()},r=c=>{c()},n=dr;const i=c=>{e?t.push(c):n(()=>{s(c)})},u=()=>{const c=t;t=[],c.length&&n(()=>{r(()=>{c.forEach(l=>{s(l)})})})};return{batch:c=>{let l;e++;try{l=c()}finally{e--,e||u()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{n=c}}}var M=hr(),le,kt,rs=(kt=class{constructor(){E(this,le)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),er(this.gcTime)&&x(this,le,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t!=null?t:_e?1/0:300*1e3)}clearGcTimeout(){o(this,le)&&(clearTimeout(o(this,le)),x(this,le,void 0))}},le=new WeakMap,kt),ge,ye,Q,ue,R,Ae,de,K,X,Pt,fr=(Pt=class extends rs{constructor(e){var s;super();E(this,K);E(this,ge);E(this,ye);E(this,Q);E(this,ue);E(this,R);E(this,Ae);E(this,de);x(this,de,!1),x(this,Ae,e.defaultOptions),this.setOptions(e.options),this.observers=[],x(this,ue,e.client),x(this,Q,o(this,ue).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,x(this,ge,pr(this.options)),this.state=(s=e.state)!=null?s:o(this,ge),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=o(this,R))==null?void 0:e.promise}setOptions(e){this.options=m(m({},o(this,Ae)),e),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&o(this,Q).remove(this)}setData(e,s){const r=nr(this.state.data,e,this.options);return F(this,K,X).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){F(this,K,X).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,n;const s=(r=o(this,R))==null?void 0:r.promise;return(n=o(this,R))==null||n.cancel(e),s?s.then(H).catch(H):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(o(this,ge))}isActive(){return this.observers.some(e=>sr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ze||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ge(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tr(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=o(this,R))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=o(this,R))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),o(this,Q).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(o(this,R)&&(o(this,de)?o(this,R).cancel({revert:!0}):o(this,R).cancelRetry()),this.scheduleGc()),o(this,Q).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||F(this,K,X).call(this,{type:"invalidate"})}fetch(e,s){return G(this,null,function*(){var l,f,p,d,g,y,N,b,w,S,T,q;if(this.state.fetchStatus!=="idle"&&((l=o(this,R))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(o(this,R))return o(this,R).continueRetry(),o(this,R).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(P=>P.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,n=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(x(this,de,!0),r.signal)})},i=()=>{const v=Jt(this.options,s),C=(()=>{const D={client:o(this,ue),queryKey:this.queryKey,meta:this.meta};return n(D),D})();return x(this,de,!1),this.options.persister?this.options.persister(v,C,this):v(C)},c=(()=>{const v={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:o(this,ue),state:this.state,fetchFn:i};return n(v),v})();(f=this.options.behavior)==null||f.onFetch(c,this),x(this,ye,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=c.fetchOptions)==null?void 0:p.meta))&&F(this,K,X).call(this,{type:"fetch",meta:(d=c.fetchOptions)==null?void 0:d.meta}),x(this,R,ss({initialPromise:s==null?void 0:s.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onFail:(v,P)=>{F(this,K,X).call(this,{type:"failed",failureCount:v,error:P})},onPause:()=>{F(this,K,X).call(this,{type:"pause"})},onContinue:()=>{F(this,K,X).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const v=yield o(this,R).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(y=(g=o(this,Q).config).onSuccess)==null||y.call(g,v,this),(b=(N=o(this,Q).config).onSettled)==null||b.call(N,v,this.state.error,this),v}catch(v){if(v instanceof ts){if(v.silent)return o(this,R).promise;if(v.revert){if(this.setState(j(m({},o(this,ye)),{fetchStatus:"idle"})),this.state.data===void 0)throw v;return this.state.data}}throw F(this,K,X).call(this,{type:"error",error:v}),(S=(w=o(this,Q).config).onError)==null||S.call(w,v,this),(q=(T=o(this,Q).config).onSettled)==null||q.call(T,this.state.data,v,this),v}finally{this.scheduleGc()}})}},ge=new WeakMap,ye=new WeakMap,Q=new WeakMap,ue=new WeakMap,R=new WeakMap,Ae=new WeakMap,de=new WeakMap,K=new WeakSet,X=function(e){const s=r=>{var n,i;switch(e.type){case"failed":return j(m({},r),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return j(m({},r),{fetchStatus:"paused"});case"continue":return j(m({},r),{fetchStatus:"fetching"});case"fetch":return j(m(m({},r),mr(r.data,this.options)),{fetchMeta:(n=e.meta)!=null?n:null});case"success":const u=m(j(m({},r),{data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success"}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return x(this,ye,e.manual?u:void 0),u;case"error":const c=e.error;return j(m({},r),{error:c,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"});case"invalidate":return j(m({},r),{isInvalidated:!0});case"setState":return m(m({},r),e.state)}};this.state=s(this.state),M.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),o(this,Q).notify({query:this,type:"updated",action:e})})},Pt);function mr(t,e){return m({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:es(e.networkMode)?"fetching":"paused"},t===void 0&&{error:null,status:"pending"})}function pr(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r!=null?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var z,It,gr=(It=class extends qe{constructor(e={}){super();E(this,z);this.config=e,x(this,z,new Map)}build(e,s,r){var c;const n=s.queryKey,i=(c=s.queryHash)!=null?c:Je(n,s);let u=this.get(i);return u||(u=new fr({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(u)),u}add(e){o(this,z).has(e.queryHash)||(o(this,z).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=o(this,z).get(e.queryHash);s&&(e.destroy(),s===e&&o(this,z).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){M.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return o(this,z).get(e)}getAll(){return[...o(this,z).values()]}find(e){const s=m({exact:!0},e);return this.getAll().find(r=>mt(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>mt(e,r)):s}notify(e){M.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){M.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){M.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},z=new WeakMap,It),B,L,he,W,ee,Ot,yr=(Ot=class extends rs{constructor(e){super();E(this,W);E(this,B);E(this,L);E(this,he);this.mutationId=e.mutationId,x(this,L,e.mutationCache),x(this,B,[]),this.state=e.state||br(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){o(this,B).includes(e)||(o(this,B).push(e),this.clearGcTimeout(),o(this,L).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){x(this,B,o(this,B).filter(s=>s!==e)),this.scheduleGc(),o(this,L).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){o(this,B).length||(this.state.status==="pending"?this.scheduleGc():o(this,L).remove(this))}continue(){var e,s;return(s=(e=o(this,he))==null?void 0:e.continue())!=null?s:this.execute(this.state.variables)}execute(e){return G(this,null,function*(){var i,u,c,l,f,p,d,g,y,N,b,w,S,T,q,v,P,C,D,$,V;const s=()=>{F(this,W,ee).call(this,{type:"continue"})};x(this,he,ss({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,_)=>{F(this,W,ee).call(this,{type:"failed",failureCount:A,error:_})},onPause:()=>{F(this,W,ee).call(this,{type:"pause"})},onContinue:s,retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>o(this,L).canRun(this)}));const r=this.state.status==="pending",n=!o(this,he).canStart();try{if(r)s();else{F(this,W,ee).call(this,{type:"pending",variables:e,isPaused:n}),yield(c=(u=o(this,L).config).onMutate)==null?void 0:c.call(u,e,this);const _=yield(f=(l=this.options).onMutate)==null?void 0:f.call(l,e);_!==this.state.context&&F(this,W,ee).call(this,{type:"pending",context:_,variables:e,isPaused:n})}const A=yield o(this,he).start();return yield(d=(p=o(this,L).config).onSuccess)==null?void 0:d.call(p,A,e,this.state.context,this),yield(y=(g=this.options).onSuccess)==null?void 0:y.call(g,A,e,this.state.context),yield(b=(N=o(this,L).config).onSettled)==null?void 0:b.call(N,A,null,this.state.variables,this.state.context,this),yield(S=(w=this.options).onSettled)==null?void 0:S.call(w,A,null,e,this.state.context),F(this,W,ee).call(this,{type:"success",data:A}),A}catch(A){try{throw yield(q=(T=o(this,L).config).onError)==null?void 0:q.call(T,A,e,this.state.context,this),yield(P=(v=this.options).onError)==null?void 0:P.call(v,A,e,this.state.context),yield(D=(C=o(this,L).config).onSettled)==null?void 0:D.call(C,void 0,A,this.state.variables,this.state.context,this),yield(V=($=this.options).onSettled)==null?void 0:V.call($,void 0,A,e,this.state.context),A}finally{F(this,W,ee).call(this,{type:"error",error:A})}}finally{o(this,L).runNext(this)}})}},B=new WeakMap,L=new WeakMap,he=new WeakMap,W=new WeakSet,ee=function(e){const s=r=>{switch(e.type){case"failed":return j(m({},r),{failureCount:e.failureCount,failureReason:e.error});case"pause":return j(m({},r),{isPaused:!0});case"continue":return j(m({},r),{isPaused:!1});case"pending":return j(m({},r),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return j(m({},r),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return j(m({},r),{data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}};this.state=s(this.state),M.batch(()=>{o(this,B).forEach(r=>{r.onMutationUpdate(e)}),o(this,L).notify({mutation:this,type:"updated",action:e})})},Ot);function br(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Y,U,ke,Rt,vr=(Rt=class extends qe{constructor(e={}){super();E(this,Y);E(this,U);E(this,ke);this.config=e,x(this,Y,new Set),x(this,U,new Map),x(this,ke,0)}build(e,s,r){const n=new yr({mutationCache:this,mutationId:++Oe(this,ke)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){o(this,Y).add(e);const s=Te(e);if(typeof s=="string"){const r=o(this,U).get(s);r?r.push(e):o(this,U).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(o(this,Y).delete(e)){const s=Te(e);if(typeof s=="string"){const r=o(this,U).get(s);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&o(this,U).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Te(e);if(typeof s=="string"){const r=o(this,U).get(s),n=r==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var r,n;const s=Te(e);if(typeof s=="string"){const i=(r=o(this,U).get(s))==null?void 0:r.find(u=>u!==e&&u.state.isPaused);return(n=i==null?void 0:i.continue())!=null?n:Promise.resolve()}else return Promise.resolve()}clear(){M.batch(()=>{o(this,Y).forEach(e=>{this.notify({type:"removed",mutation:e})}),o(this,Y).clear(),o(this,U).clear()})}getAll(){return Array.from(o(this,Y))}find(e){const s=m({exact:!0},e);return this.getAll().find(r=>pt(s,r))}findAll(e={}){return this.getAll().filter(s=>pt(e,s))}notify(e){M.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return M.batch(()=>Promise.all(e.map(s=>s.continue().catch(H))))}},Y=new WeakMap,U=new WeakMap,ke=new WeakMap,Rt);function Te(t){var e;return(e=t.options.scope)==null?void 0:e.id}function bt(t){return{onFetch:(e,s)=>{var p,d,g,y,N;const r=e.options,n=(g=(d=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:d.fetchMore)==null?void 0:g.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],u=((N=e.state.data)==null?void 0:N.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const f=()=>G(null,null,function*(){var q;let b=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},S=Jt(e.options,e.fetchOptions),T=(v,P,C)=>G(null,null,function*(){if(b)return Promise.reject();if(P==null&&v.pages.length)return Promise.resolve(v);const $=(()=>{const Pe={client:e.client,queryKey:e.queryKey,pageParam:P,direction:C?"backward":"forward",meta:e.options.meta};return w(Pe),Pe})(),V=yield S($),{maxPages:A}=e.options,_=C?ir:ar;return{pages:_(v.pages,V,A),pageParams:_(v.pageParams,P,A)}});if(n&&i.length){const v=n==="backward",P=v?xr:vt,C={pages:i,pageParams:u},D=P(r,C);c=yield T(C,D,v)}else{const v=t!=null?t:i.length;do{const P=l===0?(q=u[0])!=null?q:r.initialPageParam:vt(r,c);if(l>0&&P==null)break;c=yield T(c,P),l++}while(l<v)}return c});e.options.persister?e.fetchFn=()=>{var b,w;return(w=(b=e.options).persister)==null?void 0:w.call(b,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=f}}}function vt(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function xr(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var k,re,ne,be,ve,ae,xe,we,Tt,wr=(Tt=class{constructor(t={}){E(this,k);E(this,re);E(this,ne);E(this,be);E(this,ve);E(this,ae);E(this,xe);E(this,we);x(this,k,t.queryCache||new gr),x(this,re,t.mutationCache||new vr),x(this,ne,t.defaultOptions||{}),x(this,be,new Map),x(this,ve,new Map),x(this,ae,0)}mount(){Oe(this,ae)._++,o(this,ae)===1&&(x(this,xe,Zt.subscribe(t=>G(this,null,function*(){t&&(yield this.resumePausedMutations(),o(this,k).onFocus())}))),x(this,we,Me.subscribe(t=>G(this,null,function*(){t&&(yield this.resumePausedMutations(),o(this,k).onOnline())}))))}unmount(){var t,e;Oe(this,ae)._--,o(this,ae)===0&&((t=o(this,xe))==null||t.call(this),x(this,xe,void 0),(e=o(this,we))==null||e.call(this),x(this,we,void 0))}isFetching(t){return o(this,k).findAll(j(m({},t),{fetchStatus:"fetching"})).length}isMutating(t){return o(this,re).findAll(j(m({},t),{status:"pending"})).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=o(this,k).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=o(this,k).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Ge(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return o(this,k).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),n=o(this,k).get(r.queryHash),i=n==null?void 0:n.state.data,u=Zs(e,i);if(u!==void 0)return o(this,k).build(this,r).setData(u,j(m({},s),{manual:!0}))}setQueriesData(t,e,s){return M.batch(()=>o(this,k).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=o(this,k).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=o(this,k);M.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=o(this,k);return M.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(m({type:"active"},t),e)))}cancelQueries(t,e={}){const s=m({revert:!0},e),r=M.batch(()=>o(this,k).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(H).catch(H)}invalidateQueries(t,e={}){return M.batch(()=>{var s,r;return o(this,k).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries(j(m({},t),{type:(r=(s=t==null?void 0:t.refetchType)!=null?s:t==null?void 0:t.type)!=null?r:"active"}),e)})}refetchQueries(t,e={}){var n;const s=j(m({},e),{cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}),r=M.batch(()=>o(this,k).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let u=i.fetch(void 0,s);return s.throwOnError||(u=u.catch(H)),i.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(H)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=o(this,k).build(this,e);return s.isStaleByTime(Ge(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(H).catch(H)}fetchInfiniteQuery(t){return t.behavior=bt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(H).catch(H)}ensureInfiniteQueryData(t){return t.behavior=bt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Me.isOnline()?o(this,re).resumePausedMutations():Promise.resolve()}getQueryCache(){return o(this,k)}getMutationCache(){return o(this,re)}getDefaultOptions(){return o(this,ne)}setDefaultOptions(t){x(this,ne,t)}setQueryDefaults(t,e){o(this,be).set(Ce(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...o(this,be).values()],s={};return e.forEach(r=>{Ee(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){o(this,ve).set(Ce(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...o(this,ve).values()],s={};return e.forEach(r=>{Ee(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e=j(m(m(m({},o(this,ne).queries),this.getQueryDefaults(t.queryKey)),t),{_defaulted:!0});return e.queryHash||(e.queryHash=Je(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ze&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:j(m(m(m({},o(this,ne).mutations),(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey)),t),{_defaulted:!0})}clear(){o(this,k).clear(),o(this,re).clear()}},k=new WeakMap,re=new WeakMap,ne=new WeakMap,be=new WeakMap,ve=new WeakMap,ae=new WeakMap,xe=new WeakMap,we=new WeakMap,Tt),Sr=h.createContext(void 0),jr=({client:t,children:e})=>(h.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(Sr.Provider,{value:t,children:e}));function Nr(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,u=[],c="",l=t.split("/");for(l[0]||l.shift();n=l.shift();)s=n[0],s==="*"?(u.push(s),c+=n[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),u.push(n.substring(1,~r?r:~i?i:n.length)),c+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(c+=(~r?"?":"")+"\\"+n.substring(i))):c+="/"+n;return{keys:u,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var Ke={exports:{}},Ue={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt;function Cr(){if(xt)return Ue;xt=1;var t=xs();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var s=typeof Object.is=="function"?Object.is:e,r=t.useState,n=t.useEffect,i=t.useLayoutEffect,u=t.useDebugValue;function c(d,g){var y=g(),N=r({inst:{value:y,getSnapshot:g}}),b=N[0].inst,w=N[1];return i(function(){b.value=y,b.getSnapshot=g,l(b)&&w({inst:b})},[d,y,g]),n(function(){return l(b)&&w({inst:b}),d(function(){l(b)&&w({inst:b})})},[d]),u(y),y}function l(d){var g=d.getSnapshot;d=d.value;try{var y=g();return!s(d,y)}catch(N){return!0}}function f(d,g){return g()}var p=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?f:c;return Ue.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Ue}var wt;function Er(){return wt||(wt=1,Ke.exports=Cr()),Ke.exports}var Ar=Er();const kr=ys.useInsertionEffect,Pr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Ir=Pr?h.useLayoutEffect:h.useEffect,Or=kr||Ir,ns=t=>{const e=h.useRef([t,(...s)=>e[0](...s)]).current;return Or(()=>{e[0]=t}),e[1]},Rr="popstate",et="pushState",tt="replaceState",Tr="hashchange",St=[Rr,et,tt,Tr],Fr=t=>{for(const e of St)addEventListener(e,t);return()=>{for(const e of St)removeEventListener(e,t)}},as=(t,e)=>Ar.useSyncExternalStore(Fr,t,e),Dr=()=>location.search,Lr=({ssrSearch:t=""}={})=>as(Dr,()=>t),jt=()=>location.pathname,Mr=({ssrPath:t}={})=>as(jt,t?()=>t:jt),qr=(t,{replace:e=!1,state:s=null}={})=>history[e?tt:et](s,"",t),_r=(t={})=>[Mr(t),qr],Nt=Symbol.for("wouter_v3");if(typeof history!="undefined"&&typeof window[Nt]=="undefined"){for(const t of[et,tt]){const e=history[t];history[t]=function(){const s=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),s}}Object.defineProperty(window,Nt,{value:!0})}const Qr=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",is=(t="")=>t==="/"?"":t,$r=(t,e)=>t[0]==="~"?t.slice(1):is(e)+t,Vr=(t="",e)=>Qr(Ct(is(t)),Ct(e)),Ct=t=>{try{return decodeURI(t)}catch(e){return t}},os={hook:_r,searchHook:Lr,parser:Nr,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},cs=h.createContext(os),st=()=>h.useContext(cs),Hr={};h.createContext(Hr);const ls=t=>{const[e,s]=t.hook(t);return[Vr(t.base,e),ns((r,n)=>s($r(r,t.base),n))]},Kr=()=>ls(st()),Ur=s=>{var r=s,{children:t}=r,e=I(r,["children"]);var g,y,N,b;const n=st(),i=e.hook?os:n;let u=i;const[c,l]=(y=(g=e.ssrPath)==null?void 0:g.split("?"))!=null?y:[];l&&(e.ssrSearch=l,e.ssrPath=c),e.hrefs=(b=e.hrefs)!=null?b:(N=e.hook)==null?void 0:N.hrefs;let f=h.useRef({}),p=f.current,d=p;for(let w in i){const S=w==="base"?i[w]+(e[w]||""):e[w]||i[w];p===d&&S!==d[w]&&(f.current=d=m({},d)),d[w]=S,(S!==i[w]||S!==u[w])&&(u=d)}return h.createElement(cs.Provider,{value:u,children:t})};h.forwardRef((t,e)=>{const s=st(),[r,n]=ls(s),w=t,{to:i="",href:u=i,onClick:c,asChild:l,children:f,className:p,replace:d,state:g}=w,y=I(w,["to","href","onClick","asChild","children","className","replace","state"]),N=ns(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(c==null||c(S),S.defaultPrevented||(S.preventDefault(),n(u,t)))}),b=s.hrefs(u[0]==="~"?u.slice(1):s.base+u,s);return l&&h.isValidElement(f)?h.cloneElement(f,{onClick:N,href:b}):h.createElement("a",j(m({},y),{onClick:N,href:b,className:p!=null&&p.call?p(r===u):p,children:f,ref:e}))});function zr(){if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("XMLHttpRequest not supported")}}function Br(t,e={}){return new Promise(function(s,r){var n=zr(),i=e.method||"GET";if(n.open(i,t,!0),n.withCredentials=e.credentials==="include",e.headers)for(var u in e.headers)e.headers.hasOwnProperty(u)&&n.setRequestHeader(u,e.headers[u]);n.onreadystatechange=function(){if(n.readyState===4){var c={ok:n.status>=200&&n.status<300,status:n.status,statusText:n.statusText,text:function(){return Promise.resolve(n.responseText)},json:function(){try{return Promise.resolve(JSON.parse(n.responseText))}catch(l){return Promise.reject(l)}}};c.ok?s(c):r(new Error(n.status+": "+n.statusText))}},n.onerror=function(){r(new Error("Network error"))},n.send(e.body||null)})}var Wr=typeof fetch!="undefined"?fetch:Br;function Gr(t){return new Promise(function(e,s){t.ok?e(t):t.text().then(function(r){s(new Error(t.status+": "+(r||t.statusText)))})})}const Xr=({on401:t})=>function({queryKey:e}){return new Promise(function(s,r){Wr(e.join("/"),{credentials:"include"}).then(function(n){return Gr(n).then(function(){return n.json()})}).then(s).catch(r)})},Yr=new wr({defaultOptions:{queries:{queryFn:Xr({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Jr=({className:t})=>{const[e]=Kr(),s=[{id:"home",label:"Home",icon:Ns,href:"/",active:e==="/"},{id:"inspection",label:"Inspect",icon:Cs,href:"/custodial-inspection",active:e==="/custodial-inspection"},{id:"building",label:"Building",icon:Es,href:"/whole-building-inspection",active:e==="/whole-building-inspection"},{id:"data",label:"Data",icon:As,href:"/inspection-data",active:e==="/inspection-data"},{id:"admin",label:"Admin",icon:ks,href:"/admin-inspections",active:e==="/admin-inspections"}];return a.jsxs("div",{className:O("fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 md:hidden",t),children:[a.jsx("div",{className:"grid grid-cols-5 py-2",children:s.map(r=>{const n=r.icon;return a.jsxs("a",{href:r.href,className:O("flex flex-col items-center justify-center py-2 px-1 text-xs transition-colors duration-200 touch-manipulation",r.active?"text-blue-600":"text-gray-600 hover:text-gray-900 active:scale-95"),children:[a.jsxs("div",{className:"relative",children:[a.jsx(n,{className:O("h-6 w-6 transition-transform duration-200",r.active&&"scale-110")}),r.active&&a.jsx("div",{className:"absolute -top-1 -right-1 h-2 w-2 bg-blue-600 rounded-full animate-pulse"})]}),a.jsx("span",{className:O("mt-1 font-medium text-[10px] leading-tight",r.active&&"font-semibold"),children:r.label})]},r.id)})}),a.jsx("div",{className:"h-safe-area-inset-bottom bg-white"})]})},ze=({href:t,children:e,className:s})=>a.jsx("a",{href:t,className:O("sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50 transition-all duration-200 hover:bg-blue-700",s),children:e}),Zr=()=>({announce:(e,s="polite")=>{const r=document.createElement("div");r.setAttribute("aria-live",s),r.setAttribute("aria-atomic","true"),r.className="sr-only",r.textContent=e,document.body.appendChild(r),setTimeout(()=>{document.body.removeChild(r)},1e3)}}),en=()=>{h.useEffect(()=>{const t=e=>{if(e.key==="Escape"){const s=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');s.length>0&&s[0].focus()}if(e.key==="Tab"&&e.shiftKey){const s=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(s.length>0){const r=s[s.length-1];document.activeElement===r&&(e.preventDefault(),s.length>1&&s[0].focus())}}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[])},tn=()=>{const t=h.useCallback(()=>{const s=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=[];let n=0;return s.forEach((i,u)=>{var l;const c=parseInt(i.tagName.charAt(1));u>0&&c>n+1&&r.push(`Skipped heading level: h${n} to h${c} at "${i.textContent}"`),(l=i.textContent)!=null&&l.trim()||r.push(`Empty ${i.tagName} found`),n=c}),r},[]),e=h.useCallback(()=>{const s=document.querySelectorAll("h1, h2, h3, h4, h5, h6");return Array.from(s).map(r=>{var n;return{level:parseInt(r.tagName.charAt(1)),text:((n=r.textContent)==null?void 0:n.trim())||"",id:r.id||""}})},[]);return{validateHeadingStructure:t,getHeadingOutline:e}},sn=()=>({validateImages:h.useCallback(()=>{const e=document.querySelectorAll("img"),s=[];return e.forEach((r,n)=>{const i=r.getAttribute("alt");i===null&&s.push(`Image ${n+1}: Missing alt attribute`),i===""&&!r.getAttribute("role")&&s.push(`Image ${n+1}: Decorative image should have role="presentation" or alt=""`),i&&i.length>125&&s.push(`Image ${n+1}: Alt text too long (${i.length} chars), consider using longdesc`)}),s},[])}),rn=()=>({validateLinks:h.useCallback(()=>{const e=document.querySelectorAll("a[href]"),s=[],r=new Set;return e.forEach((n,i)=>{var l,f;const u=((l=n.textContent)==null?void 0:l.trim())||"";n.getAttribute("href"),!u&&!n.querySelector("img")&&s.push(`Link ${i+1}: Empty link text`),["click here","read more","learn more","here","more"].includes(u.toLowerCase())&&s.push(`Link ${i+1}: Generic link text "${u}" - be more descriptive`),r.has(u)?s.push(`Link ${i+1}: Duplicate link text "${u}" - ensure context or make unique`):r.add(u),n.getAttribute("target")==="_blank"&&!((f=n.getAttribute("aria-label"))!=null&&f.includes("opens"))&&s.push(`Link ${i+1}: Opens new window without accessibility warning`)}),s},[])}),nn=()=>({validateForms:h.useCallback(()=>{const e=document.querySelectorAll("form"),s=[];return e.forEach((r,n)=>{r.querySelectorAll("input, select, textarea").forEach((u,c)=>{var y;const l=u.tagName.toLowerCase(),f=u.id,p=f?document.querySelector(`label[for="${f}"]`):!1,d=u.getAttribute("aria-label"),g=u.getAttribute("aria-labelledby");if(!p&&!d&&!g&&s.push(`Form ${n+1}, ${l} ${c+1}: Missing label or aria-label`),u.hasAttribute("required")){const N=u.getAttribute("aria-required")==="true",b=p&&((y=p==null?void 0:p.textContent)==null?void 0:y.includes("*"));!N&&!b&&s.push(`Form ${n+1}, ${l} ${c+1}: Required field not clearly indicated`)}if(u.classList.contains("error")||u.getAttribute("aria-invalid")==="true"){const N=u.getAttribute("aria-describedby");N&&document.getElementById(N)||s.push(`Form ${n+1}, ${l} ${c+1}: Invalid field has no error message`)}})}),s},[])}),an=()=>{const[t,e]=h.useState(!1);return h.useEffect(()=>{const s=navigator.userAgent.toLowerCase(),r=s.includes("nvda")||s.includes(" jaws")||s.includes("dragon")||window.speechSynthesis!==void 0,n=window.matchMedia("(prefers-reduced-motion: reduce)").matches,i=window.matchMedia("(prefers-contrast: high)").matches;e(r||n||i)},[]),t},on=()=>({runQuickAudit:h.useCallback(()=>{const e=[],{validateHeadingStructure:s}=tn();e.push(...s());const{validateImages:r}=sn();e.push(...r());const{validateLinks:n}=rn();e.push(...n());const{validateForms:i}=nn();return e.push(...i()),document.documentElement.getAttribute("lang")||e.push("Missing lang attribute on html element"),(!document.title||document.title.length===0)&&e.push("Missing or empty page title"),{violations:e,score:Math.max(0,100-e.length*5),total:e.length}},[])}),cn=()=>{const[t,e]=h.useState("medium"),s=h.useCallback(()=>{e(i=>i==="small"?"medium":"large")},[]),r=h.useCallback(()=>{e(i=>i==="large"?"medium":"small")},[]),n=h.useCallback(()=>{e("medium")},[]);return{textSize:t,increaseTextSize:s,decreaseTextSize:r,resetTextSize:n}},ln=()=>{h.useEffect(()=>{const t=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"+":case"=":e.preventDefault(),document.body.style.fontSize="larger";break;case"-":e.preventDefault(),document.body.style.fontSize="smaller";break;case"0":e.preventDefault(),document.body.style.fontSize="";break}if(e.altKey)switch(e.key){case"m":e.preventDefault();const s=document.querySelector('main, [role="main"]');s&&(s.focus(),s.scrollIntoView());break;case"n":e.preventDefault();const r=document.querySelector('nav, [role="navigation"]');r&&(r.focus(),r.scrollIntoView());break;case"h":e.preventDefault();const n=document.querySelector("h1");n&&(n.focus(),n.scrollIntoView());break}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[])},un=h.lazy(()=>ie(()=>import("./custodial-inspection-CA0rmuaV-v6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),dn=h.lazy(()=>ie(()=>import("./inspection-data-DnEJZeRZ-v6.js"),__vite__mapDeps([12,1,2,13,14,6,10,11,8,7,5,15,16,17]))),hn=h.lazy(()=>ie(()=>import("./custodial-notes-CMfTMAdR-v6.js"),__vite__mapDeps([18,1,2,3,4,7,19,6,16,10,11]))),fn=h.lazy(()=>ie(()=>import("./whole-building-inspection-D1xATlrT-v6.js"),__vite__mapDeps([20,1,2,5,6,7,4,3,13,17,15,9,16,10,11]))),mn=h.lazy(()=>ie(()=>import("./rating-criteria-DCg5BUcG-v6.js").then(t=>t.a),__vite__mapDeps([9,1,2,6]))),pn=h.lazy(()=>ie(()=>import("./admin-inspections-CBXNI3NC-v6.js"),__vite__mapDeps([21,1,2,7,4,3,5,6,8,19,14,9,10,11]))),gn=h.lazy(()=>ie(()=>import("./monthly-feedback-BgDMhQ1p-v6.js"),__vite__mapDeps([22,1,2,14,7,5,6,4,3,8,13,10,11]))),yn=h.lazy(()=>ie(()=>import("./scores-dashboard-DuAQqHLo-v6.js").then(t=>t.s),__vite__mapDeps([17,1,2,7,6]))),Z=()=>a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md mx-auto",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Loading..."}),a.jsx("p",{className:"text-muted-foreground",children:"Please wait while we load the page."})]})});class bn extends bs.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please refresh the page to try again."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"modern-button bg-primary hover:bg-primary/90 border-primary text-primary-foreground",children:"Refresh Page"})]})}):this.props.children}}function vn(){const[t,e]=h.useState("Custodial"),[s,r]=h.useState(!1),[n,i]=h.useState(!1),[u,c]=h.useState(!1);Os();const{announce:l}=Zr();en(),ln();const{runQuickAudit:f}=on(),{textSize:p,increaseTextSize:d,decreaseTextSize:g}=cn(),y=an();h.useEffect(()=>{},[f]);const{notifications:N,removeNotification:b}=Rs(),{notifications:w,removeNotification:S,showSuccess:T,showInfo:q}=Js();h.useEffect(()=>{t!=="Custodial"&&l(`Navigated to ${{"Custodial Inspection":"Single Area Inspection Form","Custodial Notes":"Custodial Concern Reporting Form","Inspection Data":"Inspection Data and Reports","Whole Building Inspection":"Whole Building Inspection Form","Rating Criteria":"Rating Criteria Reference Guide","admin-inspections":"Admin Inspections Panel","Monthly Feedback":"Monthly Feedback Reports","Scores Dashboard":"Building Scores Dashboard"}[t]||t}`)},[t,l]),h.useEffect(()=>{const C=()=>{document.querySelectorAll("form").forEach(V=>{V.noValidate=!0,V.querySelectorAll("input[pattern]").forEach(A=>{const _=A;_.setAttribute("data-pattern",_.getAttribute("pattern")||""),_.removeAttribute("pattern")}),V.addEventListener("invalid",A=>{A.preventDefault()},!0)})};C();const D=new MutationObserver(C);return D.observe(document.documentElement,{childList:!0,subtree:!0}),()=>D.disconnect()},[]),h.useEffect(()=>{const C=()=>{const A=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");i(A),A&&!J.getItem("pwa-install-shown")&&(c(!0),J.setItem("pwa-install-shown","true"),setTimeout(()=>c(!1),5e3),T("App Installed Successfully!","You can now access Custodial Command directly from your home screen.",{duration:5e3}))};C(),(()=>{const _=J.getItem("app-version");if(_&&_!=="v6"){console.log("App version updated, clearing cache..."),"caches"in window&&caches.keys().then(Se=>{Se.forEach(ds=>{caches.delete(ds)})});const Pe=["app-version","pwa-install-shown"];J.keys().filter(Se=>!Pe.includes(Se)).forEach(Se=>J.removeItem(Se)),J.setItem("app-version","v6"),q("App Updated","ðŸ”„ App updated! Reloading with latest version..."),setTimeout(()=>window.location.reload(),2e3);return}J.setItem("app-version","v6")})();const $=()=>{i(!0),c(!0),J.setItem("pwa-install-shown","true"),setTimeout(()=>c(!1),5e3),T("App Installed Successfully!","You can now access Custodial Command directly from your home screen.",{duration:5e3})};window.addEventListener("appinstalled",$);const V=window.matchMedia("(display-mode: standalone)");return V.addEventListener("change",C),()=>{window.removeEventListener("appinstalled",$),V.removeEventListener("change",C)}},[]);const v=[{name:"Home",path:"Custodial"}],P=()=>{try{switch(t){case"Custodial":return a.jsxs("div",{className:"p-8 text-center",children:[a.jsxs("div",{className:"mb-8 max-w-2xl mx-auto",children:[u&&a.jsxs("div",{className:"mb-4 p-4 bg-accent/20 border-2 border-accent/50 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-2xl",children:"âœ…"}),a.jsx("span",{className:"text-lg font-bold text-accent-foreground",children:"App Successfully Installed!"})]}),a.jsx("p",{className:"text-center text-accent-foreground mt-2",children:"You can now access Custodial Command directly from your home screen."})]}),n?a.jsxs("div",{className:"mb-4 p-4 bg-accent/20 border-2 border-accent/50 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-xl",children:"ðŸ“±"}),a.jsx("span",{className:"text-lg font-bold text-accent-foreground",children:"Running as Installed App"}),a.jsx("span",{className:"text-xl",children:"âœ…"})]}),a.jsx("p",{className:"text-center text-accent-foreground mt-1 text-sm",children:"App is installed and working offline-ready"})]}):a.jsxs("button",{onClick:()=>r(!s),className:"w-full p-4 bg-amber-100 border-2 border-amber-300 rounded-lg shadow-md hover:bg-amber-150 transition-colors flex items-center justify-between",children:[a.jsx("span",{className:"text-lg font-bold text-amber-900",children:"ðŸ“± Install on Your Mobile Device"}),a.jsx("span",{className:"text-amber-900 text-xl",children:s?"âˆ’":"+"})]}),!n&&s&&a.jsx("div",{className:"mt-4 p-6 bg-amber-50 border-2 border-amber-300 rounded-lg shadow-md",children:a.jsxs("div",{className:"text-amber-800 space-y-3",children:[a.jsxs("div",{className:"bg-white p-3 rounded border border-amber-200",children:[a.jsx("p",{className:"font-semibold text-amber-900 mb-1",children:"iPhone/iPad:"}),a.jsx("p",{className:"text-sm",children:"1. Tap the Share button (â–¡â†—) in Safari"}),a.jsx("p",{className:"text-sm",children:'2. Scroll down and tap "Add to Home Screen"'}),a.jsx("p",{className:"text-sm",children:'3. Tap "Add" to install the app'})]}),a.jsxs("div",{className:"bg-white p-3 rounded border border-amber-200",children:[a.jsx("p",{className:"font-semibold text-amber-900 mb-1",children:"Android:"}),a.jsx("p",{className:"text-sm",children:"1. Tap the menu (â‹®) in Chrome or your browser"}),a.jsx("p",{className:"text-sm",children:'2. Select "Add to Home screen" or "Install app"'}),a.jsx("p",{className:"text-sm",children:'3. Tap "Add" or "Install" to confirm'})]}),a.jsx("p",{className:"text-center text-sm font-medium text-amber-700 mt-3",children:"Once installed, access the app directly from your home screen like any other app!"}),a.jsx("div",{className:"mt-4 p-3 bg-accent/10 border border-accent/30 rounded",children:a.jsx("p",{className:"text-center text-sm font-medium text-accent-foreground",children:"âœ“ Works offline after installation - previously viewed pages remain accessible"})})]})})]}),a.jsxs("div",{className:"space-y-6 mb-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide px-2",children:"Submit Inspections"}),a.jsxs("div",{className:"responsive-grid",children:[a.jsx("button",{onClick:()=>e("Custodial Notes"),className:"modern-button bg-blue-600 hover:bg-blue-700 border-blue-600 text-white shadow-md hover:shadow-lg transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"ðŸ“ Report A Custodial Concern"})}),a.jsx("button",{onClick:()=>e("Custodial Inspection"),className:"modern-button bg-blue-600 hover:bg-blue-700 border-blue-600 text-white shadow-md hover:shadow-lg transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"ðŸ” Single Area Inspection"})}),a.jsx("button",{onClick:()=>e("Whole Building Inspection"),className:"modern-button bg-blue-600 hover:bg-blue-700 border-blue-600 text-white shadow-md hover:shadow-lg transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"ðŸ¢ Building Inspection"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide px-2",children:"View & Reports"}),a.jsxs("div",{className:"responsive-grid",children:[a.jsx("button",{onClick:()=>e("Scores Dashboard"),className:"modern-button bg-emerald-600 hover:bg-emerald-700 border-emerald-600 text-white shadow-md hover:shadow-lg transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"ðŸ“ˆ Building Scores Dashboard"})}),a.jsx("button",{onClick:()=>e("Inspection Data"),className:"modern-button bg-green-600 hover:bg-green-700 border-green-600 text-white shadow-md hover:shadow-lg transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"ðŸ“Š View Data & Reports"})}),a.jsx("button",{onClick:()=>e("Monthly Feedback"),className:"modern-button bg-purple-600 hover:bg-purple-700 border-purple-600 text-white shadow-md hover:shadow-lg transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"ðŸ“„ Monthly Feedback Reports"})}),a.jsx("button",{onClick:()=>e("Rating Criteria"),className:"modern-button bg-gray-600 hover:bg-gray-700 border-gray-600 text-white shadow-sm hover:shadow-md transition-shadow",children:a.jsx("span",{className:"flex items-center justify-center gap-2",children:"â„¹ï¸ Rating Criteria Guide"})})]})]})]}),a.jsx("p",{className:"text-lg text-muted-foreground text-center",children:"Cleanliness is a duty for all."})]});case"Custodial Inspection":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(un,{onBack:()=>e("Custodial")})});case"Inspection Data":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(dn,{onBack:()=>e("Custodial")})});case"Custodial Notes":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(hn,{onBack:()=>e("Custodial")})});case"Whole Building Inspection":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(fn,{onBack:()=>e("Custodial")})});case"Rating Criteria":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(mn,{onBack:()=>e("Custodial")})});case"admin-inspections":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(pn,{onBack:()=>e("Custodial")})});case"Monthly Feedback":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(gn,{onBack:()=>e("Custodial")})});case"Scores Dashboard":return a.jsx(h.Suspense,{fallback:a.jsx(Z,{}),children:a.jsx(yn,{onBack:()=>e("Custodial")})});default:return a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Page Not Found"}),a.jsx("button",{onClick:()=>e("Custodial"),className:"mt-4 modern-button bg-primary hover:bg-primary/90 border-primary text-primary-foreground",children:"Return Home"})]})}}catch(C){return console.error("Error rendering page:",C),a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Error Loading Page"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Something went wrong. Please try again."}),a.jsx("button",{onClick:()=>e("Custodial"),className:"mt-4 modern-button bg-primary hover:bg-primary/90 border-primary text-primary-foreground",children:"Return Home"})]})}};return a.jsx(bn,{children:a.jsx(jr,{client:Yr,children:a.jsx(Ur,{children:a.jsxs("div",{className:"bg-background text-foreground min-h-screen pb-16 lg:pb-0","data-testid":"app-container",lang:"en",children:[a.jsxs("div",{className:"sr-only",role:"navigation","aria-label":"Skip links",children:[a.jsx(ze,{href:"#main-content",children:"Skip to main content"}),a.jsx(ze,{href:"#navigation",children:"Skip to navigation"}),a.jsx(ze,{href:"#footer",children:"Skip to footer"})]}),a.jsxs("div",{className:"main-container",children:[a.jsxs("header",{className:"w-full header-container rounded-xl shadow-sm",role:"banner",children:[a.jsx("h1",{className:"font-bold modern-header tracking-tight",id:"app-title",children:"CA Custodial Command"}),a.jsx("div",{className:"sr-only","aria-live":"polite",children:y&&"Screen reader mode detected"})]}),a.jsx("nav",{className:"w-full nav-container rounded-xl shadow-sm",role:"navigation","aria-labelledby":"app-title",id:"navigation",children:a.jsxs("div",{className:"button-container",role:"menubar",children:[v.map(C=>a.jsx("button",{onClick:()=>e(C.path),className:`modern-button ${t===C.path?"bg-primary/80":""}`,role:"menuitem","aria-current":t===C.path?"page":void 0,"aria-label":`${C.name} page${t===C.path?", current page":""}`,children:C.name},C.name)),a.jsx("button",{onClick:()=>e("admin-inspections"),className:"modern-button bg-red-600 hover:bg-red-700 border-red-600 text-white",role:"menuitem","aria-label":"Admin inspections panel","aria-current":t==="admin-inspections"?"page":void 0,children:"Admin"})]})}),a.jsx("div",{className:"w-full nav-container rounded-xl shadow-sm mb-4",role:"toolbar","aria-label":"Text size controls",children:a.jsxs("div",{className:"button-container",children:[a.jsxs("button",{onClick:g,className:"modern-button bg-secondary hover:bg-secondary/80","aria-label":"Decrease text size",disabled:p==="small",children:[a.jsx("span",{"aria-hidden":"true",children:"A-"}),a.jsx("span",{className:"sr-only",children:"Decrease text size"})]}),a.jsxs("span",{className:"text-sm text-muted-foreground px-2","aria-live":"polite","aria-label":`Current text size: ${p}`,children:["Text Size: ",p.charAt(0).toUpperCase()+p.slice(1)]}),a.jsxs("button",{onClick:d,className:"modern-button bg-secondary hover:bg-secondary/80","aria-label":"Increase text size",disabled:p==="large",children:[a.jsx("span",{"aria-hidden":"true",children:"A+"}),a.jsx("span",{className:"sr-only",children:"Increase text size"})]})]})}),a.jsx(Xs,{className:"mb-4"}),a.jsx("main",{id:"main-content",className:"w-full content-area rounded-xl shadow-sm",role:"main","aria-label":"Main content",tabIndex:-1,children:P()})]}),a.jsxs("footer",{className:"w-full mt-6 text-center text-muted-foreground text-sm",role:"contentinfo",id:"footer",children:[a.jsx("p",{children:"Â© 2025 Shared Service Command. All rights reserved. For the People!"}),a.jsx("div",{className:"mt-2 text-xs",children:a.jsx("span",{"aria-label":"Accessibility information",children:"WCAG 2.2 AA Compliant | Screen reader friendly"})})]}),a.jsx(Jr,{className:"lg:hidden"}),a.jsxs("div",{"aria-live":"polite","aria-label":"Application notifications",role:"region",children:[a.jsx(Vs,{}),a.jsx(Ks,{notifications:N,onRemove:b}),a.jsx(Ys,{notifications:w,onRemove:S})]}),a.jsx("div",{className:"sr-only","aria-live":"assertive","aria-atomic":"true",id:"screen-reader-announcements"})]})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("Service Worker registered successfully:",t.scope),setInterval(()=>{t.update()},300*1e3)}).catch(t=>{console.error("Service Worker registration failed:",t)})});const us=document.getElementById("root");if(!us)throw new Error("Could not find root element");const xn=Is.createRoot(us);xn.render(a.jsx(vn,{}));export{Le as B,Gt as C,J as S,Ye as a,Hs as b,O as c,qs as d,zs as e,Bs as f,Ws as g,Xt as h,ft as i,Os as u};
