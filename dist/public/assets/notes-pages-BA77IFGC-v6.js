var Pe=Object.defineProperty,Oe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var ue=(u,n,l)=>n in u?Pe(u,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[n]=l,S=(u,n)=>{for(var l in n||(n={}))Ue.call(n,l)&&ue(u,l,n[l]);if(xe)for(var l of xe(n))ze.call(n,l)&&ue(u,l,n[l]);return u},C=(u,n)=>Oe(u,$e(n));var $=(u,n,l)=>new Promise((M,p)=>{var P=b=>{try{d(l.next(b))}catch(E){p(E)}},q=b=>{try{d(l.throw(b))}catch(E){p(E)}},d=b=>b.done?M(b.value):Promise.resolve(b.value).then(P,q);d((l=l.apply(u,n)).next())});import{M as Te,r as c,j as e,k as pe,ad as We,C as Q,bu as Me,g as qe,bv as U}from"./vendor-yOkX1T9n-v6.js";import{t as He}from"./forms-BJ8Awwap-v6.js";import{a as Be,bz as Ge,bA as f,bB as Ye,B as D,C as Z,b as X,c as ee,d as se,e as te,L as I,bC as z,bD as T,bE as W,I as F,bF as Je,bG as _e,bH as Ve,bI as Ke,bJ as Qe,t as Ze,A as Xe,w as es,x as ss,y as ts,z as as,E as os,F as rs,G as is,b2 as ns,bK as ls,bu as cs,bv as ds,bw as ae,bL as ms}from"./index-DdeSxun1-v6.js";import"./ui-BA32w1ww-v6.js";import"./utils-Cj9wHvoQ-v6.js";import"./charts-core-ghokHKd6-v6.js";import"./pdf-export-JyY94Pcb-v6.js";const hs=["ASA","CBR","GWC","LCA","OA","WLC"],xs=`
  @keyframes progress {
    from {
      width: 0%;
    }
    to {
      width: 100%;
    }
  }
`;function ys({onBack:u}){const{toast:n}=Be();Ge({onWarning:(s,t,o)=>{n({variant:o==="critical"?"destructive":"default",title:o==="critical"?"‚ö†Ô∏è Storage Almost Full":"‚ö° Storage Warning",description:s,duration:7e3})},checkInterval:3e4,checkOnMount:!0});const{register:l,handleSubmit:M,formState:{errors:p,isSubmitting:P},reset:q,setValue:d,watch:b,clearErrors:E}=Te({resolver:He(ms),defaultValues:ls}),H=b(),[j,B]=c.useState([]),[A,G]=c.useState([]),[ge,Y]=c.useState(!1),[h,oe]=c.useState(null),[R,O]=c.useState(!1),[re,ie]=c.useState(!1),[k,L]=c.useState(""),[N,fe]=c.useState(null),[be,je]=c.useState(!0),[Ne,ve]=c.useState(!1),[ye,we]=c.useState(!0),[ne,le]=c.useState([]),[ce,J]=c.useState(null),[Se,de]=c.useState(!1),[Ce,me]=c.useState(!1),[De,_]=c.useState(!1),[v,V]=c.useState(null);c.useEffect(()=>{const s=()=>{const t=document.querySelectorAll(".form-section"),o=window.scrollY+window.innerHeight/2;t.forEach((r,a)=>{const x=r.getBoundingClientRect(),i=x.top+window.scrollY,y=i+x.height;o>=i&&o<y&&fe(a+1)}),window.scrollY>100&&je(!1)};return window.addEventListener("scroll",s),s(),()=>window.removeEventListener("scroll",s)},[]),c.useEffect(()=>{const s=()=>{const t=window.innerWidth<=768,o=window.innerHeight<500;ve(t&&o)};return s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),c.useEffect(()=>{if(Object.values(H).some(t=>t&&t!=="")&&!R){const t=setTimeout(()=>{de(!0);const o=C(S({},H),{selectedSchool:k,savedAt:new Date().toISOString()});f.setItem("custodialNotesDraft",JSON.stringify(o)),J(new Date),de(!1)},2e3);return()=>clearTimeout(t)}},[H,k,R]),c.useEffect(()=>{try{const s=f.getItem("custodialNotesDraft");let t=!1;if(s){const r=JSON.parse(s),a=new Date(r.savedAt);(Date.now()-a.getTime())/(1e3*60*60)<24?(t=!0,Object.keys(r).forEach(i=>{i!=="savedAt"&&i!=="selectedSchool"&&d(i,r[i])}),r.selectedSchool&&(L(r.selectedSchool),d("school",r.selectedSchool)),J(a),n({title:"Draft Restored",description:`Your work from ${a.toLocaleString()} was restored.`,duration:5e3})):f.removeItem("custodialNotesDraft")}if(!t){const r=f.getItem("custodialInspectorName");r&&d("inspectorName",r);const a=f.getItem("custodialLastSchool");a&&(L(a),d("school",a))}const o=f.getItem("custodialRecentLocations");if(o){const r=JSON.parse(o);le(Array.isArray(r)?r:[])}}catch(s){console.error("Error loading saved data:",s)}},[d,L,n]);const he=s=>$(null,null,function*(){const t=s.target.files;if(t&&t.length>0){const o=Array.from(t),a=5-j.length,x=o.slice(0,a);x.length<o.length&&n({title:"Maximum Images Reached",description:`Only ${x.length} images were added. Maximum of 5 images allowed.`});const i=[];let y=0,g=0;for(const m of x)if(y+=m.size,cs(m,500))try{const w=yield ds(m,{maxSizeKB:500});i.push(w.compressedFile),g+=w.compressedSize,console.log(`Compressed ${m.name}: ${ae(m.size)} ‚Üí ${ae(w.compressedSize)}`)}catch(w){console.error("Failed to compress image:",w),i.push(m),g+=m.size}else i.push(m),g+=m.size;B(m=>[...m,...i]);const K=i.map(m=>URL.createObjectURL(m));if(G(m=>[...m,...K]),i.length>0){const m=y-g,w=m>0?(m/y*100).toFixed(1):"0";n({title:"üì∏ Photos Uploaded Successfully!",description:`Successfully added ${i.length} photo${i.length>1?"s":""} to your custodial note documentation.${m>0?` Saved ${ae(m)} (${w}% compression).`:""}`,duration:3e3})}}s.target.value=""}),Ie=()=>{if(j.length>=5){n({variant:"destructive",title:"Maximum Images Reached",description:"Maximum of 5 images allowed. Please remove some images first."});return}const s=document.createElement("input");s.type="file",s.accept="image/*",s.capture="environment",s.onchange=t=>{const o=t;o.target.files&&o.target.files.length>0&&n({title:"üì∑ Photo Captured Successfully!",description:"Camera photo is being processed and added to your documentation.",duration:2e3}),he(o)},s.click()},ke=s=>{const t=j.filter((r,a)=>a!==s),o=A.filter((r,a)=>a!==s);URL.revokeObjectURL(A[s]),B(t),G(o)},Le=s=>{s.trim()&&le(t=>{const o=t.filter(a=>a!==s),r=[s,...o].slice(0,5);try{f.setItem("custodialRecentLocations",JSON.stringify(r))}catch(a){console.error("Error saving recent locations:",a)}return r})},Ee=()=>{v&&(d("inspectorName",v.inspectorName),d("school",v.school),d("date",v.date),d("location",v.location),d("locationDescription",v.locationDescription||""),L(v.school),d("notes",""),d("images",[]),_(!1),V(null),window.scrollTo({top:0,behavior:"smooth"}),n({title:"Form Pre-filled",description:"Inspector, school, date, and location have been filled in. Just add new notes and photos!",duration:4e3}))},Ae=()=>{_(!1),V(null),u&&u()},Re=s=>$(null,null,function*(){oe(s),Y(!0)}),Fe=()=>$(null,null,function*(){var s;if(h){O(!0),Y(!1);try{const t=new FormData;Object.entries(h).forEach(([a,x])=>{a!=="images"&&t.append(a,(x==null?void 0:x.toString())||"")}),j.forEach(a=>{t.append("images",a)});const r=yield fetch("/api/custodial-notes",{method:"POST",body:t,headers:{}});if(r.ok){me(!0),f.removeItem("custodialNotesDraft");try{f.setItem("custodialInspectorName",h.inspectorName),f.setItem("custodialLastSchool",k),Le(h.location)}catch(i){console.error("Error saving user preferences:",i)}V(h),n({title:"‚úÖ Custodial Note Submitted Successfully!",description:"Your custodial concern has been recorded and will be reviewed.",variant:"default",duration:5e3});const a=h.inspectorName,x=k;q(),d("inspectorName",a),d("school",x),L(x),B([]),A.forEach(i=>URL.revokeObjectURL(i)),G([]),oe(null),J(null),O(!1),setTimeout(()=>{me(!1),_(!0)},3e3)}else{const a=yield r.json().catch(()=>({success:!1,message:"Unknown error occurred",details:"Unable to parse server response"}));let x=a.message||"Unable to submit custodial note. Please try again.",i="";a.success===!1&&a.details&&(Array.isArray(a.details)?i=`Please check: ${a.details.map(g=>`${g.field}: ${g.message}`).join(", ")}`:typeof a.details=="object"?i=`Required: ${Object.entries(a.details).filter(([g,K])=>K==="‚úó required").map(([g])=>g.replace(/([A-Z])/g," $1").trim()).join(", ")}`:i=a.details),(a.technical==="FormData parsing failed"||(s=a.message)!=null&&s.includes("form data is malformed"))&&(x="Form submission error",i="Please refresh the page and try submitting again. If the problem persists, contact support."),n({variant:"destructive",title:"‚ùå Submission Failed",description:`${x}${i?`

${i}`:""}`,duration:8e3}),O(!1)}}catch(t){console.error("Error submitting custodial note:",t);let o="Network Error",r="Unable to connect to the server. Please check your connection and try again.";t instanceof TypeError&&(t.message.includes("Failed to fetch")?(o="Connection Failed",r=`Unable to reach the server. Please check:
‚Ä¢ Internet connection
‚Ä¢ Server is running
‚Ä¢ No firewall blocking the request`):t.message.includes("NetworkError")&&(o="Network Error",r="A network error occurred. Please try again.")),n({variant:"destructive",title:`‚ùå ${o}`,description:r,duration:8e3}),O(!1)}}});return e.jsxs(Ye,{children:[e.jsx("style",{children:xs}),e.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8",children:[u&&e.jsx(D,{onClick:u,variant:"outline",className:"mb-4 back-button min-h-[48px] px-6",children:"‚Üê Back to Custodial"}),Ne&&ye&&e.jsx("div",{className:"bg-orange-50 border-2 border-orange-400 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"üì±"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-orange-900 text-lg mb-1",children:"Landscape Mode Detected"}),e.jsxs("p",{className:"text-orange-800 text-sm",children:["For the best experience filling out this form, please"," ",e.jsx("strong",{children:"rotate your device to portrait mode"})," ","(vertical orientation)."]})]})]}),e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>we(!1),className:"text-orange-900 hover:bg-orange-100 flex-shrink-0",children:"‚úï"})]})}),ce&&e.jsx("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:Se?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-4 w-4 animate-pulse"}),e.jsx("span",{children:"Saving draft..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:["Draft saved at ",ce.toLocaleTimeString()]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-800 mb-2",children:"Submit Custodial Note"}),e.jsx("p",{className:"text-gray-600",children:"Report maintenance issues, concerns, or general observations"})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b-2 border-blue-200 py-3 -mx-6 px-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Form Progress:"}),N&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-blue-100 text-blue-800 border-2 border-blue-300",children:["Section ",N," of 3"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${N===1?"bg-blue-600":N&&N>1?"bg-blue-400":"bg-gray-200"}`}),e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${N===2?"bg-blue-600":N&&N>2?"bg-blue-400":"bg-gray-200"}`}),e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${N===3?"bg-blue-600":"bg-gray-200"}`})]})]})}),be&&e.jsxs("div",{className:"animate-bounce text-center text-gray-500 text-sm",children:[e.jsx(We,{className:"inline-block"}),e.jsx("p",{children:"Scroll down to continue"})]}),e.jsx("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"‚≠ê"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-900 text-lg mb-1",children:"New Requirement: Inspector Name"}),e.jsxs("p",{className:"text-amber-800 text-sm",children:["Please enter your name in the ",e.jsx("strong",{children:"Inspector Name"})," ","field. This is now required for all custodial notes to ensure proper accountability and follow-up."]})]})]})}),e.jsxs("form",{onSubmit:M(Re),className:"space-y-8",children:[e.jsxs(Z,{className:"form-section",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Basic Information"}),e.jsx(se,{children:"Enter the basic details for this custodial note"})]}),e.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"inspectorName",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Inspector Name"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"}),e.jsxs(z,{children:[e.jsx(T,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(W,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Why is this required?"}),e.jsx("p",{className:"text-gray-600",children:"Your name ensures accountability and allows for proper follow-up on reported issues. This helps maintain quality standards across all facilities."})]})]})]}),e.jsx(F,C(S({id:"inspectorName"},l("inspectorName")),{placeholder:"Enter your name",className:"border-2 min-h-[48px]"})),p.inspectorName&&e.jsx("p",{className:"text-sm text-red-500",children:p.inspectorName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"school",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"School"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"})]}),e.jsxs(z,{open:re,onOpenChange:ie,children:[e.jsx(T,{asChild:!0,children:e.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":re,className:"w-full justify-between border-2 min-h-[48px] text-left font-normal",children:[k||"Select school...",e.jsx(Me,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(W,{className:"w-full p-0",align:"start",children:e.jsxs(Je,{children:[e.jsx(_e,{placeholder:"Search schools..."}),e.jsx(Ve,{children:"No school found."}),e.jsx(Ke,{children:hs.map(s=>e.jsxs(Qe,{value:s,onSelect:t=>{const o=t.toUpperCase();L(o),d("school",o),ie(!1)},className:"min-h-[48px] cursor-pointer",children:[e.jsx(qe,{className:`mr-2 h-4 w-4 ${k===s?"opacity-100":"opacity-0"}`}),s]},s))})]})})]}),p.school&&e.jsx("p",{className:"text-sm text-red-500",children:p.school.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"date",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Date"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"})]}),e.jsx(F,C(S({id:"date",type:"date"},l("date")),{className:"border-2 min-h-[48px]"})),p.date&&e.jsx("p",{className:"text-sm text-red-500",children:p.date.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(I,{htmlFor:"location",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Location"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"}),e.jsxs(z,{children:[e.jsx(T,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(W,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Location Examples"}),e.jsxs("ul",{className:"text-gray-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:'Room numbers: "Room 105", "Classroom 202"'}),e.jsx("li",{children:'Common areas: "Gymnasium", "Cafeteria", "Library"'}),e.jsx("li",{children:'Outdoor: "Playground", "Parking Lot", "Field"'}),e.jsx("li",{children:'Facilities: "Restroom 1st Floor", "Main Office"'})]})]})]})]}),ne.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"Recent locations:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map((s,t)=>e.jsx("button",{type:"button",onClick:()=>{d("location",s),p.location&&E("location")},className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 hover:border-blue-300 transition-colors",children:s},t))})]}),e.jsx(F,C(S({id:"location"},l("location")),{placeholder:"e.g., Room 105, Gymnasium, Cafeteria",className:"border-2 min-h-[48px]"})),p.location&&e.jsx("p",{className:"text-sm text-red-500",children:p.location.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx(F,C(S({id:"locationDescription"},l("locationDescription")),{placeholder:"e.g., Main Building, East Wing, 2nd Floor",className:"min-h-[48px]"})),p.locationDescription&&e.jsx("p",{className:"text-sm text-red-500",children:p.locationDescription.message})]})]})]}),e.jsxs(Z,{className:"form-section",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:["Issue Description & Notes",e.jsxs(z,{children:[e.jsx(T,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(W,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"What to Include"}),e.jsxs("ul",{className:"text-gray-600 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"What:"})," Describe the issue clearly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Where:"})," Specific location details"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"When:"})," When you noticed it"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Severity:"})," Is it urgent or can it wait?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Impact:"})," How does it affect operations?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Action:"})," What needs to be done?"]})]})]})]})]}),e.jsx(se,{children:"Provide detailed information about the custodial issue or observation"})]}),e.jsxs(te,{children:[e.jsx(Ze,C(S({},l("notes")),{placeholder:`Describe the issue, maintenance need, or observation...

Examples:
‚Ä¢ Broken equipment or fixtures
‚Ä¢ Cleaning supply needs
‚Ä¢ Safety concerns
‚Ä¢ Maintenance requests
‚Ä¢ General observations
‚Ä¢ Follow-up needed`,rows:10,className:"min-h-[250px]"})),p.notes&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:p.notes.message})]})]}),e.jsxs(Z,{className:"form-section",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Photos & Documentation"}),e.jsx(se,{children:"Upload images or capture photos to document the issue"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{htmlFor:"imageUpload",className:"block mb-2",children:"Upload Images (Optional)"}),e.jsx(F,{id:"imageUpload",type:"file",accept:"image/*",multiple:!0,onChange:he,className:"hidden"}),e.jsx(D,{type:"button",onClick:()=>{var s;return(s=document.getElementById("imageUpload"))==null?void 0:s.click()},variant:"outline",className:"w-full h-12 border-2 border-dashed hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsxs("span",{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"text-2xl",children:"üìÅ"}),e.jsxs("span",{className:"font-medium",children:["Tap to Select Photos"," ",j.length>0&&`(${j.length} selected)`]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 5 images ‚Ä¢ Images auto-compressed"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(D,{type:"button",onClick:Ie,variant:"outline",className:"w-full sm:w-auto h-12 border-2",children:e.jsxs("span",{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"text-xl",children:"üì∑"}),e.jsx("span",{children:"Capture Photo"})]})})})]}),A.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(I,{className:"block mb-2",children:["Uploaded Images (",j.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:A.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Upload ${t+1}`,className:"w-full h-24 object-cover rounded-lg border"}),e.jsx(D,{type:"button",onClick:()=>ke(t),variant:"destructive",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:"√ó"})]},t))})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(D,{type:"submit",size:"lg",disabled:P||R,className:"w-full md:w-auto disabled:bg-gray-400 disabled:cursor-not-allowed min-h-[56px] text-lg font-semibold transition-all duration-300 relative overflow-hidden",children:P||R?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-5 h-5 border-3 border-white/30 rounded-full"})]}),e.jsx("span",{className:"animate-pulse",children:"Submitting your report..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Custodial Note"})]})})})]}),e.jsx(Xe,{open:ge,onOpenChange:Y,children:e.jsxs(es,{className:"max-w-lg",children:[e.jsxs(ss,{children:[e.jsx(ts,{className:"text-blue-800 text-xl",children:"‚úÖ Confirm Submission"}),e.jsx(as,{className:"text-left",children:"Please review your custodial note before submitting:"})]}),h&&e.jsx("div",{className:"space-y-3 py-4",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900",children:h.inspectorName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"School:"}),e.jsx("p",{className:"text-gray-900",children:h.school})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Date:"}),e.jsx("p",{className:"text-gray-900",children:h.date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Location:"}),e.jsx("p",{className:"text-gray-900",children:h.location})]})]}),h.locationDescription&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Location Details:"}),e.jsx("p",{className:"text-gray-900 text-sm",children:h.locationDescription})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Notes:"}),e.jsx("p",{className:"text-gray-900 text-sm max-h-24 overflow-y-auto",children:h.notes&&h.notes.length>200?`${h.notes.substring(0,200)}...`:h.notes||"No notes provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Photos:"}),e.jsxs("p",{className:"text-gray-900",children:[j.length," image",j.length!==1?"s":""," ","attached"]})]})]})}),e.jsxs(os,{children:[e.jsx(rs,{children:"Review/Edit"}),e.jsx(is,{onClick:Fe,className:"bg-blue-600 hover:bg-blue-700",children:"Confirm & Submit"})]})]})}),R&&e.jsx(ns,{message:"Submitting report..."}),Ce&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center animate-bounce",children:e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("svg",{className:"w-12 h-12 text-white animate-in zoom-in duration-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsx(U,{className:"absolute -top-2 -right-2 h-8 w-8 text-yellow-400 animate-pulse"}),e.jsx(U,{className:"absolute -bottom-2 -left-2 h-6 w-6 text-yellow-400 animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx(U,{className:"absolute -top-2 -left-2 h-5 w-5 text-blue-400 animate-pulse",style:{animationDelay:"0.4s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-700",children:"üéâ Success!"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Your custodial note has been submitted successfully!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you back to the home page..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full animate-[progress_3s_ease-in-out]",style:{animation:"progress 3s ease-in-out forwards"}})})]})})}),De&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Report Another Issue?"}),e.jsx("p",{className:"text-gray-600",children:"Found another issue at the same location?"}),e.jsx("p",{className:"text-sm text-gray-500",children:"We can pre-fill your inspector name, school, date, and location to save you time!"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:Ee,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors shadow-md hover:shadow-lg min-h-[48px]",children:"üìù Report Another Issue Here"}),e.jsx("button",{onClick:Ae,className:"w-full px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg transition-colors min-h-[48px]",children:"üè† Return to Home"})]})]})})})]})]})}export{ys as default};
