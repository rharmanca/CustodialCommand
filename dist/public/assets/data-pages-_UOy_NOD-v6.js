import{r as c,j as e,x as k,y as se,F as f,p as L,i as ae,w as ie,z as re,E as te}from"./vendor-1jRaonge-v6.js";import{a as ne,b4 as u,B as j,C as E,b as I,c as A,d as le,e as V,U as B,b5 as oe,b6 as me,T as de,g as ce,h as p,i as b,b7 as ue,b8 as Ne,b9 as U,j as M,ba as he,bb as pe,bc as be,bd as fe,be as ge,bf as xe,bg as Ce,bh as ve}from"./index-DUq3a8zQ-v6.js";import"./pdf-export-DLkp0oRl-v6.js";import"./charts-core-Ci00SAtp-v6.js";import"./ui-BQCqNqg0-v6.js";import"./utils-DvvWCVwA-v6.js";import"./forms-qrEI1HMw-v6.js";function ke({onBack:P}){const{toast:_}=ne(),[g,$]=c.useState([]),[d,z]=c.useState([]),[H,Y]=c.useState(!0),[t,x]=c.useState(null),[De,je]=c.useState("school"),[n,y]=c.useState({search:"",dateRange:{from:null,to:null},schools:[],severityLevels:[],categories:[],inspectors:[],ratingThreshold:0,inspectionType:"all",showProblemsOnly:!1,hasCustodialNotes:!1}),[F,W]=c.useState(!1),G={1:"Unacceptable",2:"Below Standard",3:"Acceptable",4:"Ordinary Tidiness",5:"Orderly Spotlessness"},C=[{key:"floors",label:"Floors"},{key:"verticalHorizontalSurfaces",label:"Vertical and Horizontal Surfaces"},{key:"ceiling",label:"Ceiling"},{key:"restrooms",label:"Restrooms"},{key:"customerSatisfaction",label:"Customer Satisfaction and Coordination"},{key:"trash",label:"Trash"},{key:"projectCleaning",label:"Project Cleaning"},{key:"activitySupport",label:"Activity Support"},{key:"safetyCompliance",label:"Safety and Compliance"},{key:"equipment",label:"Equipment"},{key:"monitoring",label:"Monitoring"}];c.useEffect(()=>{q()},[]);const q=async()=>{try{const[s,a]=await Promise.all([fetch("/api/inspections"),fetch("/api/custodial-notes")]);if(s.ok){const i=await s.json();$(i)}if(a.ok){const i=await a.json();z(i)}}catch(s){console.error("Error fetching data:",s)}finally{Y(!1)}},o=s=>{const a=C.map(r=>s[r.key]).filter(r=>typeof r=="number");if(a.length===0)return null;const i=a.reduce((r,m)=>r+m,0)/a.length;return Math.round(i*10)/10},w=s=>e.jsxDEV("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>e.jsxDEV(L,{className:`w-4 h-4 ${a<=s?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},a,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:132,columnNumber:11},this)),e.jsxDEV("span",{className:"ml-2 text-sm text-gray-600",children:G[s]},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:141,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:130,columnNumber:7},this),O=c.useMemo(()=>{const s=new Set(g.map(a=>a.school).filter(Boolean));return Array.from(s).sort()},[g]),l=c.useMemo(()=>g.filter(s=>{if(n.search&&![s.school,s.roomNumber?.toString(),s.locationDescription,s.buildingName,s.notes].filter(Boolean).join(" ").toLowerCase().includes(n.search.toLowerCase()))return!1;if(n.dateRange.from||n.dateRange.to){const a=new Date(s.date);if(n.dateRange.from&&a<n.dateRange.from||n.dateRange.to&&a>n.dateRange.to)return!1}if(n.schools.length>0&&!n.schools.includes(s.school)||n.inspectors.length>0&&s.inspectorName&&!n.inspectors.includes(s.inspectorName)||n.inspectionType!=="all"&&(n.inspectionType==="single_room"&&s.inspectionType!=="single_room"||n.inspectionType==="whole_building"&&s.inspectionType!=="whole_building"))return!1;if(n.ratingThreshold>0){const a=o(s);if(a===null||a<n.ratingThreshold)return!1}if(n.severityLevels.length>0){const a=o(s);if(a===null)return!1;const i=a<2?"critical":a<3?"needs-attention":"acceptable";if(!n.severityLevels.includes(i))return!1}if(n.showProblemsOnly){const a=o(s);if(a===null||a>=3)return!1}return!(n.hasCustodialNotes&&!d.some(i=>i.school===s.school))}),[g,d,n]),v=(()=>{const s=new Date,a=new Date(s.getFullYear(),s.getMonth()-1,s.getDate());new Date(s.getFullYear(),s.getMonth()-2,s.getDate());const i=l.filter(N=>new Date(N.date)>=new Date(s.getFullYear(),s.getMonth(),1)),r=l.filter(N=>{const h=new Date(N.date);return h>=new Date(a.getFullYear(),a.getMonth(),1)&&h<new Date(s.getFullYear(),s.getMonth(),1)}),m=r.length>0?(i.length-r.length)/r.length*100:0,T=i.length>0?i.reduce((N,h)=>{const S=o(h);return N+(S||0)},0)/i.length:0,R=r.length>0?r.reduce((N,h)=>{const S=o(h);return N+(S||0)},0)/r.length:0,ee=R>0?(T-R)/R*100:0;return{inspectionTrend:Math.round(m*10)/10,ratingTrend:Math.round(ee*10)/10}})(),K=s=>{const a=o(s);return a===null?null:a<2?{level:"critical",color:"#EF4444",icon:ie,label:"Critical"}:a<3?{level:"needs-attention",color:"#F59E0B",icon:re,label:"Needs Attention"}:{level:"acceptable",color:"#10B981",icon:te,label:"Acceptable"}},J=()=>{const s=l.reduce((a,i)=>{const r=new Date(i.date).toISOString().slice(0,7);a[r]||(a[r]={date:r,ratings:[],totalInspections:0});const m=o(i);return m!==null&&(a[r].ratings.push(m),a[r].totalInspections++),a},{});return Object.values(s).map(a=>({date:a.date,averageRating:a.ratings.length>0?Math.round(a.ratings.reduce((i,r)=>i+r,0)/a.ratings.length*10)/10:0,totalInspections:a.totalInspections})).sort((a,i)=>a.date.localeCompare(i.date))},Q=()=>{const s=l.reduce((a,i)=>{a[i.school]||(a[i.school]={school:i.school,ratings:[],totalInspections:0,singleRoomCount:0,wholeBuildingCount:0});const r=o(i);return r!==null&&a[i.school].ratings.push(r),a[i.school].totalInspections++,i.inspectionType==="single_room"?a[i.school].singleRoomCount++:a[i.school].wholeBuildingCount++,a},{});return Object.values(s).map(a=>({...a,averageRating:a.ratings.length>0?Math.round(a.ratings.reduce((i,r)=>i+r,0)/a.ratings.length*10)/10:0}))},X=()=>{const s=C.reduce((a,i)=>(a[i.key]={category:i.label,ratings:[],totalRatings:0},a),{});return l.forEach(a=>{C.forEach(i=>{const r=a[i.key];typeof r=="number"&&(s[i.key].ratings.push(r),s[i.key].totalRatings++)})}),Object.values(s).map(a=>({category:a.category,rating:a.ratings.length>0?Math.round(a.ratings.reduce((i,r)=>i+r,0)/a.ratings.length*10)/10:0,fullMark:5}))},Z=()=>l.filter(s=>s.inspectionType==="single_room"&&s.roomNumber).map(s=>({number:s.roomNumber,rating:o(s)||0,school:s.school,lastInspection:s.date})),D=c.useMemo(()=>{const s=l.length,a=d.length,i=l.length>0?Math.round(l.map(o).filter(m=>m!==null).reduce((m,T)=>m+T,0)/l.length*10)/10:0,r=new Set(l.map(m=>m.school)).size;return{totalInspections:s,totalNotes:a,avgRating:i,schools:r}},[l,d]);return H?e.jsxDEV("div",{className:"container mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(u,{className:"h-10 w-32"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:463,columnNumber:11},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:462,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV(u,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:467,columnNumber:11},this),e.jsxDEV(u,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:468,columnNumber:11},this),e.jsxDEV(u,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:469,columnNumber:11},this),e.jsxDEV(u,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:470,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:466,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxDEV(u,{className:"h-64 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:474,columnNumber:11},this),e.jsxDEV(u,{className:"h-64 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:475,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:473,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(u,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:479,columnNumber:11},this),e.jsxDEV(u,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:480,columnNumber:11},this),e.jsxDEV(u,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:481,columnNumber:11},this),e.jsxDEV(u,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:482,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:478,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:461,columnNumber:7},this):t?e.jsxDEV("div",{className:"container mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(j,{onClick:()=>x(null),variant:"outline",children:"← Back to Inspections"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:492,columnNumber:11},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:491,columnNumber:9},this),e.jsxDEV(E,{className:"max-w-4xl mx-auto",children:[e.jsxDEV(I,{children:[e.jsxDEV(A,{className:"flex items-center gap-2",children:[e.jsxDEV(k,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:500,columnNumber:15},this),"Inspection Details"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:499,columnNumber:13},this),e.jsxDEV(le,{children:t.inspectionType==="single_room"?`Room ${t.roomNumber} at ${t.school}`:`Building: ${t.buildingName||t.locationDescription||"Whole Building"} at ${t.school}`},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:503,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:498,columnNumber:11},this),e.jsxDEV(V,{children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Inspection Information"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:514,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Date:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:516,columnNumber:24},this)," ",new Date(t.date).toLocaleDateString()]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:516,columnNumber:21},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"School:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:517,columnNumber:24},this)," ",t.school]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:517,columnNumber:21},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Type:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:518,columnNumber:24},this)," ",t.inspectionType==="single_room"?"Single Room":"Whole Building"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:518,columnNumber:21},this),t.roomNumber&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Room:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:519,columnNumber:58},this)," ",t.roomNumber]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:519,columnNumber:55},this),t.buildingName&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Building:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:520,columnNumber:60},this)," ",t.buildingName]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:520,columnNumber:57},this),!t.buildingName&&t.inspectionType==="whole_building"&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Building:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:521,columnNumber:119},this)," ",t.locationDescription||"Whole Building"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:521,columnNumber:116},this),t.locationDescription&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Location:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:522,columnNumber:67},this)," ",t.locationDescription]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:522,columnNumber:64},this),t.inspectorName&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Inspector:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:523,columnNumber:61},this)," ",t.inspectorName]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:523,columnNumber:58},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:515,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:513,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Overall Rating"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:527,columnNumber:19},this),(()=>{const s=o(t);return s!==null?w(Math.round(s)):e.jsxDEV("span",{className:"text-gray-500",children:"No ratings available"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:530,columnNumber:74},this)})()]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:526,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:512,columnNumber:15},this),e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:535,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-4",children:"Category Ratings"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:538,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(s=>{const a=t[s.key];return e.jsxDEV("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxDEV("span",{className:"font-medium",children:s.label},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:544,columnNumber:25},this),typeof a=="number"?e.jsxDEV("div",{className:"flex items-center gap-2",children:w(a)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:546,columnNumber:27},this):e.jsxDEV("span",{className:"text-gray-500 text-sm",children:"Not rated"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:550,columnNumber:27},this)]},s.key,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:543,columnNumber:23},this)})},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:539,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:537,columnNumber:15},this),t.notes&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:560,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Additional Notes"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:562,columnNumber:21},this),e.jsxDEV("p",{className:"text-gray-700",children:t.notes},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:563,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:561,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:559,columnNumber:17},this),t.images&&t.images.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:570,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-4",children:"Images"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:572,columnNumber:22},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.images.map((s,a)=>e.jsxDEV("div",{className:"border rounded-lg overflow-hidden",children:e.jsxDEV("img",{src:s,alt:`Inspection image ${a+1}`,className:"w-full h-48 object-cover"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:576,columnNumber:23},this)},a,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:575,columnNumber:21},this))},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:573,columnNumber:22},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:571,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:569,columnNumber:18},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:511,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:510,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:497,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:490,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-background",children:e.jsxDEV("div",{className:"container mx-auto px-4 py-6 content-visibility-auto layout-contained",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV(j,{onClick:s=>{s.preventDefault(),s.stopPropagation(),P&&P()},variant:"outline",className:"mb-4 back-button",children:"← Back to Main Menu"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:598,columnNumber:11},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Enhanced Data & Reports"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:610,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Advanced analytics and visualizations for custodial data"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:611,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:609,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:597,columnNumber:9},this),e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(oe,{filters:n,onApplyPreset:y,schools:O},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:617,columnNumber:9},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:616,columnNumber:7},this),e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(me,{inspections:g,custodialNotes:d,filters:n,onFiltersChange:y,onClearFilters:()=>y({search:"",dateRange:{from:null,to:null},schools:[],severityLevels:[],categories:[],inspectors:[],ratingThreshold:0,inspectionType:"all",showProblemsOnly:!1,hasCustodialNotes:!1}),isOpen:F,onToggle:()=>W(!F)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:626,columnNumber:9},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:625,columnNumber:7},this),e.jsxDEV(de,{defaultValue:"overview",className:"w-full",children:[e.jsxDEV("div",{className:"sticky top-0 z-10 bg-background border-b",children:e.jsxDEV(ce,{className:"grid w-full grid-cols-7",children:[e.jsxDEV(p,{value:"overview",children:"Overview"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:651,columnNumber:15},this),e.jsxDEV(p,{value:"problems",children:"Problem Areas"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:652,columnNumber:15},this),e.jsxDEV(p,{value:"charts",children:"Charts"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:653,columnNumber:15},this),e.jsxDEV(p,{value:"school",children:"By School"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:654,columnNumber:15},this),e.jsxDEV(p,{value:"date",children:"By Date"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:655,columnNumber:15},this),e.jsxDEV(p,{value:"inspector",children:"By Inspector"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:656,columnNumber:15},this),e.jsxDEV(p,{value:"notes",children:"Custodial Notes"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:657,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:650,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:649,columnNumber:11},this),e.jsxDEV(b,{value:"overview",className:"mt-6",children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Overview"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:666,columnNumber:19},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Key performance indicators and recent inspections"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:667,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:665,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ue,{inspections:l,custodialNotes:d,trigger:e.jsxDEV(j,{variant:"outline",children:[e.jsxDEV(se,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:675,columnNumber:25},this),"Export Overview"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:674,columnNumber:23},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:670,columnNumber:19},this),e.jsxDEV(Ne,{inspections:l,custodialNotes:d,availableSchools:O,availableCategories:C,trigger:e.jsxDEV(j,{type:"button",variant:"outline",className:"flex items-center gap-2",children:[e.jsxDEV(f,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:687,columnNumber:25},this),"Export PDF Report"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:686,columnNumber:23},this),onExportComplete:()=>{_({title:"Export Complete",description:"Your PDF report has been generated successfully."})}},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:680,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:669,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:664,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxDEV(U,{title:"Total Inspections",value:D.totalInspections,description:"All time inspections",icon:f,color:"primary",trend:v.inspectionTrend!==0?{value:v.inspectionTrend,period:"vs last month"}:void 0},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:702,columnNumber:17},this),e.jsxDEV(U,{title:"Average Rating",value:`${D.avgRating}/5`,description:"Overall performance",icon:L,color:"success",trend:v.ratingTrend!==0?{value:v.ratingTrend,period:"vs last month"}:void 0},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:713,columnNumber:17},this),e.jsxDEV(U,{title:"Schools",value:D.schools,description:"Active locations",icon:k,color:"secondary"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:724,columnNumber:17},this),e.jsxDEV(U,{title:"Custodial Notes",value:D.totalNotes,description:"Issues reported",icon:f,color:"warning"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:731,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:701,columnNumber:15},this),e.jsxDEV(E,{children:[e.jsxDEV(I,{children:e.jsxDEV(A,{className:"flex items-center gap-2",children:[e.jsxDEV(ae,{className:"w-5 h-5 text-primary"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:744,columnNumber:21},this),"Recent Activity"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:743,columnNumber:19},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:742,columnNumber:25},this),e.jsxDEV(V,{children:e.jsxDEV("div",{className:"space-y-4",children:l.slice(0,5).map(s=>{const a=K(s);return e.jsxDEV("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(k,{className:"w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:755,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("p",{className:"font-medium text-foreground",children:s.school},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:758,columnNumber:33},this),a&&a.level!=="acceptable"&&e.jsxDEV(M,{variant:a.level==="critical"?"destructive":"secondary",className:"text-xs",children:[e.jsxDEV(a.icon,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:764,columnNumber:37},this),a.label]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:760,columnNumber:35},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:757,columnNumber:31},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:s.inspectionType==="single_room"?`Room ${s.roomNumber??"Not specified"}`:`Building: ${s.buildingName||s.locationDescription||"Whole Building"}`},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:769,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:756,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:754,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[(()=>{const i=o(s);return i!==null?w(Math.round(i)):e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"N/A"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:780,columnNumber:84},this)})(),e.jsxDEV(M,{variant:"outline",children:new Date(s.date).toLocaleDateString()},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:782,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:777,columnNumber:27},this)]},s.id,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:753,columnNumber:25},this)})},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:749,columnNumber:27},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:748,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:741,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:662,columnNumber:11},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:661,columnNumber:11},this),e.jsxDEV(b,{value:"problems",className:"mt-6",children:e.jsxDEV(he,{inspections:l,custodialNotes:d,onInspectionClick:x,onExportReport:()=>{}},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:796,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:795,columnNumber:11},this),e.jsxDEV(b,{value:"charts",className:"mt-6",children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(pe,{data:J(),title:"Performance Trends Over Time",description:"Average ratings and inspection volume by month"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:808,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV(be,{data:Q(),title:"School Performance Comparison",description:"Average ratings and inspection counts by school"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:815,columnNumber:17},this),e.jsxDEV(fe,{data:X(),title:"Category Performance Analysis",description:"Performance ratings across all inspection categories"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:821,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:814,columnNumber:15},this),e.jsxDEV(ge,{data:Z(),title:"Room Performance Heatmap",description:"Visual overview of room performance ratings",maxRoomsPerRow:8},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:828,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:807,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:806,columnNumber:11},this),e.jsxDEV(b,{value:"school",className:"mt-6",children:e.jsxDEV(xe,{inspections:l,onInspectionClick:x},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:838,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:837,columnNumber:11},this),e.jsxDEV(b,{value:"date",className:"mt-6",children:e.jsxDEV(Ce,{inspections:l,onInspectionClick:x},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:845,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:844,columnNumber:11},this),e.jsxDEV(b,{value:"inspector",className:"mt-6",children:e.jsxDEV(ve,{inspections:l,onInspectionClick:x},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:852,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:851,columnNumber:11},this),e.jsxDEV(b,{value:"notes",className:"mt-6",children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(f,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:862,columnNumber:19},this),"Custodial Notes (",d.length,")"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:861,columnNumber:17},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:860,columnNumber:15},this),d.length===0?e.jsxDEV(E,{children:e.jsxDEV(V,{className:"text-center py-8",children:[e.jsxDEV(f,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:870,columnNumber:21},this),e.jsxDEV("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Custodial Notes"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:871,columnNumber:21},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"No custodial notes have been submitted yet."},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:872,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:869,columnNumber:21},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:868,columnNumber:19},this):e.jsxDEV("div",{className:"grid gap-4",children:d.map(s=>e.jsxDEV(E,{className:"hover:shadow-lg transition-shadow",children:[e.jsxDEV(I,{children:e.jsxDEV(A,{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(f,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:882,columnNumber:29},this),s.school]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:881,columnNumber:29},this),e.jsxDEV(M,{variant:"outline",children:new Date(s.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:885,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:880,columnNumber:27},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:879,columnNumber:25},this),e.jsxDEV(V,{children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Location:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:893,columnNumber:31},this),e.jsxDEV("p",{className:"text-foreground",children:[s.location," - ",s.locationDescription]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:894,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:892,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Notes:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:897,columnNumber:31},this),e.jsxDEV("p",{className:"text-foreground",children:s.notes},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:898,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:896,columnNumber:29},this),e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:e.jsxDEV("span",{children:["Created: ",new Date(s.createdAt).toLocaleString()]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:901,columnNumber:31},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:900,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:891,columnNumber:27},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:890,columnNumber:25},this)]},s.id,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:878,columnNumber:21},this))},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:876,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:859,columnNumber:15},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:858,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:648,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:596,columnNumber:7},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:595,columnNumber:5},this)}export{ke as default};
