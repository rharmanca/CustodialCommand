import{r as c,j as e,S as Ae}from"./ui-gIZ64paP-v6.js";import{u as $e,C as te,n as Fe,c as Te,f as W,i as Ee,t as Le,s as Be}from"./custodialNotesSchema-J_wktK3T-v6.js";import{m as Pe,g as _e,l as ze,S as J,p as Me,s as Ue,H as Re,C as ae,a as Oe,c as He}from"./collapsible-section-BB7UCmQw-v6.js";import{c as F,C as me,a as qe,u as Ge,B as z,b as C,d as k,e as w,f as M,g as U,h as R,U as Ve,X as We}from"./index-ClufJbUB-v6.js";import{L as y,I as $}from"./label-BXDX0v-3-v6.js";import{T as Je}from"./textarea-DMCDaM7J-v6.js";import{S as re,a as oe,b as ie,c as le,d as ne}from"./select-BouMH4Ba-v6.js";import{D as Ke,a as Ye,b as Xe,c as Qe,d as Ze}from"./dialog-BVC3i4oB-v6.js";import{C as es}from"./chevron-right-CuSuMaYY-v6.js";import{u as ss}from"./use-mobile-BMxJlUOj-v6.js";import{r as O,i as ce}from"./custodial-criteria-aPNJLI_7-v6.js";import{L as ts}from"./LoadingOverlay-sqcOJs4s-v6.js";import{C as as}from"./chevron-down-DcOdNfKy-v6.js";import{S as K}from"./save-CxyB9IVG-v6.js";import{S as de}from"./star-CuAwYvP_-v6.js";import"./vendor-Dvwkxfce-v6.js";const xe=c.forwardRef(({...d},l)=>e.jsx("nav",{ref:l,"aria-label":"breadcrumb",...d}));xe.displayName="Breadcrumb";const ue=c.forwardRef(({className:d,...l},m)=>e.jsx("ol",{ref:m,className:F("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",d),...l}));ue.displayName="BreadcrumbList";const Y=c.forwardRef(({className:d,...l},m)=>e.jsx("li",{ref:m,className:F("inline-flex items-center gap-1.5",d),...l}));Y.displayName="BreadcrumbItem";const pe=c.forwardRef(({asChild:d,className:l,...m},g)=>{const D=d?Ae:"a";return e.jsx(D,{ref:g,className:F("transition-colors hover:text-foreground",l),...m})});pe.displayName="BreadcrumbLink";const he=c.forwardRef(({className:d,...l},m)=>e.jsx("span",{ref:m,role:"link","aria-disabled":"true","aria-current":"page",className:F("font-normal text-foreground",d),...l}));he.displayName="BreadcrumbPage";const ge=({children:d,className:l,...m})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:F("[&>svg]:w-3.5 [&>svg]:h-3.5",l),...m,children:d??e.jsx(es,{})});ge.displayName="BreadcrumbSeparator";function rs({status:d,lastSaved:l,errorMessage:m,className:g=""}){const[D,n]=c.useState("");c.useEffect(()=>{if(!l){n("");return}const E=()=>{const p=new Date().getTime()-l.getTime(),I=Math.floor(p/1e3),b=Math.floor(I/60);I<10?n("just now"):I<60?n(`${I}s ago`):b<60?n(`${b}m ago`):n(l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))};E();const X=setInterval(E,1e4);return()=>clearInterval(X)},[l]);const f=(()=>{switch(d){case"saving":return{icon:K,text:"Saving...",bgColor:"bg-blue-100 border-blue-300",textColor:"text-blue-800",iconColor:"text-blue-600",animate:!0};case"saved":return{icon:as,text:D?`Saved ${D}`:"Saved",bgColor:"bg-green-100 border-green-300",textColor:"text-green-800",iconColor:"text-green-600",animate:!1};case"error":return{icon:qe,text:m||"Save failed",bgColor:"bg-red-100 border-red-300",textColor:"text-red-800",iconColor:"text-red-600",animate:!1};default:return{icon:me,text:"Not saved",bgColor:"bg-gray-100 border-gray-300",textColor:"text-gray-700",iconColor:"text-gray-500",animate:!1}}})(),r=f.icon;return e.jsxs("div",{className:`fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-lg border-2 shadow-lg transition-all duration-200 ${f.bgColor} ${g}`,role:"status","aria-live":"polite",children:[e.jsx(r,{className:`h-4 w-4 ${f.iconColor} ${f.animate?"animate-pulse":""}`}),e.jsx("span",{className:`text-sm font-medium ${f.textColor}`,children:f.text})]})}function Ns({onBack:d}){const{isMobile:l}=ss(),{toast:m}=Ge(),{register:g,handleSubmit:D,formState:{errors:n,isSubmitting:T},reset:f,setValue:r,watch:E,getValues:X,control:H}=$e({resolver:Le(Be),defaultValues:Ee}),p=E(),[I,b]=c.useState(!1),[fe,q]=c.useState([]),[j,A]=c.useState(null),[L,B]=c.useState(null),[G,Q]=c.useState(!1),[be,V]=c.useState("idle"),je=[{value:"ASA",label:"ASA"},{value:"LCA",label:"LCA"},{value:"GWC",label:"GWC"},{value:"OA",label:"OA"},{value:"CBR",label:"CBR"},{value:"WLC",label:"WLC"}],ve=[{value:"exterior",label:"Exterior"},{value:"gym_bleachers",label:"Gym and Bleachers"},{value:"classroom",label:"Classroom"},{value:"cafeteria",label:"Cafeteria"},{value:"utility_storage",label:"Utility Or Storage"},{value:"admin_office",label:"Admin or Office Area"},{value:"hallway",label:"Hallway"},{value:"stairwell",label:"Stairwell"},{value:"restroom",label:"Restroom"},{value:"staff_single_restroom",label:"Staff or Single Restroom"}],[h,P]=c.useState([]);c.useEffect(()=>{Pe(),Ne();const s=_e();console.log("Storage stats:",s)},[]),c.useEffect(()=>{if(j){const s=setTimeout(()=>{Z()},2e3);return()=>clearTimeout(s)}},[p,h,j]);const Ne=()=>{try{const s=ze(J.DRAFT_INSPECTION);s&&(q([s]),b(!0));const t=localStorage.getItem("custodial_inspection_drafts");if(t&&!s){const a=JSON.parse(t).filter(i=>{const v=new Date(i.lastModified),u=new Date;return u.setDate(u.getDate()-7),v>u});a.length>0&&(q(a),b(!0))}}catch(s){console.error("Error loading draft inspections:",s)}},ye=()=>`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Z=async()=>{if(!(!p.school||!p.date)){Q(!0),V("saving");try{const s=j||ye();j||A(s);const t=[];for(const a of h)try{const i=await Me(a);t.push(i)}catch(i){console.error("Failed to process image:",i)}const o={id:s,...p,selectedImages:t,lastModified:new Date().toISOString(),title:`${p.school} - ${p.roomNumber||"Room"} - ${p.locationCategory||"Inspection"}`};Ue(J.DRAFT_INSPECTION,o),B(new Date),V("saved")}catch(s){console.error("Error saving draft:",s),V("error")}finally{Q(!1)}}},Se=s=>{if(r("school",s.school||""),r("date",s.date||""),r("inspectionType",s.inspectionType||"single_room"),r("locationDescription",s.locationDescription||""),r("roomNumber",s.roomNumber||""),r("locationCategory",s.locationCategory||""),r("floors",s.floors||0),r("verticalHorizontalSurfaces",s.verticalHorizontalSurfaces||0),r("ceiling",s.ceiling||0),r("restrooms",s.restrooms||0),r("customerSatisfaction",s.customerSatisfaction||0),r("trash",s.trash||0),r("projectCleaning",s.projectCleaning||0),r("activitySupport",s.activitySupport||0),r("safetyCompliance",s.safetyCompliance||0),r("equipment",s.equipment||0),r("monitoring",s.monitoring||0),r("notes",s.notes||""),s.selectedImages&&s.selectedImages.length>0){const t=s.selectedImages.map((o,a)=>{const i=atob(o.split(",")[1]),v=new Array(i.length);for(let N=0;N<i.length;N++)v[N]=i.charCodeAt(N);const u=new Uint8Array(v);return new File([u],`image_${a}.jpg`,{type:"image/jpeg"})});P(t)}A(s.id),b(!1)},ee=s=>{He(J.DRAFT_INSPECTION);const t=JSON.parse(localStorage.getItem("custodial_inspection_drafts")||"[]"),o=t.filter(a=>a.id!==s);o.length!==t.length&&localStorage.setItem("custodial_inspection_drafts",JSON.stringify(o)),q([]),j===s&&(A(null),B(null))},Ce=()=>{b(!1),A(null),B(null)},se=async s=>{const t=s.target.files;if(t&&t.length>0){const o=Array.from(t),i=5-h.length,v=o.slice(0,i),u=[];let N=0,_=0;for(const x of v)if(N+=x.size,Fe(x,500))try{const S=await Te(x,{maxSizeKB:500});u.push(S.compressedFile),_+=S.compressedSize,console.log(`Compressed ${x.name}: ${W(x.size)} ‚Üí ${W(S.compressedSize)}`)}catch(S){console.error("Failed to compress image:",S),u.push(x),_+=x.size}else u.push(x),_+=x.size;if(P(x=>[...x,...u]),u.length>0){const x=N-_,S=(x/N*100).toFixed(1);m({title:"üì∏ Photos Uploaded Successfully!",description:`Added ${u.length} photo${u.length>1?"s":""} to inspection documentation.${x>0?` Saved ${W(x)} (${S}% compression).`:""}`,duration:3e3})}v.length<o.length&&m({variant:"destructive",title:"Upload Limit Reached",description:`Only ${v.length} photos were added. Maximum of 5 images allowed per inspection.`,duration:5e3}),console.log("Files selected:",u.length,"files")}},we=s=>{P(t=>t.filter((o,a)=>a!==s))},De=async s=>{try{const t=new FormData;Object.entries(s).forEach(([a,i])=>{a!=="images"&&t.append(a,(i==null?void 0:i.toString())||"")}),h.forEach(a=>{t.append("images",a)});const o=await fetch("/api/inspections",{method:"POST",body:t});if(o.ok)m({title:"‚úÖ Inspection Submitted Successfully!",description:`Single area inspection for ${s.school} has been submitted and saved.`,variant:"default",duration:5e3}),j&&ee(j),f(),P([]),A(null),B(null),setTimeout(()=>{d&&d()},6e3);else{const a=await o.json().catch(()=>({message:"Unknown error"}));m({variant:"destructive",title:"Submission Failed",description:`Error: ${a.message||"Unable to submit inspection. Please try again."}`,duration:7e3})}}catch(t){console.error("Error submitting inspection:",t);let o="Submission Failed",a="Unable to submit inspection. Please try again.";t instanceof Error&&(t.message.includes("NetworkError")||t.message.includes("fetch")?(o="Network Error",a="Unable to connect to the server. Please check your connection and try again."):(t.message.includes("validation")||t.message.includes("Invalid"))&&(o="Invalid Data",a="Please check all required fields and try again.")),m({variant:"destructive",title:o,description:a,duration:7e3})}},Ie=c.useCallback((s,t)=>{var o,a;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"Rate this category:"}),e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(i=>e.jsx("button",{type:"button",className:"p-3 min-w-[48px] min-h-[48px] rounded-md hover:bg-yellow-50 transition-colors touch-manipulation flex items-center justify-center",onClick:()=>r(s.key,i),children:e.jsx(de,{className:`w-7 h-7 ${i<=t&&t>0?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-300"}`})},i))}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`px-6 py-3 min-h-[48px] rounded-md border text-sm font-medium transition-colors touch-manipulation ${t===0?"bg-gray-100 border-gray-300 text-gray-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,onClick:()=>r(s.key,0),children:"Not Rated"})})]}),e.jsx("div",{className:"text-center",children:t>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{variant:"secondary",className:"text-sm px-3 py-1",children:(o=O[t-1])==null?void 0:o.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:(a=O[t-1])==null?void 0:a.description})]}):e.jsx(z,{variant:"outline",className:"text-sm px-3 py-1",children:"No rating selected"})}),t>0&&s.criteria&&s.criteria[t]&&e.jsx(C,{className:"bg-blue-50 border-blue-200",children:e.jsx(k,{className:"p-3",children:e.jsxs("div",{className:"text-xs text-blue-800",children:[e.jsxs("strong",{className:"text-sm",children:["Rating ",t," Criteria:"]}),e.jsx("p",{className:"mt-1 leading-relaxed",children:s.criteria[t]})]})})})]})},[r]),ke=c.useCallback((s,t)=>{var o,a;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(w,{type:"button",variant:t===0?"default":"outline",size:"sm",className:"px-4 py-3 text-xs min-h-[48px]",onClick:()=>r(s.key,0),children:"Not Rated"}),[1,2,3,4,5].map(i=>e.jsx(w,{type:"button",variant:"ghost",size:"icon",className:"min-w-[48px] min-h-[48px]",onClick:()=>r(s.key,i),children:e.jsx(de,{className:`w-7 h-7 ${i<=t&&t>0?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},i))]}),e.jsx("div",{className:"text-center px-3",children:t>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{variant:"secondary",className:"text-sm px-3 py-1",children:(o=O[t-1])==null?void 0:o.label}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:(a=O[t-1])==null?void 0:a.description})]}):e.jsx(z,{variant:"outline",className:"text-sm px-3 py-1",children:"No rating selected"})}),t>0&&s.criteria&&s.criteria[t]&&e.jsx(C,{className:"bg-accent/10 border-accent/30",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"text-xs text-accent-foreground",children:[e.jsxs("strong",{className:"text-sm",children:["Rating ",t," Criteria:"]}),e.jsx("p",{className:"mt-1 leading-relaxed",children:s.criteria[t]})]})})})]})},[r]);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{open:I,onOpenChange:b,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Xe,{children:[e.jsx(Qe,{children:"Resume Previous Inspection?"}),e.jsx(Ze,{children:"You have unfinished inspection drafts. Would you like to continue one of them or start a new inspection?"})]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[fe.map(s=>e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last modified: ",new Date(s.lastModified).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["School: ",s.school," ‚Ä¢ Date: ",s.date,s.roomNumber&&` ‚Ä¢ Room: ${s.roomNumber}`]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{size:"sm",onClick:()=>Se(s),children:"Resume"}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>ee(s.id),children:"Delete"})]})]})},s.id)),e.jsx("div",{className:"flex justify-center space-x-4 pt-4",children:e.jsx(w,{onClick:Ce,variant:"outline",children:"Start New Inspection"})})]})]})}),e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx(xe,{className:"mb-4",children:e.jsxs(ue,{children:[e.jsx(Y,{children:e.jsxs(pe,{onClick:d,className:"flex items-center gap-1 cursor-pointer",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only sm:not-sr-only",children:"Home"})]})}),e.jsx(ge,{}),e.jsx(Y,{children:e.jsx(he,{children:"Single Area Inspection"})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Submit Inspection"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Use this form to inspect a single room or location. Example: Cafeteria. If performing a whole building inspection please select that from the previous screen."}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 leading-relaxed",children:[e.jsx("strong",{children:"üìã Important:"})," This form is for inspecting a single room or area using the same rating criteria as the Whole Building Inspection. However, single area inspections are recorded separately and do not automatically count toward a building-wide inspection or monthly metrics. If you're conducting these inspections as part of a comprehensive building review or to meet monthly inspection requirements, you'll need to manually track your progress across all required areas."]})}),(L||G)&&e.jsx("div",{className:"mt-2 flex items-center space-x-2 text-sm text-muted-foreground",children:G?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Saving..."})]}):L?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last saved: ",L.toLocaleTimeString()]})]}):null}),j&&e.jsxs(w,{type:"button",variant:"outline",onClick:Z,disabled:G,className:"mt-4",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Save Draft"]})]}),e.jsxs("form",{onSubmit:D(De),className:"space-y-6",children:[e.jsxs(C,{children:[e.jsxs(M,{children:[e.jsx(U,{children:"Basic Information"}),e.jsx(R,{children:"Enter the basic details for this inspection"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"school",children:"School *"}),e.jsx(te,{name:"school",control:H,render:({field:s})=>e.jsxs(re,{value:s.value,onValueChange:s.onChange,children:[e.jsx(oe,{children:e.jsx(ie,{placeholder:"Select school"})}),e.jsx(le,{children:je.map(t=>e.jsx(ne,{value:t.value,children:t.label},t.value))})]})}),n.school&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.school.message})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"date",children:"Inspection Date *"}),e.jsx($,{id:"date",type:"date",...g("date"),"aria-describedby":"date-help"}),n.date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.date.message}),e.jsx("p",{id:"date-help",className:"text-sm text-muted-foreground mt-1",children:"Select the date when this inspection was conducted"})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"locationCategory",children:"Location Category"}),e.jsx(te,{name:"locationCategory",control:H,render:({field:s})=>e.jsxs(re,{value:s.value,onValueChange:s.onChange,children:[e.jsx(oe,{children:e.jsx(ie,{placeholder:"Select location category"})}),e.jsx(le,{children:ve.map(t=>e.jsx(ne,{value:t.value,children:t.label},t.value))})]})}),n.locationCategory&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.locationCategory.message})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"roomNumber",children:"Room Number"}),e.jsx($,{id:"roomNumber",...g("roomNumber"),placeholder:"e.g., 101, Main Hall"}),n.roomNumber&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.roomNumber.message})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx($,{id:"locationDescription",...g("locationDescription"),placeholder:"e.g., Main Building, Second Floor, Near Library"}),n.locationDescription&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.locationDescription.message})]})]})]}),e.jsxs(C,{children:[e.jsxs(M,{children:[e.jsx(U,{children:"Inspection Categories"}),e.jsx(R,{children:l?"Expand each category to rate it. Detailed criteria will appear when you select a rating.":"Expand each category to rate it based on the criteria (1-5 stars). Detailed criteria will appear when you select a rating."})]}),e.jsx(k,{className:"space-y-4",children:l?ce.map(s=>e.jsx(ae,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:Ie(s,p[s.key])},s.key)):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ce.map(s=>e.jsx(ae,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:ke(s,p[s.key])},s.key))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(C,{children:[e.jsxs(M,{children:[e.jsx(U,{children:"Additional Notes & Observations"}),e.jsx(R,{children:"Detailed observations, specific issues, recommendations, or additional context"})]}),e.jsxs(k,{children:[e.jsx(Je,{...g("notes"),placeholder:`Enter detailed notes about this inspection...

Examples:
‚Ä¢ Specific areas that need attention
‚Ä¢ Safety concerns observed
‚Ä¢ Maintenance recommendations
‚Ä¢ Follow-up actions required
‚Ä¢ Staff performance observations
‚Ä¢ Equipment issues noted`,rows:8,className:"min-h-[200px]","aria-describedby":"notes-help"}),n.notes&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:n.notes.message}),e.jsx("p",{id:"notes-help",className:"text-sm text-muted-foreground mt-2",children:"Provide detailed observations, specific issues, recommendations, or additional context for this inspection"})]})]}),e.jsxs(C,{children:[e.jsxs(M,{children:[e.jsx(U,{children:"Photo Documentation"}),e.jsx(R,{children:"Upload images or take photos to document inspection findings (up to 5 images)"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(y,{htmlFor:"image-upload",className:"cursor-pointer flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors min-h-[48px]",children:[e.jsx(Ve,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"font-medium",children:"Upload Images"})]}),e.jsx($,{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:se,className:"hidden",disabled:h.length>=5})]}),e.jsxs(y,{htmlFor:"camera-capture",className:"cursor-pointer flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors min-h-[48px]",children:[e.jsx(Oe,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"font-medium",children:"Take Photo"})]}),e.jsx($,{id:"camera-capture",type:"file",accept:"image/*",capture:"environment",onChange:se,className:"hidden",disabled:h.length>=5})]})]}),h.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[h.length," of 5 images selected"]}),h.length>=5&&e.jsx("span",{className:"text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded",children:"Maximum reached"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"üì∏ Select multiple images or take photos ‚Ä¢ Up to 5 images ‚Ä¢ JPG, PNG, GIF supported"}),h.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-semibold",children:"Image Previews"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4",children:h.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Preview ${t+1}`,className:"w-full h-32 sm:h-24 object-cover rounded-lg border-2 border-gray-200",loading:"lazy"}),e.jsx("button",{type:"button",onClick:()=>we(t),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 opacity-90 md:opacity-0 md:group-hover:opacity-100 transition-opacity shadow-lg","aria-label":`Remove image ${t+1}`,children:e.jsx(We,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded",children:s.name.length>12?s.name.substring(0,12)+"...":s.name})]},t))})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(w,{type:"submit",size:"lg",disabled:T,className:`bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed ${l?"w-full h-14 text-lg":""}`,children:T?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Submitting..."]}):"Submit Inspection"})})]})]}),T&&e.jsx(ts,{message:"Submitting inspection..."}),e.jsx(rs,{status:be,lastSaved:L})]})}export{Ns as default};
//# sourceMappingURL=custodial-inspection-OUVv_DK3-v6.js.map
