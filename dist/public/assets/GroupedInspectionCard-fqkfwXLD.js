import{r as D,j as e,d as j,g as I,h as E,B as f,f as G,i as U,e as V,A as w,t as y}from"./index-BCpkZOle.js";import{a as S}from"./Combination-g48q4PBV.js";import{C as T}from"./chevron-right-DeIe8JHK.js";import{M as R}from"./map-pin-DiBHj4xb.js";import{a as M}from"./filter-DHQL4k9h.js";import{C as B}from"./calendar-DOcdwSLZ.js";import{S as _}from"./star-C7K7PjQ0.js";const A=({groupName:u,inspections:s,type:c,onInspectionClick:x})=>{const[m,C]=D.useState(!1),p=s.length,i=s.map(n=>{const d=["floors","verticalHorizontalSurfaces","ceiling","restrooms","customerSatisfaction","trash","projectCleaning","activitySupport","safetyCompliance","equipment","monitoring"].map(r=>n[r]).filter(r=>typeof r=="number");return d.length>0?d.reduce((r,t)=>r+t,0)/d.length:null}).filter(n=>n!==null),l=i.length>0?Math.round(i.reduce((n,a)=>n+a,0)/i.length*10)/10:0,o=s.length>0?{earliest:new Date(Math.min(...s.map(n=>new Date(n.date).getTime()))),latest:new Date(Math.max(...s.map(n=>new Date(n.date).getTime())))}:null,h=()=>{switch(c){case"school":return e.jsxDEV(y,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:57,columnNumber:16},void 0);case"date":return e.jsxDEV(B,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:59,columnNumber:16},void 0);case"inspector":return e.jsxDEV(w,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:61,columnNumber:16},void 0);default:return e.jsxDEV(M,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:63,columnNumber:16},void 0)}},b=()=>{switch(c){case"school":return"School";case"date":return"Month";case"inspector":return"Inspector";default:return"Group"}},N=n=>e.jsxDEV("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>e.jsxDEV(_,{className:`w-3 h-3 ${a<=n?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},a,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:84,columnNumber:11},void 0)),e.jsxDEV("span",{className:"ml-1 text-xs text-muted-foreground",children:n.toFixed(1)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:93,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:82,columnNumber:7},void 0),g=()=>{if(!o)return"";const n=a=>a.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${n(o.earliest)} - ${n(o.latest)}`};return e.jsxDEV(j,{className:"w-full",children:[e.jsxDEV(I,{className:"cursor-pointer",onClick:()=>C(!m),children:[e.jsxDEV(E,{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[h(),e.jsxDEV("span",{className:"text-foreground",children:u},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:113,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(f,{variant:"secondary",className:"text-xs",children:[p," inspections"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV(G,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:m?e.jsxDEV(S,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:127,columnNumber:17},void 0):e.jsxDEV(T,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:129,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:117,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:112,columnNumber:9},void 0),e.jsxDEV(U,{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:[b(),": ",u]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:136,columnNumber:13},void 0),o&&e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:g()},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:140,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:135,columnNumber:11},void 0),l>0&&e.jsxDEV("div",{className:"flex items-center gap-1",children:N(Math.round(l))},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:134,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:108,columnNumber:7},void 0),m&&e.jsxDEV(V,{className:"pt-0",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-3 bg-muted/30 rounded-lg",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-lg font-bold text-foreground",children:p},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:159,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Total"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:160,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:158,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-lg font-bold text-primary",children:l.toFixed(1)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:163,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Avg Rating"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:164,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:162,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-lg font-bold text-green-600",children:s.filter(n=>n.inspectionType==="single_room").length},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:167,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Single Room"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:170,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:166,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-lg font-bold text-blue-600",children:s.filter(n=>n.inspectionType==="whole_building").length},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:173,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Building"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:176,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:172,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:157,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Individual Inspections"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:182,columnNumber:15},void 0),s.sort((n,a)=>new Date(a.date).getTime()-new Date(n.date).getTime()).map(n=>{const a=(()=>{const r=["floors","verticalHorizontalSurfaces","ceiling","restrooms","customerSatisfaction","trash","projectCleaning","activitySupport","safetyCompliance","equipment","monitoring"].map(t=>n[t]).filter(t=>typeof t=="number");return r.length>0?Math.round(r.reduce((t,v)=>t+v,0)/r.length*10)/10:0})();return e.jsxDEV("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>x?.(n),children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(R,{className:"w-3 h-3 text-muted-foreground"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:210,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-foreground",children:n.inspectionType==="single_room"?`Room ${n.roomNumber??"Not specified"}`:`Building: ${n.buildingName||n.locationDescription||"Whole Building"}`},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:211,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:209,columnNumber:25},void 0),e.jsxDEV(f,{variant:n.inspectionType==="single_room"?"default":"secondary",className:"text-xs",children:n.inspectionType==="single_room"?"Single Room":"Whole Building"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:218,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:208,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[a>0&&e.jsxDEV("div",{className:"flex items-center gap-1",children:N(Math.round(a))},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:227,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:new Date(n.date).toLocaleDateString()},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:231,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:225,columnNumber:23},void 0)]},n.id,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:203,columnNumber:21},void 0)})]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:181,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:155,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:154,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/components/data/GroupedInspectionCard.tsx",lineNumber:107,columnNumber:5},void 0)};export{A as G};
