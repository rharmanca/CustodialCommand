{"version":3,"file":"whole-building-inspection-CkTAsoYj-v6.js","sources":["../../../src/components/ui/mobile-card.tsx","../../../src/pages/whole-building-inspection.tsx"],"sourcesContent":["\nimport React from 'react';\n\ninterface MobileCardProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n}\n\nexport function MobileCard({ children, className = '', title }: MobileCardProps) {\n  return (\n    <div className={`w-full max-w-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden mx-2 sm:mx-0 ${className}`}>\n      {title && (\n        <div className=\"px-4 sm:px-6 py-4 bg-gradient-to-r from-amber-100 to-orange-100 border-b border-gray-200\">\n          <h3 className=\"text-lg sm:text-xl font-semibold text-amber-900 leading-tight\">{title}</h3>\n        </div>\n      )}\n      <div className=\"p-4 sm:p-6 space-y-4\">\n        {children}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport {\n  saveDraft,\n  loadDraft,\n  clearDraft,\n  STORAGE_KEYS,\n  migrateLegacyDrafts,\n  getStorageStats,\n} from \"@/utils/storage\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MobileCard } from \"@/components/ui/mobile-card\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { CollapsibleSection } from \"@/components/ui/collapsible-section\";\nimport { Star, Check, X, Upload, Camera, Save, Clock } from \"lucide-react\";\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  ratingDescriptions,\n  inspectionCategories,\n} from \"../../shared/custodial-criteria\";\n// Navigation handled by onBack prop\n\ninterface WholeBuildingInspectionPageProps {\n  onBack?: () => void;\n}\n\nexport default function WholeBuildingInspectionPage({\n  onBack,\n}: WholeBuildingInspectionPageProps) {\n  const { isMobile } = useIsMobile();\n  const { toast } = useToast();\n\n  // Prevent unwanted scrolling during interactions\n  useEffect(() => {\n    const preventScroll = (e: Event) => {\n      const target = e.target as HTMLElement;\n      if (\n        target &&\n        typeof target.closest === \"function\" &&\n        target.closest(\"[data-radix-select-content]\")\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n\n    // Add scroll prevention for select dropdowns\n    document.addEventListener(\"scroll\", preventScroll, { passive: false });\n\n    return () => {\n      document.removeEventListener(\"scroll\", preventScroll);\n    };\n  }, []);\n\n  // Define requirements for each category\n  const requirements = {\n    exterior: 2,\n    gym_bleachers: 1,\n    classroom: 3,\n    cafeteria: 1,\n    utility_storage: 1,\n    admin_office: 2,\n    hallway: 3,\n    stairwell: 2,\n    restroom: 2,\n    staff_single_restroom: 1,\n  };\n\n  // Category labels for display\n  const categoryLabels: Record<string, string> = {\n    exterior: \"Exterior\",\n    gym_bleachers: \"Gym and Bleachers\",\n    classroom: \"Classroom\",\n    cafeteria: \"Cafeteria\",\n    utility_storage: \"Utility Or Storage\",\n    admin_office: \"Admin or Office Area\",\n    hallway: \"Hallway\",\n    stairwell: \"Stairwell\",\n    restroom: \"Restroom\",\n    staff_single_restroom: \"Staff or Single Restroom\",\n  };\n\n  // School options\n  const schoolOptions = [\n    { value: \"ASA\", label: \"ASA\" },\n    { value: \"LCA\", label: \"LCA\" },\n    { value: \"GWC\", label: \"GWC\" },\n    { value: \"OA\", label: \"OA\" },\n    { value: \"CBR\", label: \"CBR\" },\n    { value: \"WLC\", label: \"WLC\" },\n  ];\n\n  // Track completed inspections\n  const [completed, setCompleted] = useState<Record<string, number>>(() => {\n    const initial: Record<string, number> = {};\n    Object.keys(requirements).forEach((key) => {\n      initial[key] = 0;\n    });\n    return initial;\n  });\n\n  // Track available inspections and selection state\n  const [availableInspections, setAvailableInspections] = useState<any[]>([]);\n  const [showInspectionSelector, setShowInspectionSelector] = useState(false);\n  const [isResuming, setIsResuming] = useState(false);\n  const [savedInspections, setSavedInspections] = useState<any[]>([]);\n  const [finalized, setFinalized] = useState(false);\n\n  // Form data for current inspection\n  const [formData, setFormData] = useState({\n    inspectorName: \"\",\n    school: \"\",\n    date: \"\",\n    inspectionType: \"whole_building\",\n    locationCategory: \"\",\n    roomNumber: \"\",\n    locationDescription: \"\",\n    floors: -1,\n    verticalHorizontalSurfaces: -1,\n    ceiling: -1,\n    restrooms: -1,\n    customerSatisfaction: -1,\n    trash: -1,\n    projectCleaning: -1,\n    activitySupport: -1,\n    safetyCompliance: -1,\n    equipment: -1,\n    monitoring: -1,\n    notes: \"\",\n    // Add comments field to formData if it's intended to be used\n    comments: \"\",\n  });\n\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [isAllComplete, setIsAllComplete] = useState(false);\n  const [buildingInspectionId, setBuildingInspectionId] = useState<\n    number | null\n  >(null);\n  const [isSubmitting, setIsSubmitting] = useState(false); // State for submission\n\n  // Auto-save state\n  const [lastSaved, setLastSaved] = useState<Date | null>(null);\n  const [isAutoSaving, setIsAutoSaving] = useState(false);\n  const [currentFormDraftId, setCurrentFormDraftId] = useState<string | null>(\n    null\n  );\n\n  // Check if all categories are complete\n  useEffect(() => {\n    const checkCompletion = () => {\n      return Object.entries(requirements).every(([category, required]) => {\n        return completed[category] >= required;\n      });\n    };\n    setIsAllComplete(checkCompletion());\n  }, [completed]);\n\n  // Load available inspections on mount\n  useEffect(() => {\n    const loadAvailableInspections = async () => {\n      try {\n        const response = await fetch(\n          \"/api/inspections?type=whole_building&incomplete=true\"\n        );\n        if (response.ok) {\n          const inspections = await response.json();\n          setAvailableInspections(inspections);\n          if (inspections.length > 0) {\n            setShowInspectionSelector(true);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error loading available inspections:\", error);\n      }\n    };\n\n    loadAvailableInspections();\n    migrateLegacyDrafts();\n    loadFormDraft();\n\n    // Log storage stats for monitoring\n    const stats = getStorageStats();\n    console.log(\"Building inspection storage stats:\", stats);\n  }, []);\n\n  // Auto-save current form state\n  useEffect(() => {\n    if (\n      buildingInspectionId &&\n      selectedCategory &&\n      (formData.inspectorName || formData.school || formData.date)\n    ) {\n      const timeoutId = setTimeout(() => {\n        saveFormDraft();\n      }, 2000); // Auto-save after 2 seconds of inactivity\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [formData, selectedCategory, buildingInspectionId]);\n\n  const generateFormDraftId = () => {\n    return `building_form_${buildingInspectionId}_${selectedCategory}_${Date.now()}`;\n  };\n\n  const saveFormDraft = async () => {\n    if (!buildingInspectionId || !selectedCategory) return;\n\n    setIsAutoSaving(true);\n    try {\n      const draftId = currentFormDraftId || generateFormDraftId();\n      if (!currentFormDraftId) {\n        setCurrentFormDraftId(draftId);\n      }\n\n      const draftData = {\n        id: draftId,\n        buildingInspectionId,\n        selectedCategory,\n        formData: { ...formData },\n        lastModified: new Date().toISOString(),\n        title: `${formData.school} - Building - ${\n          categoryLabels[selectedCategory] || selectedCategory\n        }`,\n      };\n\n      // Use optimized storage system\n      saveDraft(\n        `${STORAGE_KEYS.DRAFT_BUILDING_INSPECTION}_${draftId}`,\n        draftData\n      );\n      setLastSaved(new Date());\n    } catch (error) {\n      console.error(\"Error saving form draft:\", error);\n    } finally {\n      setIsAutoSaving(false);\n    }\n  };\n\n  const loadFormDraft = () => {\n    try {\n      const savedDrafts = localStorage.getItem(\"building_form_drafts\");\n      if (savedDrafts) {\n        const drafts = JSON.parse(savedDrafts);\n        // Clean up old drafts (older than 7 days)\n        const validDrafts = drafts.filter((draft: any) => {\n          const draftDate = new Date(draft.lastModified);\n          const weekAgo = new Date();\n          weekAgo.setDate(weekAgo.getDate() - 7);\n          return draftDate > weekAgo;\n        });\n\n        if (validDrafts.length !== drafts.length) {\n          localStorage.setItem(\n            \"building_form_drafts\",\n            JSON.stringify(validDrafts)\n          );\n        }\n      }\n    } catch (error) {\n      console.error(\"Error loading form drafts:\", error);\n    }\n  };\n\n  const clearCurrentFormDraft = () => {\n    if (currentFormDraftId) {\n      // Clear from optimized storage\n      clearDraft(\n        `${STORAGE_KEYS.DRAFT_BUILDING_INSPECTION}_${currentFormDraftId}`\n      );\n\n      // Also clean up legacy storage\n      const existingDrafts = JSON.parse(\n        localStorage.getItem(\"building_form_drafts\") || \"[]\"\n      );\n      const updatedDrafts = existingDrafts.filter(\n        (d: any) => d.id !== currentFormDraftId\n      );\n      if (updatedDrafts.length !== existingDrafts.length) {\n        localStorage.setItem(\n          \"building_form_drafts\",\n          JSON.stringify(updatedDrafts)\n        );\n      }\n\n      setCurrentFormDraftId(null);\n      setLastSaved(null);\n    }\n  };\n\n  // Function to select an existing inspection\n  const selectInspection = async (inspection: any) => {\n    try {\n      setBuildingInspectionId(inspection.id);\n      const newFormData = {\n        inspectorName: inspection.inspectorName || \"\",\n        school: inspection.school,\n        date: inspection.date,\n        inspectionType: \"whole_building\",\n        locationCategory: \"\",\n        roomNumber: \"\",\n        locationDescription: \"\",\n        floors: -1,\n        verticalHorizontalSurfaces: -1,\n        ceiling: -1,\n        restrooms: -1,\n        customerSatisfaction: -1,\n        trash: -1,\n        projectCleaning: -1,\n        activitySupport: -1,\n        safetyCompliance: -1,\n        equipment: -1,\n        monitoring: -1,\n        notes: \"\",\n        comments: \"\", // Ensure comments is reset or handled\n      };\n      setFormData(newFormData);\n\n      // Load completed rooms for each category\n      const roomResponse = await fetch(\n        `/api/inspections/${inspection.id}/rooms`\n      );\n      if (roomResponse.ok) {\n        const rooms = await roomResponse.json();\n        const completedCount: Record<string, number> = {};\n        Object.keys(requirements).forEach((key) => {\n          completedCount[key] = rooms.filter(\n            (room: any) => room.roomType === key\n          ).length;\n        });\n        setCompleted(completedCount);\n        setIsResuming(true);\n        setShowInspectionSelector(false);\n      }\n    } catch (error) {\n      console.error(\"Error loading inspection:\", error);\n    }\n  };\n\n  // Function to start a new inspection\n  const startNewInspection = () => {\n    // Do not clear building-level fields; preserve inspectorName, school, and date\n    setShowInspectionSelector(false);\n    setIsResuming(false);\n    setBuildingInspectionId(null);\n    setCompleted(() => {\n      const initial: Record<string, number> = {};\n      Object.keys(requirements).forEach((key) => {\n        initial[key] = 0;\n      });\n      return initial;\n    });\n    setFormData((prev) => ({\n      ...prev,\n      inspectionType: \"whole_building\",\n      locationCategory: \"\",\n      roomNumber: \"\",\n      locationDescription: \"\",\n      floors: -1,\n      verticalHorizontalSurfaces: -1,\n      ceiling: -1,\n      restrooms: -1,\n      customerSatisfaction: -1,\n      trash: -1,\n      projectCleaning: -1,\n      activitySupport: -1,\n      safetyCompliance: -1,\n      equipment: -1,\n      monitoring: -1,\n      notes: \"\",\n      comments: \"\",\n    }));\n  };\n\n  const handleInputChange = (field: string, value: string | number) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n  };\n\n  const handleDateChange = (date: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      date,\n    }));\n  };\n\n  const renderMobileStarRating = (\n    category: any,\n    currentRating: number,\n    onRatingChange: (rating: number) => void\n  ) => {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"bg-gray-50 rounded-lg p-4 border\">\n          <div className=\"text-sm font-medium text-gray-700 mb-3 text-center\">\n            Rate this category:\n          </div>\n\n          {/* Star Rating Buttons */}\n          <div className=\"flex justify-center gap-2 mb-4\">\n            {[1, 2, 3, 4, 5].map((star) => (\n              <button\n                key={star}\n                type=\"button\"\n                className=\"p-2 rounded-md hover:bg-yellow-50 transition-colors touch-manipulation\"\n                onClick={() => onRatingChange(star)}\n              >\n                <Star\n                  className={`w-6 h-6 ${\n                    star <= currentRating && currentRating > 0\n                      ? \"fill-yellow-400 text-yellow-400\"\n                      : \"text-muted-foreground hover:text-yellow-300\"\n                  }`}\n                />\n              </button>\n            ))}\n          </div>\n\n          {/* Not Rated Button */}\n          <div className=\"flex justify-center\">\n            <button\n              type=\"button\"\n              className={`px-4 py-2 rounded-md border text-sm font-medium transition-colors touch-manipulation ${\n                currentRating === -1\n                  ? \"bg-muted border-border text-foreground\"\n                  : \"bg-card border-border text-muted-foreground hover:bg-muted\"\n              }`}\n              onClick={() => onRatingChange(-1)}\n            >\n              Not Rated\n            </button>\n          </div>\n        </div>\n\n        {/* Current Rating Status */}\n        <div className=\"text-center\">\n          {currentRating > 0 && currentRating !== -1 ? (\n            <div className=\"space-y-2\">\n              <div className=\"text-base font-semibold text-yellow-600\">\n                {ratingDescriptions[currentRating - 1]?.label}\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {ratingDescriptions[currentRating - 1]?.description}\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-base font-semibold text-gray-600\">\n              No rating selected\n            </div>\n          )}\n        </div>\n\n        {/* Detailed Criteria */}\n        {currentRating > 0 &&\n          currentRating !== -1 &&\n          category?.criteria &&\n          category.criteria[currentRating] && (\n            <div className=\"bg-blue-50 p-3 rounded-lg border border-blue-200\">\n              <div className=\"text-sm font-medium text-blue-900 mb-1\">\n                Detailed Criteria for {currentRating} Star\n                {currentRating > 1 ? \"s\" : \"\"}:\n              </div>\n              <div className=\"text-sm text-blue-800\">\n                {category.criteria[currentRating]}\n              </div>\n            </div>\n          )}\n      </div>\n    );\n  };\n\n  const renderStarRating = (\n    category: any,\n    currentRating: number,\n    onRatingChange: (rating: number) => void\n  ) => {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex justify-center gap-2\">\n          <Button\n            type=\"button\"\n            variant={currentRating === -1 ? \"default\" : \"outline\"}\n            size=\"sm\"\n            className=\"px-3 py-2 text-xs\"\n            onClick={() => onRatingChange(-1)}\n          >\n            Not Rated\n          </Button>\n          {[1, 2, 3, 4, 5].map((star) => (\n            <Button\n              key={star}\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 h-auto\"\n              onClick={() => onRatingChange(star)}\n            >\n              <Star\n                className={`w-6 h-6 ${\n                  star <= currentRating && currentRating > 0\n                    ? \"fill-yellow-400 text-yellow-400\"\n                    : \"text-gray-300\"\n                }`}\n              />\n            </Button>\n          ))}\n        </div>\n\n        {/* Current Rating Status */}\n        <div className=\"text-center\">\n          {currentRating > 0 && currentRating !== -1 ? (\n            <div className=\"space-y-2\">\n              <div className=\"text-lg font-semibold text-yellow-600\">\n                {ratingDescriptions[currentRating - 1]?.label}\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {ratingDescriptions[currentRating - 1]?.description}\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-lg font-semibold text-gray-600\">\n              No rating selected\n            </div>\n          )}\n        </div>\n\n        {/* Detailed Criteria */}\n        {currentRating > 0 &&\n          currentRating !== -1 &&\n          category?.criteria &&\n          category.criteria[currentRating] && (\n            <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n              <div className=\"text-sm font-medium text-blue-900 mb-2\">\n                Detailed Criteria for {currentRating} Star\n                {currentRating > 1 ? \"s\" : \"\"}:\n              </div>\n              <div className=\"text-sm text-blue-800\">\n                {category.criteria[currentRating]}\n              </div>\n            </div>\n          )}\n      </div>\n    );\n  };\n\n  const resetCurrentForm = () => {\n    setFormData((prev) => ({\n      ...prev,\n      inspectionType: \"whole_building\",\n      locationCategory: selectedCategory || \"\",\n      roomNumber: \"\",\n      locationDescription: \"\",\n      floors: -1,\n      verticalHorizontalSurfaces: -1,\n      ceiling: -1,\n      restrooms: -1,\n      customerSatisfaction: -1,\n      trash: -1,\n      projectCleaning: -1,\n      activitySupport: -1,\n      safetyCompliance: -1,\n      equipment: -1,\n      monitoring: -1,\n      notes: \"\",\n      comments: \"\", // Ensure comments is reset\n    }));\n\n    // Clear form draft state\n    setCurrentFormDraftId(null);\n    setLastSaved(null);\n  };\n\n  const handleCategorySelect = (category: string) => {\n    // Store current scroll position\n    const currentScrollY = window.scrollY;\n\n    setSelectedCategory(category);\n    setShowInspectionSelector(false);\n\n    // Clear room-specific fields when switching categories to prevent data persistence\n    setFormData((prev) => ({\n      ...prev,\n      roomNumber: \"\",\n      locationDescription: \"\",\n      locationCategory: category,\n      floors: -1,\n      verticalHorizontalSurfaces: -1,\n      ceiling: -1,\n      restrooms: -1,\n      customerSatisfaction: -1,\n      trash: -1,\n      projectCleaning: -1,\n      activitySupport: -1,\n      safetyCompliance: -1,\n      equipment: -1,\n      monitoring: -1,\n      notes: \"\",\n      comments: \"\",\n    }));\n\n    // Prevent automatic scroll to top with multiple methods\n    requestAnimationFrame(() => {\n      window.scrollTo({ top: currentScrollY, behavior: \"instant\" });\n    });\n\n    // Also set a timeout as backup\n    setTimeout(() => {\n      window.scrollTo({ top: currentScrollY, behavior: \"instant\" });\n    }, 10);\n\n    setTimeout(() => {\n      window.scrollTo({ top: currentScrollY, behavior: \"instant\" });\n    }, 50);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedCategory) {\n      toast({\n        title: \"Category Required\",\n        description: \"Please select a category before submitting.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Validation\n    const requiredFields = [\"inspectorName\", \"school\", \"date\"];\n    const missingFields = requiredFields.filter(\n      (field) => !formData[field as keyof typeof formData]\n    );\n\n    if (missingFields.length > 0) {\n      toast({\n        title: \"Missing Required Fields\",\n        description: `Please fill in: ${missingFields.join(\", \")}`,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      // Prepare submission data that matches the database schema\n      const submissionData = {\n        inspectorName: formData.inspectorName,\n        school: formData.school,\n        date: formData.date,\n        inspectionType: \"whole_building\",\n        locationDescription: formData.locationDescription || `Building inspection for ${selectedCategory}`,\n        roomNumber: formData.roomNumber || null,\n        locationCategory: selectedCategory,\n        buildingName: null, // Building name is not currently captured in the form\n        buildingInspectionId: buildingInspectionId || null,\n        floors: formData.floors >= 0 ? formData.floors : null,\n        verticalHorizontalSurfaces: formData.verticalHorizontalSurfaces >= 0 ? formData.verticalHorizontalSurfaces : null,\n        ceiling: formData.ceiling >= 0 ? formData.ceiling : null,\n        restrooms: formData.restrooms >= 0 ? formData.restrooms : null,\n        customerSatisfaction: formData.customerSatisfaction >= 0 ? formData.customerSatisfaction : null,\n        trash: formData.trash >= 0 ? formData.trash : null,\n        projectCleaning: formData.projectCleaning >= 0 ? formData.projectCleaning : null,\n        activitySupport: formData.activitySupport >= 0 ? formData.activitySupport : null,\n        safetyCompliance: formData.safetyCompliance >= 0 ? formData.safetyCompliance : null,\n        equipment: formData.equipment >= 0 ? formData.equipment : null,\n        monitoring: formData.monitoring >= 0 ? formData.monitoring : null,\n        notes: formData.notes || null,\n        images: [], // No images for building-level submissions\n        verifiedRooms: [], // Will be populated when individual rooms are submitted\n        isCompleted: false // Will be set to true when all categories are complete\n      };\n\n      console.log(\"Submitting building inspection:\", submissionData);\n\n      const response = await fetch(\"/api/submit-building-inspection\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n        body: JSON.stringify(submissionData),\n      });\n\n      const contentType = response.headers.get(\"content-type\") || \"\";\n      let result: any = null;\n      let rawText: string | null = null;\n\n      try {\n        if (contentType.includes(\"application/json\")) {\n          result = await response.json();\n        } else {\n          rawText = await response.text();\n        }\n      } catch (parseErr) {\n        // Fallback to text if JSON parsing fails\n        try {\n          rawText = await response.text();\n        } catch {}\n      }\n\n      console.log(\"Submission response status:\", response.status, \"ctype:\", contentType);\n      if (result) console.log(\"Submission response JSON:\", result);\n      if (!result && rawText) console.log(\"Submission response TEXT:\", rawText.slice(0, 300));\n\n      if (!response.ok) {\n        const serverMsg = (result && (result.message || result.error)) || rawText || null;\n        throw new Error(serverMsg || `HTTP error! status: ${response.status}`);\n      }\n\n      // Treat as success if server indicates success or returned an id\n      if ((result && (result.success || result.id)) || response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Building inspection submitted successfully!\",\n        });\n\n        // Set buildingInspectionId from the first successful submission for finalization\n        if (result && result.id && !buildingInspectionId) {\n          console.log(\"Setting buildingInspectionId from first submission:\", result.id);\n          setBuildingInspectionId(result.id);\n        }\n\n        // Update completed count for this category\n        if (selectedCategory) {\n          setCompleted((prev) => ({\n            ...prev,\n            [selectedCategory]: (prev[selectedCategory] || 0) + 1\n          }));\n        }\n\n        // Clear the current form draft\n        clearCurrentFormDraft();\n\n        // Reset only room-specific fields, preserve inspector information\n        setFormData((prev) => ({\n          ...prev, // Preserve inspectorName, school, date, and other building-level info\n          roomNumber: \"\",\n          locationDescription: \"\",\n          notes: \"\",\n          floors: -1,\n          verticalHorizontalSurfaces: -1,\n          ceiling: -1,\n          restrooms: -1,\n          customerSatisfaction: -1,\n          trash: -1,\n          projectCleaning: -1,\n          activitySupport: -1,\n          safetyCompliance: -1,\n          equipment: -1,\n          monitoring: -1,\n        }));\n\n        // Clear selectedCategory to prevent validation warning from showing\n        setSelectedCategory(null);\n      } else {\n        throw new Error(result.message || \"Submission failed\");\n      }\n    } catch (error) {\n      console.error(\"Building inspection submission error:\", error);\n\n      // Provide more specific error messages\n      let errorMessage =\n        \"Failed to save inspection. Please check your connection and try again.\";\n\n      if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n        errorMessage = \"Network error. Please check your internet connection.\";\n      } else if (error instanceof Error) {\n        if (error.message.includes(\"404\")) {\n          errorMessage = \"Server endpoint not found. Please contact support.\";\n        } else if (error.message.includes(\"500\")) {\n          errorMessage = \"Server error. Please try again later.\";\n        } else if (error.message && error.message !== \"Submission failed\") {\n          errorMessage = error.message;\n        }\n      }\n\n      toast({\n        title: \"Submission Failed\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleFinalSubmit = async () => {\n    if (!isAllComplete) {\n      console.error(\n        \"Please complete all required inspections before finalizing.\"\n      );\n      return;\n    }\n\n    console.log(\"Attempting to finalize building inspection:\", { buildingInspectionId, isAllComplete });\n\n    if (!buildingInspectionId) {\n      console.error(\"No building inspection ID available for finalization\");\n      toast({\n        title: \"Finalization Failed\",\n        description: \"No building inspection ID found. Please start a new inspection.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      // Try finalize endpoint first\n      console.log(`Calling finalize endpoint: /api/inspections/${buildingInspectionId}/finalize`);\n      const finalizeResp = await fetch(`/api/inspections/${buildingInspectionId}/finalize`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n\n      console.log(\"Finalize response status:\", finalizeResp.status);\n      \n      let ok = finalizeResp.ok;\n      let errorMessage = null;\n\n      if (!ok) {\n        // Get error from finalize attempt\n        try {\n          const finalizeError = await finalizeResp.json();\n          errorMessage = finalizeError.error || finalizeError.message;\n          console.log(\"Finalize endpoint error:\", finalizeError);\n        } catch (e) {\n          const finalizeText = await finalizeResp.text();\n          console.log(\"Finalize endpoint error (text):\", finalizeText.slice(0, 200));\n          errorMessage = finalizeText;\n        }\n\n        // Fallback to PATCH if finalize route is unavailable\n        console.log(`Trying PATCH fallback: /api/inspections/${buildingInspectionId}`);\n        const patchResp = await fetch(`/api/inspections/${buildingInspectionId}`, {\n          method: \"PATCH\",\n          headers: { \n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n          },\n          body: JSON.stringify({ isCompleted: true }),\n        });\n        \n        console.log(\"PATCH response status:\", patchResp.status);\n        ok = patchResp.ok;\n        \n        if (!ok) {\n          try {\n            const errData = await patchResp.json();\n            errorMessage = errData.error || errData.message || 'Failed to finalize inspection';\n            console.log(\"PATCH endpoint error:\", errData);\n          } catch (e) {\n            const patchText = await patchResp.text();\n            console.log(\"PATCH endpoint error (text):\", patchText.slice(0, 200));\n            errorMessage = patchText || 'Failed to finalize inspection';\n          }\n          throw new Error(errorMessage);\n        }\n      }\n\n      // Mark as finalized to display banner\n      setFinalized(true);\n\n      // Show success toast notification\n      toast({\n        title: \"üéâ You Did Your Duty, Thank You! üéâ\",\n        description:\n          \"Outstanding work! Your complete building inspection has been submitted successfully. Ready to start a new inspection when you return home.\",\n        duration: 5000,\n      });\n\n      console.log(\"Whole building inspection completed successfully!\");\n\n      // Optional: navigate back after a short delay if onBack is provided\n      setTimeout(() => {\n        if (onBack) onBack();\n      }, 3000);\n    } catch (error) {\n      console.error(\"Error finalizing inspection:\", error);\n\n      // Show error toast notification\n      toast({\n        title: \"Finalization Failed\",\n        description:\n          \"Failed to finalize building inspection. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl space-y-6\">\n      {/* Primary call-to-action placed above progress table */}\n      {!showInspectionSelector && (\n        <Card className=\"border-primary/30\">\n          <CardContent className=\"py-4 flex items-center justify-between gap-4\">\n            <div className=\"space-y-1\">\n              <div className=\"font-semibold\">Start New Building Inspection</div>\n              <div className=\"text-sm text-muted-foreground\">Guided, step-by-step workflow to complete all required areas</div>\n            </div>\n            <Button\n              onClick={startNewInspection}\n              className=\"bg-primary text-primary-foreground hover:bg-primary/90\"\n            >\n              üè¢ Start New Building Inspection\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n      {finalized && (\n        <Card className=\"border-green-300 bg-green-50\">\n          <CardContent className=\"py-4 flex items-center justify-between gap-4\">\n            <div>\n              <div className=\"font-semibold text-green-800\">Building Inspection Finalized</div>\n              <div className=\"text-sm text-green-700\">Your comprehensive inspection has been submitted successfully.</div>\n            </div>\n            <Button\n              onClick={() => {\n                setFinalized(false);\n                startNewInspection();\n              }}\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              Start New Building Inspection\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n      <div className=\"mb-6\">\n        {onBack && (\n          <div className=\"flex justify-start mb-4\">\n            <Button\n              variant=\"outline\"\n              onClick={onBack}\n              className=\"flex-shrink-0 back-button\"\n            >\n              ‚Üê Back\n            </Button>\n          </div>\n        )}\n\n        <div className=\"flex justify-center px-4\">\n          <Collapsible className=\"w-full max-w-lg\">\n            <CollapsibleTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                className=\"w-full p-3 h-auto font-normal text-center text-primary hover:text-primary/80 hover:bg-accent/10 border border-accent/30 rounded-lg text-sm sm:text-base leading-relaxed\"\n              >\n                üìã How to conduct a whole building inspection ‚Üì\n              </Button>\n            </CollapsibleTrigger>\n            <CollapsibleContent className=\"mt-3 p-4 bg-accent/10 rounded-lg border border-accent/30\">\n              <div className=\"space-y-3 text-sm text-muted-foreground\">\n                <div>\n                  <h4 className=\"font-semibold text-primary mb-1\">\n                    Step 1: Getting Started\n                  </h4>\n                  <p>\n                    Enter your inspector name, select the school, and choose the\n                    inspection date. This information will be saved\n                    automatically.\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-primary mb-1\">\n                    Step 2: Complete Required Inspections\n                  </h4>\n                  <p>\n                    Each category below shows how many inspections are required\n                    (e.g., 3 Classrooms, 2 Restrooms). Click \"Select\" on any\n                    incomplete category to start inspecting that area type.\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-primary mb-1\">\n                    Step 3: Rate Each Area\n                  </h4>\n                  <p>\n                    For each room/area, rate the custodial performance using the\n                    1-5 star system you're familiar with. Add room numbers and\n                    notes as needed.\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-primary mb-1\">\n                    Step 4: Track Progress\n                  </h4>\n                  <p>\n                    Your progress is saved automatically. Green checkmarks show\n                    completed categories. Return anytime to continue where you\n                    left off.\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-primary mb-1\">\n                    Step 5: Finalize\n                  </h4>\n                  <p>\n                    Once all required inspections are complete, the \"Finalize\n                    Building Inspection\" button will become available to submit\n                    your comprehensive inspection.\n                  </p>\n                </div>\n              </div>\n            </CollapsibleContent>\n          </Collapsible>\n        </div>\n      </div>\n      {/* Inspection Selector */}\n      {showInspectionSelector && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Building Inspection Options</CardTitle>\n            <CardDescription>\n              You can continue a previous inspection or start a new one\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Start New Inspection - More Prominent */}\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-900 text-lg\">\n                Start New Inspection:\n              </h4>\n              <Button\n                onClick={startNewInspection}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 border-2 border-green-600 hover:border-green-700 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-lg\"\n                variant=\"default\"\n                size=\"lg\"\n              >\n                üè¢ Start New Building Inspection\n              </Button>\n              <p className=\"text-sm text-gray-600 text-center\">\n                Begin a fresh comprehensive building inspection\n              </p>\n            </div>\n\n            {availableInspections.length > 0 && (\n              <>\n                <Separator />\n                <div className=\"space-y-3\">\n                  <h4 className=\"font-medium text-gray-900\">\n                    Or Continue Previous Inspection:\n                  </h4>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto border-2 border-amber-300 rounded-lg p-3 bg-amber-25 shadow-inner\">\n                    <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-amber-200\">\n                      <span className=\"text-sm font-medium text-amber-800\">\n                        Available Inspections\n                      </span>\n                      <span className=\"text-xs text-amber-600 bg-amber-100 px-2 py-1 rounded-full\">\n                        {availableInspections.length} found\n                      </span>\n                    </div>\n                    {availableInspections.map((inspection, index) => (\n                      <div\n                        key={inspection.id}\n                        className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-amber-100 bg-amber-50 border-amber-200 transition-colors\"\n                      >\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full font-medium\">\n                              #{index + 1}\n                            </span>\n                            <div className=\"font-medium text-amber-900\">\n                              {inspection.school}\n                            </div>\n                          </div>\n                          <div className=\"text-sm text-amber-700 mt-1\">\n                            {new Date(inspection.date).toLocaleDateString()}\n                            {inspection.inspectorName && (\n                              <span className=\"block text-sm text-amber-800 font-medium\">\n                                Inspector: {inspection.inspectorName}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                        {!inspection.isCompleted ? (\n                          <Button\n                            onClick={() => selectInspection(inspection)}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"border-amber-400 text-amber-700 hover:bg-amber-100 font-medium\"\n                          >\n                            Continue\n                          </Button>\n                        ) : (\n                          <Badge variant=\"default\" className=\"bg-green-500\">\n                            Completed ‚úì\n                          </Badge>\n                        )}\n                      </div>\n                    ))}\n                    {availableInspections.length > 3 && (\n                      <div className=\"text-center py-2 border-t border-amber-200 mt-2\">\n                        <span className=\"text-xs text-amber-600 bg-amber-100 px-3 py-1 rounded-full\">\n                          ‚Üï Scroll to see all {availableInspections.length}{\" \"}\n                          inspections\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-gray-500 text-center mt-2\">\n                    These inspections were started but not completed\n                  </p>\n                </div>\n              </>\n            )}\n          </CardContent>\n        </Card>\n      )}\n      {/* School and Date Selection */}\n      {!isResuming && !showInspectionSelector && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Building Information</CardTitle>\n            <CardDescription>\n              Select the school and date for this inspection\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"inspectorName\">Inspector Name *</Label>\n                <Input\n                  id=\"inspectorName\"\n                  value={formData.inspectorName}\n                  onChange={(e) =>\n                    handleInputChange(\"inspectorName\", e.target.value)\n                  }\n                  placeholder=\"Enter inspector name\"\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"school\">School</Label>\n                <Select\n                  value={formData.school}\n                  onValueChange={(value) => handleInputChange(\"school\", value)}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select school\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {schoolOptions.map((school) => (\n                      <SelectItem key={school.value} value={school.value}>\n                        {school.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"date\">Date</Label>\n                <Input\n                  id=\"date\"\n                  type=\"date\"\n                  value={formData.date}\n                  onChange={(e) => handleInputChange(\"date\", e.target.value)}\n                  required\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n      {/* Current Inspection Info (when resuming) */}\n      {isResuming && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Current Inspection</CardTitle>\n            <CardDescription>Continuing inspection progress</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-medium\">Inspector:</span>\n                <span>{formData.inspectorName || \"Not specified\"}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-medium\">School:</span>\n                <span>{formData.school}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-medium\">Date:</span>\n                <span>{new Date(formData.date).toLocaleDateString()}</span>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <Button\n                onClick={() => {\n                  setShowInspectionSelector(true);\n                  setIsResuming(false);\n                  setBuildingInspectionId(null);\n                }}\n                variant=\"outline\"\n                size=\"sm\"\n              >\n                Switch to Different Inspection\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n      {/* Dynamic Checklist */}\n      {!showInspectionSelector &&\n        (isMobile ? (\n          <MobileCard title=\"Inspection Progress\" data-inspection-progress>\n            <p className=\"text-sm text-gray-600 mb-4\">\n              Complete the required number of inspections for each category\n              {formData.school && formData.date && (\n                <span className=\"block text-xs text-gray-500 mt-1\">\n                  (Progress is automatically saved)\n                </span>\n              )}\n            </p>\n            <div className=\"space-y-3\">\n              {Object.entries(requirements).map(([category, required]) => {\n                const completedCount = completed[category];\n                const isComplete = completedCount >= required;\n\n                return (\n                  <div\n                    key={category}\n                    className={`p-3 rounded-lg border ${\n                      isComplete\n                        ? \"bg-green-50 border-green-200\"\n                        : selectedCategory === category\n                        ? \"bg-blue-50 border-blue-300 border-2\"\n                        : \"bg-gray-50 border-gray-200\"\n                    }`}\n                  >\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start gap-3 flex-1\">\n                        <div\n                          className={`w-6 h-6 rounded-sm border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${\n                            isComplete\n                              ? \"bg-green-500 border-green-500\"\n                              : \"border-gray-400\"\n                          }`}\n                        >\n                          {isComplete && (\n                            <Check className=\"w-4 h-4 text-white\" />\n                          )}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <span\n                            className={`font-medium text-sm block leading-tight ${\n                              isComplete ? \"text-green-800\" : \"text-gray-700\"\n                            }`}\n                          >\n                            {categoryLabels[category]}\n                          </span>\n                          <div className=\"flex items-center justify-between mt-2\">\n                            <Badge\n                              variant={isComplete ? \"default\" : \"secondary\"}\n                              className=\"text-xs\"\n                            >\n                              {completedCount}/{required} Done\n                            </Badge>\n                            {!isComplete &&\n                              formData.school &&\n                              formData.date &&\n                              formData.inspectorName.trim() && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleCategorySelect(category)}\n                                  className={`text-xs px-3 py-1 h-7 ${\n                                    selectedCategory === category\n                                      ? \"border-blue-500 bg-blue-50\"\n                                      : \"\"\n                                  }`}\n                                >\n                                  Select\n                                </Button>\n                              )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </MobileCard>\n        ) : (\n          <Card data-inspection-progress>\n            <CardHeader>\n              <CardTitle>Inspection Progress</CardTitle>\n              <CardDescription>\n                Complete the required number of inspections for each category\n                {formData.school && formData.date && (\n                  <span className=\"text-sm text-gray-500 ml-2\">\n                    (Progress is automatically saved)\n                  </span>\n                )}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {Object.entries(requirements).map(([category, required]) => {\n                const completedCount = completed[category];\n                const isComplete = completedCount >= required;\n\n                return (\n                  <div\n                    key={category}\n                    className={`flex items-center justify-between p-3 rounded-lg border ${\n                      isComplete\n                        ? \"bg-green-50 border-green-200\"\n                        : selectedCategory === category\n                        ? \"bg-blue-50 border-blue-300 border-2\"\n                        : \"bg-gray-50 border-gray-200\"\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div\n                        className={`w-6 h-6 rounded-sm border-2 flex items-center justify-center ${\n                          isComplete\n                            ? \"bg-green-500 border-green-500\"\n                            : \"border-gray-400\"\n                        }`}\n                      >\n                        {isComplete && <Check className=\"w-4 h-4 text-white\" />}\n                      </div>\n                      <span\n                        className={`font-medium ${\n                          isComplete ? \"text-green-800\" : \"text-gray-700\"\n                        }`}\n                      >\n                        {categoryLabels[category]}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <Badge variant={isComplete ? \"default\" : \"secondary\"}>\n                        {completedCount}/{required} Completed\n                      </Badge>\n                      {!isComplete &&\n                        formData.school &&\n                        formData.date &&\n                        formData.inspectorName.trim() && (\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => handleCategorySelect(category)}\n                            className={\n                              selectedCategory === category\n                                ? \"border-blue-500\"\n                                : \"\"\n                            }\n                          >\n                            Select\n                          </Button>\n                        )}\n                    </div>\n                  </div>\n                );\n              })}\n            </CardContent>\n          </Card>\n        ))}\n      {/* Help message when form is not showing */}\n      {!showInspectionSelector &&\n        selectedCategory &&\n        !(\n          formData.school &&\n          formData.date &&\n          formData.inspectorName.trim()\n        ) && (\n          <Card className=\"border-amber-200 bg-amber-50\">\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                  <span className=\"text-white text-sm font-bold\">!</span>\n                </div>\n                <div>\n                  <h4 className=\"font-medium text-amber-800 mb-1\">\n                    Complete Required Information\n                  </h4>\n                  <p className=\"text-sm text-amber-700\">\n                    Please fill in all required fields above before you can\n                    start rating this category:\n                  </p>\n                  <ul className=\"text-sm text-amber-700 mt-2 space-y-1\">\n                    {!formData.inspectorName.trim() && (\n                      <li>‚Ä¢ Inspector Name is required</li>\n                    )}\n                    {!formData.school && (\n                      <li>‚Ä¢ School selection is required</li>\n                    )}\n                    {!formData.date && <li>‚Ä¢ Inspection date is required</li>}\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n      {/* Inspection Form */}\n      {!showInspectionSelector &&\n        selectedCategory &&\n        formData.school &&\n        formData.date &&\n        formData.inspectorName.trim() && (\n          <form\n            onSubmit={handleSubmit}\n            className={`space-y-4 ${isMobile ? \"\" : \"space-y-6\"}`}\n          >\n            {isMobile ? (\n              <MobileCard\n                title={`Inspecting: ${categoryLabels[selectedCategory]}`}\n              >\n                {lastSaved && (\n                  <div className=\"flex items-center gap-2 mb-4 text-sm text-muted-foreground\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>Auto-saved at {lastSaved.toLocaleTimeString()}</span>\n                  </div>\n                )}\n                {isAutoSaving && (\n                  <div className=\"flex items-center gap-2 mb-4 text-sm text-blue-600\">\n                    <Save className=\"w-4 h-4 animate-pulse\" />\n                    <span>Saving...</span>\n                  </div>\n                )}\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label\n                      htmlFor=\"roomNumber\"\n                      className=\"text-base font-medium\"\n                    >\n                      Room Number\n                    </Label>\n                    <Input\n                      id=\"roomNumber\"\n                      className=\"h-12 text-base\"\n                      value={formData.roomNumber}\n                      onChange={(e) =>\n                        handleInputChange(\"roomNumber\", e.target.value)\n                      }\n                      placeholder=\"Enter room number\"\n                      required\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label\n                      htmlFor=\"locationDescription\"\n                      className=\"text-base font-medium\"\n                    >\n                      Location Description\n                    </Label>\n                    <Input\n                      id=\"locationDescription\"\n                      className=\"h-12 text-base\"\n                      value={formData.locationDescription}\n                      onChange={(e) =>\n                        handleInputChange(\"locationDescription\", e.target.value)\n                      }\n                      placeholder=\"e.g., Main Building, Second Floor\"\n                    />\n                  </div>\n                </div>\n              </MobileCard>\n            ) : (\n              <Card>\n                <CardHeader>\n                  <CardTitle>\n                    Inspecting: {categoryLabels[selectedCategory]}\n                  </CardTitle>\n                  <CardDescription>\n                    Complete the inspection for this category\n                    {lastSaved && (\n                      <div className=\"flex items-center gap-2 mt-2 text-sm text-muted-foreground\">\n                        <Clock className=\"w-4 h-4\" />\n                        <span>\n                          Auto-saved at {lastSaved.toLocaleTimeString()}\n                        </span>\n                      </div>\n                    )}\n                    {isAutoSaving && (\n                      <div className=\"flex items-center gap-2 mt-2 text-sm text-blue-600\">\n                        <Save className=\"w-4 h-4 animate-pulse\" />\n                        <span>Saving...</span>\n                      </div>\n                    )}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"roomNumber\">Room Number</Label>\n                      <Input\n                        id=\"roomNumber\"\n                        value={formData.roomNumber}\n                        onChange={(e) =>\n                          handleInputChange(\"roomNumber\", e.target.value)\n                        }\n                        placeholder=\"Enter room number\"\n                        required\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"locationDescription\">\n                        Location Description\n                      </Label>\n                      <Input\n                        id=\"locationDescription\"\n                        value={formData.locationDescription}\n                        onChange={(e) =>\n                          handleInputChange(\n                            \"locationDescription\",\n                            e.target.value\n                          )\n                        }\n                        placeholder=\"e.g., Main Building, Second Floor\"\n                      />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Rating Categories - Collapsible sections */}\n            {isMobile ? (\n              <MobileCard title=\"Rate Each Category\">\n                <div className=\"space-y-4\">\n                  {inspectionCategories.map((category, index) => (\n                    <CollapsibleSection\n                      key={category.key}\n                      title={category.label}\n                      defaultCollapsed={true}\n                      className=\"border border-gray-200\"\n                      titleClassName=\"text-left font-medium\"\n                      contentClassName=\"space-y-3\"\n                    >\n                      {renderMobileStarRating(\n                        category,\n                        formData[\n                          category.key as keyof typeof formData\n                        ] as number,\n                        (rating: number) =>\n                          handleInputChange(\n                            category.key as keyof typeof formData,\n                            rating\n                          )\n                      )}\n                    </CollapsibleSection>\n                  ))}\n                </div>\n              </MobileCard>\n            ) : (\n              <div className=\"grid gap-4 grid-cols-1 lg:grid-cols-2\">\n                {inspectionCategories.map((category, index) => {\n                  const key = category.key as keyof typeof formData;\n                  return (\n                    <CollapsibleSection\n                      key={category.key}\n                      title={category.label}\n                      defaultCollapsed={true}\n                      className=\"border border-gray-200\"\n                      titleClassName=\"text-left font-medium\"\n                      contentClassName=\"space-y-3\"\n                    >\n                      {renderStarRating(\n                        category,\n                        formData[key] as number,\n                        (rating) => handleInputChange(key, rating)\n                      )}\n                    </CollapsibleSection>\n                  );\n                })}\n              </div>\n            )}\n\n            {/* Notes */}\n            {isMobile ? (\n              <MobileCard title=\"Additional Notes\">\n                <Textarea\n                  value={formData.notes}\n                  onChange={(e) => handleInputChange(\"notes\", e.target.value)}\n                  placeholder=\"Enter any additional observations...\"\n                  rows={4}\n                  className=\"text-base min-h-[120px]\"\n                />\n              </MobileCard>\n            ) : (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Additional Notes</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <Textarea\n                    value={formData.notes}\n                    onChange={(e) => handleInputChange(\"notes\", e.target.value)}\n                    placeholder=\"Enter any additional observations...\"\n                    rows={4}\n                  />\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Image Upload */}\n            {isMobile ? (\n              <MobileCard title=\"Photo Documentation\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex flex-col gap-3\">\n                    <Label htmlFor=\"image-upload\" className=\"cursor-pointer\">\n                      <div className=\"flex items-center gap-2 px-4 py-3 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors\">\n                        <Upload className=\"w-5 h-5\" />\n                        <span className=\"text-base\">Upload Images</span>\n                      </div>\n                      <Input\n                        id=\"image-upload\"\n                        type=\"file\"\n                        multiple\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                          if (e.target.files && e.target.files.length > 0) {\n                            toast({\n                              title: \"üì∏ Photos Uploaded Successfully!\",\n                              description: `Added ${\n                                e.target.files.length\n                              } photo${\n                                e.target.files.length > 1 ? \"s\" : \"\"\n                              } to room inspection documentation.`,\n                              duration: 3000,\n                            });\n                            console.log(\n                              \"Files selected:\",\n                              e.target.files.length,\n                              \"files\"\n                            );\n                            e.target.value = \"\"; // Reset input to allow selecting same files again\n                          }\n                        }}\n                        className=\"hidden\"\n                      />\n                    </Label>\n\n                    <Label htmlFor=\"camera-capture\" className=\"cursor-pointer\">\n                      <div className=\"flex items-center gap-2 px-4 py-3 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors\">\n                        <Camera className=\"w-5 h-5\" />\n                        <span className=\"text-base\">Take Photo</span>\n                      </div>\n                      <Input\n                        id=\"camera-capture\"\n                        type=\"file\"\n                        accept=\"image/*\"\n                        capture=\"environment\"\n                        onChange={(e) => {\n                          if (e.target.files && e.target.files.length > 0) {\n                            toast({\n                              title: \"üì∑ Photo Captured Successfully!\",\n                              description:\n                                \"Camera photo has been added to your inspection documentation.\",\n                              duration: 3000,\n                            });\n                            console.log(\n                              \"Camera photo taken:\",\n                              e.target.files[0].name\n                            );\n                            e.target.value = \"\"; // Reset input to allow selecting same files again\n                          }\n                        }}\n                        className=\"hidden\"\n                      />\n                    </Label>\n                  </div>\n                  <p className=\"text-sm text-gray-500\">\n                    Upload existing images or take new photos to document the\n                    inspection\n                  </p>\n                </div>\n              </MobileCard>\n            ) : (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Photo Documentation</CardTitle>\n                  <CardDescription>\n                    Upload images or take photos to document the inspection\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex gap-2\">\n                    <Label\n                      htmlFor=\"image-upload-desktop\"\n                      className=\"cursor-pointer\"\n                    >\n                      <div className=\"flex items-center gap-2 px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors\">\n                        <Upload className=\"w-4 h-4\" />\n                        <span>Upload Images</span>\n                      </div>\n                      <Input\n                        id=\"image-upload-desktop\"\n                        type=\"file\"\n                        multiple\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                          if (e.target.files && e.target.files.length > 0) {\n                            toast({\n                              title: \"üì∏ Photos Uploaded Successfully!\",\n                              description: `Added ${\n                                e.target.files.length\n                              } photo${\n                                e.target.files.length > 1 ? \"s\" : \"\"\n                              } to room inspection documentation.`,\n                              duration: 3000,\n                            });\n                            console.log(\n                              \"Files selected:\",\n                              e.target.files.length,\n                              \"files\"\n                            );\n                            e.target.value = \"\"; // Reset input to allow selecting same files again\n                          }\n                        }}\n                        className=\"hidden\"\n                      />\n                    </Label>\n\n                    <Label\n                      htmlFor=\"camera-capture-desktop\"\n                      className=\"cursor-pointer\"\n                    >\n                      <div className=\"flex items-center gap-2 px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors\">\n                        <Camera className=\"w-4 h-4\" />\n                        <span>Take Photo</span>\n                      </div>\n                      <Input\n                        id=\"camera-capture-desktop\"\n                        type=\"file\"\n                        accept=\"image/*\"\n                        capture=\"environment\"\n                        onChange={(e) => {\n                          if (e.target.files && e.target.files.length > 0) {\n                            toast({\n                              title: \"üì∑ Photo Captured Successfully!\",\n                              description:\n                                \"Camera photo has been added to your inspection documentation.\",\n                              duration: 3000,\n                            });\n                            console.log(\n                              \"Camera photo taken:\",\n                              e.target.files[0].name\n                            );\n                            e.target.value = \"\"; // Reset input to allow selecting same files again\n                          }\n                        }}\n                        className=\"hidden\"\n                      />\n                    </Label>\n                  </div>\n                  <p className=\"text-sm text-gray-500\">\n                    Select multiple images from your device or take new photos\n                    with your camera\n                  </p>\n                </CardContent>\n              </Card>\n            )}\n\n            <Button\n              type=\"submit\"\n              size=\"lg\"\n              className={`w-full bg-blue-600 hover:bg-blue-700 ${\n                isMobile ? \"h-14 text-lg\" : \"\"\n              }`}\n              disabled={isSubmitting} // Disable button while submitting\n            >\n              {isSubmitting\n                ? \"Submitting...\"\n                : `Submit ${categoryLabels[selectedCategory]} Inspection`}\n            </Button>\n          </form>\n        )}\n      {/* Final Submit Button */}\n      {!showInspectionSelector && (\n        <div className={`border-t ${isMobile ? \"pt-4\" : \"pt-6\"}`}>\n          <Button\n            onClick={handleFinalSubmit}\n            size=\"lg\"\n            className={`w-full bg-green-600 hover:bg-green-700 ${\n              isMobile ? \"h-14 text-base\" : \"\"\n            }`}\n            disabled={!isAllComplete}\n          >\n            {isMobile\n              ? \"Finalize Building Inspection\"\n              : \"Finalize Whole Building Inspection\"}\n          </Button>\n          {!isAllComplete && (\n            <p\n              className={`text-center text-gray-500 mt-2 ${\n                isMobile ? \"text-xs px-2\" : \"text-sm\"\n              }`}\n            >\n              {isMobile\n                ? \"Complete all required inspections first\"\n                : \"Complete all required inspections to enable this button\"}\n            </p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["MobileCard","children","className","title","jsxs","jsx","WholeBuildingInspectionPage","onBack","isMobile","useIsMobile","toast","useToast","useEffect","preventScroll","e","target","requirements","categoryLabels","schoolOptions","completed","setCompleted","useState","initial","key","availableInspections","setAvailableInspections","showInspectionSelector","setShowInspectionSelector","isResuming","setIsResuming","savedInspections","setSavedInspections","finalized","setFinalized","formData","setFormData","selectedCategory","setSelectedCategory","isAllComplete","setIsAllComplete","buildingInspectionId","setBuildingInspectionId","isSubmitting","setIsSubmitting","lastSaved","setLastSaved","isAutoSaving","setIsAutoSaving","currentFormDraftId","setCurrentFormDraftId","category","required","response","inspections","error","migrateLegacyDrafts","loadFormDraft","stats","getStorageStats","timeoutId","saveFormDraft","generateFormDraftId","draftId","draftData","saveDraft","STORAGE_KEYS","savedDrafts","drafts","validDrafts","draft","draftDate","weekAgo","clearCurrentFormDraft","clearDraft","existingDrafts","updatedDrafts","d","selectInspection","inspection","newFormData","roomResponse","rooms","completedCount","room","startNewInspection","prev","handleInputChange","field","value","renderMobileStarRating","currentRating","onRatingChange","star","Star","renderStarRating","Button","handleCategorySelect","currentScrollY","handleSubmit","missingFields","submissionData","contentType","result","rawText","serverMsg","errorMessage","handleFinalSubmit","finalizeResp","ok","finalizeError","finalizeText","patchResp","errData","patchText","Card","CardContent","Collapsible","CollapsibleTrigger","CollapsibleContent","CardHeader","CardTitle","CardDescription","Fragment","Separator","index","Badge","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","school","SelectItem","isComplete","Check","Clock","Save","inspectionCategories","CollapsibleSection","rating","Textarea","Upload","Camera"],"mappings":"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"}