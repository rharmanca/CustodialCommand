var ne=Object.defineProperty,le=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var W=(d,m,l)=>m in d?ne(d,m,{enumerable:!0,configurable:!0,writable:!0,value:l}):d[m]=l,G=(d,m)=>{for(var l in m||(m={}))me.call(m,l)&&W(d,l,m[l]);if(Y)for(var l of Y(m))de.call(m,l)&&W(d,l,m[l]);return d},q=(d,m)=>le(d,oe(m));var K=(d,m,l)=>new Promise((R,c)=>{var S=t=>{try{D(l.next(t))}catch(b){c(b)}},k=t=>{try{D(l.throw(t))}catch(b){c(b)}},D=t=>t.done?R(t.value):Promise.resolve(t.value).then(S,k);D((l=l.apply(d,m)).next())});import{r as h,j as e,x as F,y as ce,F as v,p as J,i as ue,w as Ne,z as he,E as pe}from"./vendor-CMBJxBzW-v6.js";import{a as be,b4 as p,B as U,C as y,b as O,c as L,d as fe,e as w,U as _,b5 as ge,b6 as xe,T as Ce,g as ve,h as x,i as C,b7 as De,b8 as je,b9 as T,j as $,ba as Ee,bb as Ve,bc as Ue,bd as ye,be as we,bf as Te,bg as Re,bh as Se}from"./index-Bmw8JvtW-v6.js";import"./pdf-export-BdvsPuIF-v6.js";import"./charts-core-BWDZW6UT-v6.js";import"./ui-BA32w1ww-v6.js";import"./utils-Cj9wHvoQ-v6.js";import"./forms-HLAU01A5-v6.js";function ze({onBack:d}){const{toast:m}=be(),[l,R]=h.useState([]),[c,S]=h.useState([]),[k,D]=h.useState(!0),[t,b]=h.useState(null),[ke,Ie]=h.useState("school"),[n,I]=h.useState({search:"",dateRange:{from:null,to:null},schools:[],severityLevels:[],categories:[],inspectors:[],ratingThreshold:0,inspectionType:"all",showProblemsOnly:!1,hasCustodialNotes:!1}),[z,Q]=h.useState(!1),X={1:"Unacceptable",2:"Below Standard",3:"Acceptable",4:"Ordinary Tidiness",5:"Orderly Spotlessness"},j=[{key:"floors",label:"Floors"},{key:"verticalHorizontalSurfaces",label:"Vertical and Horizontal Surfaces"},{key:"ceiling",label:"Ceiling"},{key:"restrooms",label:"Restrooms"},{key:"customerSatisfaction",label:"Customer Satisfaction and Coordination"},{key:"trash",label:"Trash"},{key:"projectCleaning",label:"Project Cleaning"},{key:"activitySupport",label:"Activity Support"},{key:"safetyCompliance",label:"Safety and Compliance"},{key:"equipment",label:"Equipment"},{key:"monitoring",label:"Monitoring"}];h.useEffect(()=>{Z()},[]);const Z=()=>K(null,null,function*(){try{const[s,a]=yield Promise.all([fetch("/api/inspections"),fetch("/api/custodial-notes")]);if(s.ok){const i=yield s.json();R(i)}if(a.ok){const i=yield a.json();S(i)}}catch(s){console.error("Error fetching data:",s)}finally{D(!1)}}),u=s=>{const a=j.map(r=>s[r.key]).filter(r=>typeof r=="number");if(a.length===0)return null;const i=a.reduce((r,N)=>r+N,0)/a.length;return Math.round(i*10)/10},A=s=>e.jsxDEV("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>e.jsxDEV(J,{className:`w-4 h-4 ${a<=s?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},a,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:132,columnNumber:11},this)),e.jsxDEV("span",{className:"ml-2 text-sm text-gray-600",children:X[s]},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:141,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:130,columnNumber:7},this),H=h.useMemo(()=>{const s=new Set(l.map(a=>a.school).filter(Boolean));return Array.from(s).sort()},[l]),o=h.useMemo(()=>l.filter(s=>{var a;if(n.search&&![s.school,(a=s.roomNumber)==null?void 0:a.toString(),s.locationDescription,s.buildingName,s.notes].filter(Boolean).join(" ").toLowerCase().includes(n.search.toLowerCase()))return!1;if(n.dateRange.from||n.dateRange.to){const i=new Date(s.date);if(n.dateRange.from&&i<n.dateRange.from||n.dateRange.to&&i>n.dateRange.to)return!1}if(n.schools.length>0&&!n.schools.includes(s.school)||n.inspectors.length>0&&s.inspectorName&&!n.inspectors.includes(s.inspectorName)||n.inspectionType!=="all"&&(n.inspectionType==="single_room"&&s.inspectionType!=="single_room"||n.inspectionType==="whole_building"&&s.inspectionType!=="whole_building"))return!1;if(n.ratingThreshold>0){const i=u(s);if(i===null||i<n.ratingThreshold)return!1}if(n.severityLevels.length>0){const i=u(s);if(i===null)return!1;const r=i<2?"critical":i<3?"needs-attention":"acceptable";if(!n.severityLevels.includes(r))return!1}if(n.showProblemsOnly){const i=u(s);if(i===null||i>=3)return!1}return!(n.hasCustodialNotes&&!c.some(r=>r.school===s.school))}),[l,c,n]),E=(()=>{const s=new Date,a=new Date(s.getFullYear(),s.getMonth()-1,s.getDate());new Date(s.getFullYear(),s.getMonth()-2,s.getDate());const i=o.filter(f=>new Date(f.date)>=new Date(s.getFullYear(),s.getMonth(),1)),r=o.filter(f=>{const g=new Date(f.date);return g>=new Date(a.getFullYear(),a.getMonth(),1)&&g<new Date(s.getFullYear(),s.getMonth(),1)}),N=r.length>0?(i.length-r.length)/r.length*100:0,B=i.length>0?i.reduce((f,g)=>{const P=u(g);return f+(P||0)},0)/i.length:0,M=r.length>0?r.reduce((f,g)=>{const P=u(g);return f+(P||0)},0)/r.length:0,te=M>0?(B-M)/M*100:0;return{inspectionTrend:Math.round(N*10)/10,ratingTrend:Math.round(te*10)/10}})(),ee=s=>{const a=u(s);return a===null?null:a<2?{level:"critical",color:"#EF4444",icon:Ne,label:"Critical"}:a<3?{level:"needs-attention",color:"#F59E0B",icon:he,label:"Needs Attention"}:{level:"acceptable",color:"#10B981",icon:pe,label:"Acceptable"}},se=()=>{const s=o.reduce((a,i)=>{const r=new Date(i.date).toISOString().slice(0,7);a[r]||(a[r]={date:r,ratings:[],totalInspections:0});const N=u(i);return N!==null&&(a[r].ratings.push(N),a[r].totalInspections++),a},{});return Object.values(s).map(a=>({date:a.date,averageRating:a.ratings.length>0?Math.round(a.ratings.reduce((i,r)=>i+r,0)/a.ratings.length*10)/10:0,totalInspections:a.totalInspections})).sort((a,i)=>a.date.localeCompare(i.date))},ae=()=>{const s=o.reduce((a,i)=>{a[i.school]||(a[i.school]={school:i.school,ratings:[],totalInspections:0,singleRoomCount:0,wholeBuildingCount:0});const r=u(i);return r!==null&&a[i.school].ratings.push(r),a[i.school].totalInspections++,i.inspectionType==="single_room"?a[i.school].singleRoomCount++:a[i.school].wholeBuildingCount++,a},{});return Object.values(s).map(a=>q(G({},a),{averageRating:a.ratings.length>0?Math.round(a.ratings.reduce((i,r)=>i+r,0)/a.ratings.length*10)/10:0}))},ie=()=>{const s=j.reduce((a,i)=>(a[i.key]={category:i.label,ratings:[],totalRatings:0},a),{});return o.forEach(a=>{j.forEach(i=>{const r=a[i.key];typeof r=="number"&&(s[i.key].ratings.push(r),s[i.key].totalRatings++)})}),Object.values(s).map(a=>({category:a.category,rating:a.ratings.length>0?Math.round(a.ratings.reduce((i,r)=>i+r,0)/a.ratings.length*10)/10:0,fullMark:5}))},re=()=>o.filter(s=>s.inspectionType==="single_room"&&s.roomNumber).map(s=>({number:s.roomNumber,rating:u(s)||0,school:s.school,lastInspection:s.date})),V=h.useMemo(()=>{const s=o.length,a=c.length,i=o.length>0?Math.round(o.map(u).filter(N=>N!==null).reduce((N,B)=>N+B,0)/o.length*10)/10:0,r=new Set(o.map(N=>N.school)).size;return{totalInspections:s,totalNotes:a,avgRating:i,schools:r}},[o,c]);return k?e.jsxDEV("div",{className:"container mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(p,{className:"h-10 w-32"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:463,columnNumber:11},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:462,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV(p,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:467,columnNumber:11},this),e.jsxDEV(p,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:468,columnNumber:11},this),e.jsxDEV(p,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:469,columnNumber:11},this),e.jsxDEV(p,{className:"h-24 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:470,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:466,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxDEV(p,{className:"h-64 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:474,columnNumber:11},this),e.jsxDEV(p,{className:"h-64 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:475,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:473,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(p,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:479,columnNumber:11},this),e.jsxDEV(p,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:480,columnNumber:11},this),e.jsxDEV(p,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:481,columnNumber:11},this),e.jsxDEV(p,{className:"h-12 w-full"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:482,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:478,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:461,columnNumber:7},this):t?e.jsxDEV("div",{className:"container mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(U,{onClick:()=>b(null),variant:"outline",children:"← Back to Inspections"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:492,columnNumber:11},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:491,columnNumber:9},this),e.jsxDEV(y,{className:"max-w-4xl mx-auto",children:[e.jsxDEV(O,{children:[e.jsxDEV(L,{className:"flex items-center gap-2",children:[e.jsxDEV(F,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:500,columnNumber:15},this),"Inspection Details"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:499,columnNumber:13},this),e.jsxDEV(fe,{children:t.inspectionType==="single_room"?`Room ${t.roomNumber} at ${t.school}`:`Building: ${t.buildingName||t.locationDescription||"Whole Building"} at ${t.school}`},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:503,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:498,columnNumber:11},this),e.jsxDEV(w,{children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Inspection Information"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:514,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Date:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:516,columnNumber:24},this)," ",new Date(t.date).toLocaleDateString()]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:516,columnNumber:21},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"School:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:517,columnNumber:24},this)," ",t.school]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:517,columnNumber:21},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Type:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:518,columnNumber:24},this)," ",t.inspectionType==="single_room"?"Single Room":"Whole Building"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:518,columnNumber:21},this),t.roomNumber&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Room:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:519,columnNumber:58},this)," ",t.roomNumber]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:519,columnNumber:55},this),t.buildingName&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Building:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:520,columnNumber:60},this)," ",t.buildingName]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:520,columnNumber:57},this),!t.buildingName&&t.inspectionType==="whole_building"&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Building:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:521,columnNumber:119},this)," ",t.locationDescription||"Whole Building"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:521,columnNumber:116},this),t.locationDescription&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Location:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:522,columnNumber:67},this)," ",t.locationDescription]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:522,columnNumber:64},this),t.inspectorName&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Inspector:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:523,columnNumber:61},this)," ",t.inspectorName]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:523,columnNumber:58},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:515,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:513,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Overall Rating"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:527,columnNumber:19},this),(()=>{const s=u(t);return s!==null?A(Math.round(s)):e.jsxDEV("span",{className:"text-gray-500",children:"No ratings available"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:530,columnNumber:74},this)})()]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:526,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:512,columnNumber:15},this),e.jsxDEV(_,{},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:535,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-4",children:"Category Ratings"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:538,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(s=>{const a=t[s.key];return e.jsxDEV("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxDEV("span",{className:"font-medium",children:s.label},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:544,columnNumber:25},this),typeof a=="number"?e.jsxDEV("div",{className:"flex items-center gap-2",children:A(a)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:546,columnNumber:27},this):e.jsxDEV("span",{className:"text-gray-500 text-sm",children:"Not rated"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:550,columnNumber:27},this)]},s.key,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:543,columnNumber:23},this)})},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:539,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:537,columnNumber:15},this),t.notes&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(_,{},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:560,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Additional Notes"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:562,columnNumber:21},this),e.jsxDEV("p",{className:"text-gray-700",children:t.notes},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:563,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:561,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:559,columnNumber:17},this),t.images&&t.images.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(_,{},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:570,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-4",children:"Images"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:572,columnNumber:22},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.images.map((s,a)=>e.jsxDEV("div",{className:"border rounded-lg overflow-hidden",children:e.jsxDEV("img",{src:s,alt:`Inspection image ${a+1}`,className:"w-full h-48 object-cover"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:576,columnNumber:23},this)},a,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:575,columnNumber:21},this))},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:573,columnNumber:22},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:571,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:569,columnNumber:18},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:511,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:510,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:497,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:490,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-background",children:e.jsxDEV("div",{className:"container mx-auto px-4 py-6 content-visibility-auto layout-contained",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV(U,{onClick:s=>{s.preventDefault(),s.stopPropagation(),d&&d()},variant:"outline",className:"mb-4 back-button",children:"← Back to Main Menu"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:598,columnNumber:11},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Enhanced Data & Reports"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:610,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Advanced analytics and visualizations for custodial data"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:611,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:609,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:597,columnNumber:9},this),e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(ge,{filters:n,onApplyPreset:I,schools:H},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:617,columnNumber:9},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:616,columnNumber:7},this),e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(xe,{inspections:l,custodialNotes:c,filters:n,onFiltersChange:I,onClearFilters:()=>I({search:"",dateRange:{from:null,to:null},schools:[],severityLevels:[],categories:[],inspectors:[],ratingThreshold:0,inspectionType:"all",showProblemsOnly:!1,hasCustodialNotes:!1}),isOpen:z,onToggle:()=>Q(!z)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:626,columnNumber:9},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:625,columnNumber:7},this),e.jsxDEV(Ce,{defaultValue:"overview",className:"w-full",children:[e.jsxDEV("div",{className:"sticky top-0 z-10 bg-background border-b",children:e.jsxDEV(ve,{className:"grid w-full grid-cols-7",children:[e.jsxDEV(x,{value:"overview",children:"Overview"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:651,columnNumber:15},this),e.jsxDEV(x,{value:"problems",children:"Problem Areas"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:652,columnNumber:15},this),e.jsxDEV(x,{value:"charts",children:"Charts"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:653,columnNumber:15},this),e.jsxDEV(x,{value:"school",children:"By School"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:654,columnNumber:15},this),e.jsxDEV(x,{value:"date",children:"By Date"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:655,columnNumber:15},this),e.jsxDEV(x,{value:"inspector",children:"By Inspector"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:656,columnNumber:15},this),e.jsxDEV(x,{value:"notes",children:"Custodial Notes"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:657,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:650,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:649,columnNumber:11},this),e.jsxDEV(C,{value:"overview",className:"mt-6",children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Overview"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:666,columnNumber:19},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Key performance indicators and recent inspections"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:667,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:665,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(De,{inspections:o,custodialNotes:c,trigger:e.jsxDEV(U,{variant:"outline",children:[e.jsxDEV(ce,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:675,columnNumber:25},this),"Export Overview"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:674,columnNumber:23},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:670,columnNumber:19},this),e.jsxDEV(je,{inspections:o,custodialNotes:c,availableSchools:H,availableCategories:j,trigger:e.jsxDEV(U,{type:"button",variant:"outline",className:"flex items-center gap-2",children:[e.jsxDEV(v,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:687,columnNumber:25},this),"Export PDF Report"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:686,columnNumber:23},this),onExportComplete:()=>{m({title:"Export Complete",description:"Your PDF report has been generated successfully."})}},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:680,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:669,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:664,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxDEV(T,{title:"Total Inspections",value:V.totalInspections,description:"All time inspections",icon:v,color:"primary",trend:E.inspectionTrend!==0?{value:E.inspectionTrend,period:"vs last month"}:void 0},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:702,columnNumber:17},this),e.jsxDEV(T,{title:"Average Rating",value:`${V.avgRating}/5`,description:"Overall performance",icon:J,color:"success",trend:E.ratingTrend!==0?{value:E.ratingTrend,period:"vs last month"}:void 0},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:713,columnNumber:17},this),e.jsxDEV(T,{title:"Schools",value:V.schools,description:"Active locations",icon:F,color:"secondary"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:724,columnNumber:17},this),e.jsxDEV(T,{title:"Custodial Notes",value:V.totalNotes,description:"Issues reported",icon:v,color:"warning"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:731,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:701,columnNumber:15},this),e.jsxDEV(y,{children:[e.jsxDEV(O,{children:e.jsxDEV(L,{className:"flex items-center gap-2",children:[e.jsxDEV(ue,{className:"w-5 h-5 text-primary"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:744,columnNumber:21},this),"Recent Activity"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:743,columnNumber:19},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:742,columnNumber:25},this),e.jsxDEV(w,{children:e.jsxDEV("div",{className:"space-y-4",children:o.slice(0,5).map(s=>{var i;const a=ee(s);return e.jsxDEV("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(F,{className:"w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:755,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("p",{className:"font-medium text-foreground",children:s.school},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:758,columnNumber:33},this),a&&a.level!=="acceptable"&&e.jsxDEV($,{variant:a.level==="critical"?"destructive":"secondary",className:"text-xs",children:[e.jsxDEV(a.icon,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:764,columnNumber:37},this),a.label]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:760,columnNumber:35},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:757,columnNumber:31},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:s.inspectionType==="single_room"?`Room ${(i=s.roomNumber)!=null?i:"Not specified"}`:`Building: ${s.buildingName||s.locationDescription||"Whole Building"}`},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:769,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:756,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:754,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[(()=>{const r=u(s);return r!==null?A(Math.round(r)):e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"N/A"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:780,columnNumber:84},this)})(),e.jsxDEV($,{variant:"outline",children:new Date(s.date).toLocaleDateString()},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:782,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:777,columnNumber:27},this)]},s.id,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:753,columnNumber:25},this)})},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:749,columnNumber:27},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:748,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:741,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:662,columnNumber:11},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:661,columnNumber:11},this),e.jsxDEV(C,{value:"problems",className:"mt-6",children:e.jsxDEV(Ee,{inspections:o,custodialNotes:c,onInspectionClick:b,onExportReport:()=>{}},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:796,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:795,columnNumber:11},this),e.jsxDEV(C,{value:"charts",className:"mt-6",children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(Ve,{data:se(),title:"Performance Trends Over Time",description:"Average ratings and inspection volume by month"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:808,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV(Ue,{data:ae(),title:"School Performance Comparison",description:"Average ratings and inspection counts by school"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:815,columnNumber:17},this),e.jsxDEV(ye,{data:ie(),title:"Category Performance Analysis",description:"Performance ratings across all inspection categories"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:821,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:814,columnNumber:15},this),e.jsxDEV(we,{data:re(),title:"Room Performance Heatmap",description:"Visual overview of room performance ratings",maxRoomsPerRow:8},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:828,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:807,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:806,columnNumber:11},this),e.jsxDEV(C,{value:"school",className:"mt-6",children:e.jsxDEV(Te,{inspections:o,onInspectionClick:b},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:838,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:837,columnNumber:11},this),e.jsxDEV(C,{value:"date",className:"mt-6",children:e.jsxDEV(Re,{inspections:o,onInspectionClick:b},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:845,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:844,columnNumber:11},this),e.jsxDEV(C,{value:"inspector",className:"mt-6",children:e.jsxDEV(Se,{inspections:o,onInspectionClick:b},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:852,columnNumber:13},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:851,columnNumber:11},this),e.jsxDEV(C,{value:"notes",className:"mt-6",children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(v,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:862,columnNumber:19},this),"Custodial Notes (",c.length,")"]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:861,columnNumber:17},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:860,columnNumber:15},this),c.length===0?e.jsxDEV(y,{children:e.jsxDEV(w,{className:"text-center py-8",children:[e.jsxDEV(v,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:870,columnNumber:21},this),e.jsxDEV("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Custodial Notes"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:871,columnNumber:21},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"No custodial notes have been submitted yet."},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:872,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:869,columnNumber:21},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:868,columnNumber:19},this):e.jsxDEV("div",{className:"grid gap-4",children:c.map(s=>e.jsxDEV(y,{className:"hover:shadow-lg transition-shadow",children:[e.jsxDEV(O,{children:e.jsxDEV(L,{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(v,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:882,columnNumber:29},this),s.school]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:881,columnNumber:29},this),e.jsxDEV($,{variant:"outline",children:new Date(s.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:885,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:880,columnNumber:27},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:879,columnNumber:25},this),e.jsxDEV(w,{children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Location:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:893,columnNumber:31},this),e.jsxDEV("p",{className:"text-foreground",children:[s.location," - ",s.locationDescription]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:894,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:892,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Notes:"},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:897,columnNumber:31},this),e.jsxDEV("p",{className:"text-foreground",children:s.notes},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:898,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:896,columnNumber:29},this),e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:e.jsxDEV("span",{children:["Created: ",new Date(s.createdAt).toLocaleString()]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:901,columnNumber:31},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:900,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:891,columnNumber:27},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:890,columnNumber:25},this)]},s.id,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:878,columnNumber:21},this))},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:876,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:859,columnNumber:15},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:858,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:648,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:596,columnNumber:7},this)},void 0,!1,{fileName:"/Users/rharman/CustodialCommand/src/pages/inspection-data.tsx",lineNumber:595,columnNumber:5},this)}export{ze as default};
