var _e=Object.defineProperty,qe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var de=(p,l,d)=>l in p?_e(p,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):p[l]=d,D=(p,l)=>{for(var d in l||(l={}))He.call(l,d)&&de(p,d,l[d]);if(ce)for(var d of ce(l))Le.call(l,d)&&de(p,d,l[d]);return p},F=(p,l)=>qe(p,Be(l));var A=(p,l,d)=>new Promise((h,u)=>{var _=y=>{try{g(d.next(y))}catch(k){u(k)}},Q=y=>{try{g(d.throw(y))}catch(k){u(k)}},g=y=>y.done?h(y.value):Promise.resolve(y.value).then(_,Q);g((d=d.apply(p,l)).next())});import{r as x,j as e,C as me,U as Me,B as Ue,b as Re,A as Ge,c as Je,P as We,d as Ye,e as Qe,D as Ve,f as Ke,g as Z,H as Xe,h as xe,i as pe,k as he,l as ue,m as ge,n as Ze,o as es,p as be,q as ss}from"./vendor-yOkX1T9n-v6.js";import{u as ts,a as rs,J as as,K as is,M as os,N as fe,O as ls,C as N,e as v,B as b,P as ns,Q as cs,R as ds,b as z,c as E,d as O,U as ms,j as ee,L as S,I,S as xs,p as ps,q as hs,r as us,s as gs,V as je,W as Ne,X as ve,Y as se,Z as U,H as ye,_ as we,t as Ce,$ as bs,a0 as Y,a1 as fs,a2 as js}from"./index-DdeSxun1-v6.js";import"./ui-BA32w1ww-v6.js";import"./utils-Cj9wHvoQ-v6.js";import"./forms-BJ8Awwap-v6.js";import"./charts-core-ghokHKd6-v6.js";import"./pdf-export-JyY94Pcb-v6.js";function Ts({onBack:p}){const{isMobile:l}=ts(),{toast:d}=rs();x.useEffect(()=>{const s=t=>{const a=t.target;a&&typeof a.closest=="function"&&a.closest("[data-radix-select-content]")&&(t.preventDefault(),t.stopPropagation())};return document.addEventListener("scroll",s,{passive:!1}),()=>{document.removeEventListener("scroll",s)}},[]);const h={exterior:2,gym_bleachers:1,classroom:3,cafeteria:1,utility_storage:1,admin_office:2,hallway:3,stairwell:2,restroom:2,staff_single_restroom:1},u={exterior:"Exterior",gym_bleachers:"Gym and Bleachers",classroom:"Classroom",cafeteria:"Cafeteria",utility_storage:"Utility Or Storage",admin_office:"Admin or Office Area",hallway:"Hallway",stairwell:"Stairwell",restroom:"Restroom",staff_single_restroom:"Staff or Single Restroom"},_={exterior:Ke,gym_bleachers:Ve,classroom:Qe,cafeteria:Ye,utility_storage:We,admin_office:Je,hallway:Ge,stairwell:Re,restroom:Ue,staff_single_restroom:Me},Q=[{value:"ASA",label:"ASA"},{value:"LCA",label:"LCA"},{value:"GWC",label:"GWC"},{value:"OA",label:"OA"},{value:"CBR",label:"CBR"},{value:"WLC",label:"WLC"}],[g,y]=x.useState(()=>{const s={};return Object.keys(h).forEach(t=>{s[t]=0}),s}),[k,Se]=x.useState([]),[w,q]=x.useState(!1),[R,V]=x.useState(!1);x.useState([]);const[Ie,te]=x.useState(!1),[r,B]=x.useState({inspectorName:"",school:"",date:new Date().toISOString().split("T")[0],inspectionType:"whole_building",locationCategory:"",roomNumber:"",locationDescription:"",floors:-1,verticalHorizontalSurfaces:-1,ceiling:-1,restrooms:-1,customerSatisfaction:-1,trash:-1,projectCleaning:-1,activitySupport:-1,safetyCompliance:-1,equipment:-1,monitoring:-1,notes:"",comments:""}),[n,re]=x.useState(null),[G,ke]=x.useState(!1),[f,J]=x.useState(null),[H,ae]=x.useState(!1),[T,L]=x.useState({}),[W,ie]=x.useState(null),[oe,le]=x.useState(!1),[M,ne]=x.useState(null);x.useEffect(()=>{ke(Object.entries(h).every(([t,a])=>g[t]>=a))},[g]);const $=x.useMemo(()=>{const s=Object.values(h).reduce((m,j)=>m+j,0),t=Object.values(g).reduce((m,j)=>m+j,0),a=Object.entries(h).filter(([m,j])=>g[m]>=j).length,i=Object.entries(h).filter(([m,j])=>g[m]>0&&g[m]<j).length,o=Object.keys(h).length-a-i,c=s>0?Math.round(t/s*100):0;return{totalRequired:s,totalCompleted:t,completedCategories:a,inProgressCategories:i,notStartedCategories:o,overallPercentage:c,totalCategories:Object.keys(h).length}},[g,h]);x.useEffect(()=>{A(null,null,function*(){try{const a=yield fetch("/api/inspections?type=whole_building&incomplete=true");if(a.ok){const i=yield a.json();Se(i),i.length>0&&q(!0)}}catch(a){console.error("Error loading available inspections:",a)}}),as(),$e();const t=is();console.log("Building inspection storage stats:",t)},[]),x.useEffect(()=>{if(f&&n&&(r.inspectorName||r.school||r.date)){const s=setTimeout(()=>{Te()},2e3);return()=>clearTimeout(s)}},[r,n,f]);const De=()=>`building_form_${f}_${n}_${Date.now()}`,Te=()=>A(null,null,function*(){if(!(!f||!n)){le(!0);try{const s=M||De();M||ne(s);const t={id:s,buildingInspectionId:f,selectedCategory:n,formData:D({},r),lastModified:new Date().toISOString(),title:`${r.school} - Building - ${u[n]||n}`};os(`${fe.DRAFT_BUILDING_INSPECTION}_${s}`,t),ie(new Date)}catch(s){console.error("Error saving form draft:",s)}finally{le(!1)}}}),$e=()=>{try{const s=localStorage.getItem("building_form_drafts");if(s){const t=JSON.parse(s),a=t.filter(i=>{const o=new Date(i.lastModified),c=new Date;return c.setDate(c.getDate()-7),o>c});a.length!==t.length&&localStorage.setItem("building_form_drafts",JSON.stringify(a))}}catch(s){console.error("Error loading form drafts:",s)}},Fe=()=>{if(M){js(`${fe.DRAFT_BUILDING_INSPECTION}_${M}`);const s=JSON.parse(localStorage.getItem("building_form_drafts")||"[]"),t=s.filter(a=>a.id!==M);t.length!==s.length&&localStorage.setItem("building_form_drafts",JSON.stringify(t)),ne(null),ie(null)}},Pe=s=>A(null,null,function*(){try{J(s.id);const t={inspectorName:s.inspectorName||"",school:s.school,date:s.date,inspectionType:"whole_building",locationCategory:"",roomNumber:"",locationDescription:"",floors:-1,verticalHorizontalSurfaces:-1,ceiling:-1,restrooms:-1,customerSatisfaction:-1,trash:-1,projectCleaning:-1,activitySupport:-1,safetyCompliance:-1,equipment:-1,monitoring:-1,notes:"",comments:""};B(t);const a=yield fetch(`/api/inspections/${s.id}/rooms`);if(a.ok){const i=yield a.json(),o={};Object.keys(h).forEach(c=>{o[c]=i.filter(m=>m.roomType===c).length}),y(o),V(!0),q(!1)}}catch(t){console.error("Error loading inspection:",t)}}),K=()=>{q(!1),V(!1),J(null),y(()=>{const s={};return Object.keys(h).forEach(t=>{s[t]=0}),s}),B(s=>F(D({},s),{inspectionType:"whole_building",locationCategory:"",roomNumber:"",locationDescription:"",floors:-1,verticalHorizontalSurfaces:-1,ceiling:-1,restrooms:-1,customerSatisfaction:-1,trash:-1,projectCleaning:-1,activitySupport:-1,safetyCompliance:-1,equipment:-1,monitoring:-1,notes:"",comments:""}))},C=(s,t)=>{B(a=>F(D({},a),{[s]:t}))},ze=(s,t,a)=>{var i,o;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(bs,{categoryLabel:s.label,criteria:s.criteria}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"Rate this category:"}),e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(c=>e.jsx("button",{type:"button",className:"p-2 rounded-md hover:bg-yellow-50 transition-colors touch-manipulation",onClick:()=>a(c),children:e.jsx(be,{className:`w-6 h-6 ${c<=t&&t>0?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},c))}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md border text-sm font-medium transition-colors touch-manipulation ${t===-1?"bg-muted border-border text-foreground":"bg-card border-border text-muted-foreground hover:bg-muted"}`,onClick:()=>a(-1),children:"Not Rated"})})]}),e.jsx("div",{className:"text-center",children:t>0&&t!==-1?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-base font-semibold text-yellow-600",children:(i=Y[t-1])==null?void 0:i.label}),e.jsx("div",{className:"text-sm text-gray-600",children:(o=Y[t-1])==null?void 0:o.description})]}):e.jsx("div",{className:"text-base font-semibold text-gray-600",children:"No rating selected"})}),t>0&&t!==-1&&(s==null?void 0:s.criteria)&&s.criteria[t]&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-900 mb-1",children:["Detailed Criteria for ",t," Star",t>1?"s":"",":"]}),e.jsx("div",{className:"text-sm text-blue-800",children:s.criteria[t]})]})]})},Ee=(s,t,a)=>{var i,o;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select Rating:"}),e.jsx(fs,{categoryLabel:s.label,criteria:s.criteria})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(b,{type:"button",variant:t===-1?"default":"outline",size:"sm",className:"px-3 py-2 text-xs",onClick:()=>a(-1),children:"Not Rated"}),[1,2,3,4,5].map(c=>e.jsx(b,{type:"button",variant:"ghost",size:"sm",className:"p-2 h-auto",onClick:()=>a(c),children:e.jsx(be,{className:`w-6 h-6 ${c<=t&&t>0?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},c))]}),e.jsx("div",{className:"text-center",children:t>0&&t!==-1?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-semibold text-yellow-600",children:(i=Y[t-1])==null?void 0:i.label}),e.jsx("div",{className:"text-sm text-gray-600",children:(o=Y[t-1])==null?void 0:o.description})]}):e.jsx("div",{className:"text-lg font-semibold text-gray-600",children:"No rating selected"})}),t>0&&t!==-1&&(s==null?void 0:s.criteria)&&s.criteria[t]&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-900 mb-2",children:["Detailed Criteria for ",t," Star",t>1?"s":"",":"]}),e.jsx("div",{className:"text-sm text-blue-800",children:s.criteria[t]})]})]})},X=s=>{const t=window.scrollY;re(s),q(!1),B(a=>F(D({},a),{roomNumber:"",locationDescription:"",locationCategory:s,floors:-1,verticalHorizontalSurfaces:-1,ceiling:-1,restrooms:-1,customerSatisfaction:-1,trash:-1,projectCleaning:-1,activitySupport:-1,safetyCompliance:-1,equipment:-1,monitoring:-1,notes:"",comments:""})),requestAnimationFrame(()=>{window.scrollTo({top:t,behavior:"instant"})}),setTimeout(()=>{window.scrollTo({top:t,behavior:"instant"})},10),setTimeout(()=>{window.scrollTo({top:t,behavior:"instant"})},50)},Ae=s=>A(null,null,function*(){if(s.preventDefault(),L({}),!n){d({title:"Category Required",description:"Please select a category before submitting.",variant:"destructive"});return}const a=["inspectorName","school","date","roomNumber"].filter(i=>!r[i]);if(a.length>0){const i={};a.forEach(o=>{i[o]=!0}),L(i),d({title:"Missing Required Fields",description:"Please fill in the highlighted fields",variant:"destructive"});return}ae(!0);try{const i={inspectorName:r.inspectorName,school:r.school,date:r.date,inspectionType:"whole_building",locationDescription:r.locationDescription||`Building inspection for ${n}`,roomNumber:r.roomNumber||null,locationCategory:n,buildingName:null,buildingInspectionId:f||null,floors:r.floors>=0?r.floors:null,verticalHorizontalSurfaces:r.verticalHorizontalSurfaces>=0?r.verticalHorizontalSurfaces:null,ceiling:r.ceiling>=0?r.ceiling:null,restrooms:r.restrooms>=0?r.restrooms:null,customerSatisfaction:r.customerSatisfaction>=0?r.customerSatisfaction:null,trash:r.trash>=0?r.trash:null,projectCleaning:r.projectCleaning>=0?r.projectCleaning:null,activitySupport:r.activitySupport>=0?r.activitySupport:null,safetyCompliance:r.safetyCompliance>=0?r.safetyCompliance:null,equipment:r.equipment>=0?r.equipment:null,monitoring:r.monitoring>=0?r.monitoring:null,notes:r.notes||null,images:[],verifiedRooms:[],isCompleted:!1};console.log("Submitting building inspection:",i);const o=yield fetch("/api/submit-building-inspection",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)}),c=o.headers.get("content-type")||"";let m=null,j=null;try{c.includes("application/json")?m=yield o.json():j=yield o.text()}catch(P){try{j=yield o.text()}catch(Ns){}}if(console.log("Submission response status:",o.status,"ctype:",c),m&&console.log("Submission response JSON:",m),!m&&j&&console.log("Submission response TEXT:",j.slice(0,300)),!o.ok){const P=m&&(m.message||m.error)||j||null;throw new Error(P||`HTTP error! status: ${o.status}`)}if(m&&(m.success||m.id)||o.ok)L({}),d({title:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Room Inspection Saved!"})]}),description:`${u[n]} room ${r.roomNumber} recorded successfully. Progress updated.`,className:"border-green-500 bg-green-50"}),m&&m.id&&!f&&(console.log("Setting buildingInspectionId from first submission:",m.id),J(m.id)),n&&y(P=>F(D({},P),{[n]:(P[n]||0)+1})),Fe(),B(P=>F(D({},P),{roomNumber:"",locationDescription:"",notes:"",floors:-1,verticalHorizontalSurfaces:-1,ceiling:-1,restrooms:-1,customerSatisfaction:-1,trash:-1,projectCleaning:-1,activitySupport:-1,safetyCompliance:-1,equipment:-1,monitoring:-1})),re(null);else throw new Error(m.message||"Submission failed")}catch(i){console.error("Building inspection submission error:",i);let o="Failed to save inspection. Please check your connection and try again.";i instanceof TypeError&&i.message.includes("fetch")?o="Network error. Please check your internet connection.":i instanceof Error&&(i.message.includes("404")?o="Server endpoint not found. Please contact support.":i.message.includes("500")?o="Server error. Please try again later.":i.message&&i.message!=="Submission failed"&&(o=i.message)),d({title:"Submission Failed",description:o,variant:"destructive"})}finally{ae(!1)}}),Oe=()=>A(null,null,function*(){if(!G){console.error("Please complete all required inspections before finalizing.");return}if(console.log("Attempting to finalize building inspection:",{buildingInspectionId:f,isAllComplete:G}),!f){console.error("No building inspection ID available for finalization"),d({title:"Finalization Failed",description:"No building inspection ID found. Please start a new inspection.",variant:"destructive"});return}try{console.log(`Calling finalize endpoint: /api/inspections/${f}/finalize`);const s=yield fetch(`/api/inspections/${f}/finalize`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}});console.log("Finalize response status:",s.status);let t=s.ok,a=null;if(!t){try{const o=yield s.json();a=o.error||o.message,console.log("Finalize endpoint error:",o)}catch(o){const c=yield s.text();console.log("Finalize endpoint error (text):",c.slice(0,200)),a=c}console.log(`Trying PATCH fallback: /api/inspections/${f}`);const i=yield fetch(`/api/inspections/${f}`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({isCompleted:!0})});if(console.log("PATCH response status:",i.status),t=i.ok,!t){try{const o=yield i.json();a=o.error||o.message||"Failed to finalize inspection",console.log("PATCH endpoint error:",o)}catch(o){const c=yield i.text();console.log("PATCH endpoint error (text):",c.slice(0,200)),a=c||"Failed to finalize inspection"}throw new Error(a)}}te(!0),d({title:"ðŸŽ‰ Building Inspection Complete! ðŸŽ‰",description:"Excellent work! All required inspections submitted successfully. The building inspection is now finalized.",duration:5e3,className:"border-green-500 bg-green-50"}),console.log("Whole building inspection completed successfully!"),setTimeout(()=>{p&&p()},3e3)}catch(s){console.error("Error finalizing inspection:",s),d({title:"Finalization Failed",description:"Failed to finalize building inspection. Please try again.",variant:"destructive"})}});return e.jsx(ls,{children:e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",children:[!w&&e.jsx(N,{className:"border-primary/30",children:e.jsxs(v,{className:"py-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold",children:"Start New Building Inspection"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Guided, step-by-step workflow to complete all required areas"})]}),e.jsx(b,{onClick:K,size:"lg",className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg transition-shadow min-h-[44px]",children:"ðŸ¢ Start New Building Inspection"})]})}),Ie&&e.jsx(N,{className:"border-green-300 bg-green-50",children:e.jsxs(v,{className:"py-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-800",children:"Building Inspection Finalized"}),e.jsx("div",{className:"text-sm text-green-700",children:"Your comprehensive inspection has been submitted successfully."})]}),e.jsx(b,{onClick:()=>{te(!1),K()},className:"bg-green-600 hover:bg-green-700 text-white",children:"Start New Building Inspection"})]})}),e.jsxs("div",{className:"mb-6",children:[p&&e.jsx("div",{className:"flex justify-start mb-4",children:e.jsx(b,{variant:"outline",onClick:p,className:"flex-shrink-0 back-button",children:"â† Back"})}),e.jsx("div",{className:"flex justify-center px-4",children:e.jsxs(ns,{className:"w-full max-w-lg",children:[e.jsx(cs,{asChild:!0,children:e.jsx(b,{variant:"ghost",className:"w-full p-3 h-auto font-normal text-center text-primary hover:text-primary/80 hover:bg-accent/10 border border-accent/30 rounded-lg text-sm sm:text-base leading-relaxed",children:"ðŸ“‹ How to conduct a whole building inspection â†“"})}),e.jsx(ds,{className:"mt-3 p-4 bg-accent/10 rounded-lg border border-accent/30",children:e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-primary mb-1",children:"Step 1: Getting Started"}),e.jsx("p",{children:"Enter your inspector name, select the school, and choose the inspection date. This information will be saved automatically."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-primary mb-1",children:"Step 2: Complete Required Inspections"}),e.jsx("p",{children:'Each category below shows how many inspections are required (e.g., 3 Classrooms, 2 Restrooms). Click "Select" on any incomplete category to start inspecting that area type.'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-primary mb-1",children:"Step 3: Rate Each Area"}),e.jsx("p",{children:"For each room/area, rate the custodial performance using the 1-5 star system you're familiar with. Add room numbers and notes as needed."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-primary mb-1",children:"Step 4: Track Progress"}),e.jsx("p",{children:"Your progress is saved automatically. Green checkmarks show completed categories. Return anytime to continue where you left off."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-primary mb-1",children:"Step 5: Finalize"}),e.jsx("p",{children:'Once all required inspections are complete, the "Finalize Building Inspection" button will become available to submit your comprehensive inspection.'})]})]})})]})})]}),w&&e.jsxs(N,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Building Inspection Options"}),e.jsx(O,{children:"You can continue a previous inspection or start a new one"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-lg",children:"Start New Inspection:"}),e.jsx(b,{onClick:K,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 border-2 border-green-600 hover:border-green-700 rounded-lg shadow-md hover:shadow-xl transition-all duration-200 text-lg min-h-[56px]",variant:"default",size:"lg",children:"ðŸ¢ Start New Building Inspection"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Begin a fresh comprehensive building inspection"})]}),k.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ms,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Or Continue Previous Inspection:"}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto border-2 border-amber-300 rounded-lg p-3 bg-amber-25 shadow-inner",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-amber-200",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Available Inspections"}),e.jsxs("span",{className:"text-xs text-amber-600 bg-amber-100 px-2 py-1 rounded-full",children:[k.length," found"]})]}),k.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-amber-100 bg-amber-50 border-amber-200 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full font-medium",children:["#",t+1]}),e.jsx("div",{className:"font-medium text-amber-900",children:s.school})]}),e.jsxs("div",{className:"text-sm text-amber-700 mt-1",children:[new Date(s.date).toLocaleDateString(),s.inspectorName&&e.jsxs("span",{className:"block text-sm text-amber-800 font-medium",children:["Inspector: ",s.inspectorName]})]})]}),s.isCompleted?e.jsx(ee,{variant:"default",className:"bg-green-500",children:"Completed âœ“"}):e.jsx(b,{onClick:()=>Pe(s),variant:"outline",size:"sm",className:"border-amber-400 text-amber-700 hover:bg-amber-100 font-medium",children:"Continue"})]},s.id)),k.length>3&&e.jsx("div",{className:"text-center py-2 border-t border-amber-200 mt-2",children:e.jsxs("span",{className:"text-xs text-amber-600 bg-amber-100 px-3 py-1 rounded-full",children:["â†• Scroll to see all ",k.length," ","inspections"]})})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"These inspections were started but not completed"})]})]})]})]}),!R&&!w&&e.jsxs(N,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Building Information"}),e.jsx(O,{children:"Select the school and date for this inspection"})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"inspectorName",children:"Inspector Name *"}),e.jsx(I,{id:"inspectorName",value:r.inspectorName,onChange:s=>C("inspectorName",s.target.value),placeholder:"Enter inspector name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"school",children:"School"}),e.jsxs(xs,{value:r.school,onValueChange:s=>C("school",s),children:[e.jsx(ps,{children:e.jsx(hs,{placeholder:"Select school"})}),e.jsx(us,{children:Q.map(s=>e.jsx(gs,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"date",children:"Date"}),e.jsx(I,{id:"date",type:"date",value:r.date,onChange:s=>C("date",s.target.value),required:!0})]})]})})]}),R&&e.jsxs(N,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Current Inspection"}),e.jsx(O,{children:"Continuing inspection progress"})]}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Inspector:"}),e.jsx("span",{children:r.inspectorName||"Not specified"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"School:"}),e.jsx("span",{children:r.school})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{children:new Date(r.date).toLocaleDateString()})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(b,{onClick:()=>{q(!0),V(!1),J(null)},variant:"outline",size:"sm",children:"Switch to Different Inspection"})})]})]}),!w&&(r.school||r.date||R)&&e.jsx(N,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-primary/10 animate-in fade-in-0 slide-in-from-top-4 duration-500",children:e.jsx(v,{className:"py-4",children:e.jsxs("div",{className:"space-y-4",role:"region","aria-label":"Overall inspection progress summary",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Overall Progress"}),e.jsxs(je,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx(me,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),e.jsx(ve,{className:"max-w-xs",children:e.jsx("p",{children:"Tracks completion across all required room categories. Complete all rooms in a category to mark it complete."})})]})]}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[$.overallPercentage,"%"]})]}),e.jsx(se,{value:$.overallPercentage,className:"h-3 bg-primary/10 transition-all duration-700 ease-out","aria-label":`Overall progress: ${$.overallPercentage}% complete`}),e.jsxs("p",{className:"text-sm text-muted-foreground text-center","aria-live":"polite","aria-atomic":"true",children:[$.totalCompleted," of ",$.totalRequired," rooms inspected"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Complete"})]}),e.jsx("p",{className:"text-xl font-bold text-green-700",children:$.completedCategories})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"In Progress"})]}),e.jsx("p",{className:"text-xl font-bold text-amber-700",children:$.inProgressCategories})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Not Started"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-600",children:$.notStartedCategories})]})]})]})})}),!w&&(r.school||r.date||R)&&e.jsx(N,{className:"animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-75",children:e.jsx(v,{className:"py-3",children:e.jsxs("div",{className:"space-y-2",role:"navigation","aria-label":"Category quick jump navigation",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Quick Jump"}),e.jsxs(je,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx(me,{className:"w-3.5 h-3.5 text-muted-foreground cursor-help"})}),e.jsx(ve,{className:"max-w-xs",children:e.jsx("p",{children:"Quickly switch between room categories. Green = complete, Amber = in progress, Gray = not started."})})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Object.entries(h).map(([s,t])=>{const a=g[s],i=a>=t,o=a>0&&!i,c=_[s];return e.jsxs("button",{onClick:()=>{X(s),window.scrollTo({top:0,behavior:"smooth"})},className:`flex-shrink-0 flex flex-col items-center gap-1 px-3 py-2 rounded-lg border-2 transition-all duration-200 ease-in-out hover:scale-105 active:scale-95 min-w-[80px] ${n===s?"border-blue-500 bg-blue-50 shadow-sm":i?"border-green-300 bg-green-50 hover:border-green-400":o?"border-amber-300 bg-amber-50 hover:border-amber-400":"border-gray-200 bg-white hover:border-gray-300"}`,disabled:!r.school||!r.date||!r.inspectorName.trim(),"aria-label":`Select ${u[s]} category. ${a} of ${t} rooms completed. ${i?"Complete":o?"In progress":"Not started"}.`,children:[c&&e.jsx(c,{className:`w-5 h-5 ${i?"text-green-600":o?"text-amber-600":"text-gray-500"}`}),e.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:u[s].split(" ")[0]}),i&&e.jsx(Z,{className:"w-3 h-3 text-green-600"})]},s)})})]})})}),!w&&(l?e.jsxs(U,{title:"Inspection Progress","data-inspection-progress":!0,children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Complete the required number of inspections for each category",r.school&&r.date&&e.jsx("span",{className:"block text-xs text-gray-500 mt-1",children:"(Progress is automatically saved)"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(h).map(([s,t])=>{const a=g[s],i=a>=t,o=_[s];return e.jsx("div",{className:`p-4 rounded-lg border-l-4 border-y border-r ${i?"bg-green-50 border-l-green-500 border-y-green-200 border-r-green-200":n===s?"bg-blue-50 border-l-blue-500 border-y-blue-300 border-r-blue-300":a>0?"bg-amber-50 border-l-amber-500 border-y-amber-200 border-r-amber-200":"bg-gray-50 border-l-gray-300 border-y-gray-200 border-r-gray-200"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-sm border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${i?"bg-green-500 border-green-500":"border-gray-400"}`,children:i&&e.jsx(Z,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(o,{className:`w-4 h-4 flex-shrink-0 ${i?"text-green-700":"text-gray-600"}`}),e.jsx("span",{className:`font-medium text-sm leading-tight ${i?"text-green-800":"text-gray-700"}`,children:u[s]})]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{variant:i?"default":"secondary",className:"text-xs",children:[a,"/",t," Done"]}),e.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:[Math.round(a/t*100),"%"]})]}),e.jsx(se,{value:a/t*100,className:"h-2"}),!i&&r.school&&r.date&&r.inspectorName.trim()&&e.jsx(b,{size:"sm",variant:"outline",onClick:()=>X(s),className:`text-xs px-3 min-h-[44px] w-full ${n===s?"border-blue-500 bg-blue-50 shadow-sm":""}`,children:"Select"})]})]})]})})},s)})})]}):e.jsxs(N,{"data-inspection-progress":!0,children:[e.jsxs(z,{children:[e.jsx(E,{children:"Inspection Progress"}),e.jsxs(O,{children:["Complete the required number of inspections for each category",r.school&&r.date&&e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(Progress is automatically saved)"})]})]}),e.jsx(v,{className:"space-y-4",children:Object.entries(h).map(([s,t])=>{const a=g[s],i=a>=t,o=_[s];return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-l-4 border-y border-r ${i?"bg-green-50 border-l-green-500 border-y-green-200 border-r-green-200":n===s?"bg-blue-50 border-l-blue-500 border-y-blue-300 border-r-blue-300":a>0?"bg-amber-50 border-l-amber-500 border-y-amber-200 border-r-amber-200":"bg-gray-50 border-l-gray-300 border-y-gray-200 border-r-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-sm border-2 flex items-center justify-center flex-shrink-0 ${i?"bg-green-500 border-green-500":"border-gray-400"}`,children:i&&e.jsx(Z,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(o,{className:`w-4 h-4 flex-shrink-0 ${i?"text-green-700":"text-gray-600"}`}),e.jsx("span",{className:`font-medium ${i?"text-green-800":"text-gray-700"}`,children:u[s]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(se,{value:a/t*100,className:"h-2 flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground font-medium whitespace-nowrap",children:[Math.round(a/t*100),"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs(ee,{variant:i?"default":"secondary",children:[a,"/",t," Completed"]}),!i&&r.school&&r.date&&r.inspectorName.trim()&&e.jsx(b,{size:"sm",variant:"outline",onClick:()=>X(s),className:`min-h-[44px] px-4 ${n===s?"border-blue-500 bg-blue-50 shadow-sm":""}`,children:"Select"})]})]},s)})})]})),!w&&n&&!(r.school&&r.date&&r.inspectorName.trim())&&e.jsx(N,{className:"border-amber-200 bg-amber-50",children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-800 mb-1",children:"Complete Required Information"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Please fill in all required fields above before you can start rating this category:"}),e.jsxs("ul",{className:"text-sm text-amber-700 mt-2 space-y-1",children:[!r.inspectorName.trim()&&e.jsx("li",{children:"â€¢ Inspector Name is required"}),!r.school&&e.jsx("li",{children:"â€¢ School selection is required"}),!r.date&&e.jsx("li",{children:"â€¢ Inspection date is required"})]})]})]})})}),!w&&n&&r.school&&r.date&&r.inspectorName.trim()&&e.jsx(N,{className:"bg-muted/30",children:e.jsx(v,{className:"py-3",children:e.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"font-medium text-foreground",children:r.school}),e.jsx(xe,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"font-medium text-foreground",children:u[n]}),r.roomNumber&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4 mx-2"}),e.jsxs("span",{className:"text-primary font-semibold",children:["Room ",r.roomNumber]})]})]})})}),!w&&n&&r.school&&r.date&&r.inspectorName.trim()&&e.jsxs("form",{onSubmit:Ae,className:`space-y-4 ${l?"":"space-y-6"}`,children:[l?e.jsxs(U,{title:`Inspecting: ${u[n]}`,children:[W&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-muted-foreground",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Auto-saved at ",W.toLocaleTimeString()]})]}),oe&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-blue-600",children:[e.jsx(he,{className:"w-4 h-4 animate-pulse"}),e.jsx("span",{children:"Saving..."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"roomNumber",className:`text-base font-medium ${T.roomNumber?"text-destructive":""}`,children:"Room Number *"}),e.jsx(I,{id:"roomNumber",className:`h-12 text-base ${T.roomNumber?"border-destructive focus-visible:ring-destructive":""}`,value:r.roomNumber,onChange:s=>{C("roomNumber",s.target.value),T.roomNumber&&L(t=>F(D({},t),{roomNumber:!1}))},placeholder:"Enter room number",required:!0}),T.roomNumber&&e.jsx("p",{className:"text-sm text-destructive",children:"Room number is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"locationDescription",className:"text-base font-medium",children:"Location Description"}),e.jsx(I,{id:"locationDescription",className:"h-12 text-base",value:r.locationDescription,onChange:s=>C("locationDescription",s.target.value),placeholder:"e.g., Main Building, Second Floor"})]})]})]}):e.jsxs(N,{children:[e.jsxs(z,{children:[e.jsxs(E,{children:["Inspecting: ",u[n]]}),e.jsxs(O,{children:["Complete the inspection for this category",W&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Auto-saved at ",W.toLocaleTimeString()]})]}),oe&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-blue-600",children:[e.jsx(he,{className:"w-4 h-4 animate-pulse"}),e.jsx("span",{children:"Saving..."})]})]})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"roomNumber",className:T.roomNumber?"text-destructive":"",children:"Room Number *"}),e.jsx(I,{id:"roomNumber",className:T.roomNumber?"border-destructive focus-visible:ring-destructive":"",value:r.roomNumber,onChange:s=>{C("roomNumber",s.target.value),T.roomNumber&&L(t=>F(D({},t),{roomNumber:!1}))},placeholder:"Enter room number",required:!0}),T.roomNumber&&e.jsx("p",{className:"text-sm text-destructive",children:"Room number is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx(I,{id:"locationDescription",value:r.locationDescription,onChange:s=>C("locationDescription",s.target.value),placeholder:"e.g., Main Building, Second Floor"})]})]})})]}),l?e.jsx(U,{title:"Rate Each Category",children:e.jsx("div",{className:"space-y-4",children:ye.map((s,t)=>e.jsx(we,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:ze(s,r[s.key],a=>C(s.key,a))},s.key))})}):e.jsx("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:ye.map((s,t)=>{const a=s.key;return e.jsx(we,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:Ee(s,r[a],i=>C(a,i))},s.key)})}),l?e.jsx(U,{title:"Additional Notes",children:e.jsx(Ce,{value:r.notes,onChange:s=>C("notes",s.target.value),placeholder:"Enter any additional observations...",rows:4,className:"text-base min-h-[120px]"})}):e.jsxs(N,{children:[e.jsx(z,{children:e.jsx(E,{children:"Additional Notes"})}),e.jsx(v,{children:e.jsx(Ce,{value:r.notes,onChange:s=>C("notes",s.target.value),placeholder:"Enter any additional observations...",rows:4})})]}),l?e.jsx(U,{title:"Photo Documentation",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(S,{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base",children:"Upload Images"})]}),e.jsx(I,{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:s=>{s.target.files&&s.target.files.length>0&&(d({title:"ðŸ“¸ Photos Uploaded Successfully!",description:`Added ${s.target.files.length} photo${s.target.files.length>1?"s":""} to room inspection documentation.`,duration:3e3}),console.log("Files selected:",s.target.files.length,"files"),s.target.value="")},className:"hidden"})]}),e.jsxs(S,{htmlFor:"camera-capture",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base",children:"Take Photo"})]}),e.jsx(I,{id:"camera-capture",type:"file",accept:"image/*",capture:"environment",onChange:s=>{s.target.files&&s.target.files.length>0&&(d({title:"ðŸ“· Photo Captured Successfully!",description:"Camera photo has been added to your inspection documentation.",duration:3e3}),console.log("Camera photo taken:",s.target.files[0].name),s.target.value="")},className:"hidden"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload existing images or take new photos to document the inspection"})]})}):e.jsxs(N,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Photo Documentation"}),e.jsx(O,{children:"Upload images or take photos to document the inspection"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{htmlFor:"image-upload-desktop",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Images"})]}),e.jsx(I,{id:"image-upload-desktop",type:"file",multiple:!0,accept:"image/*",onChange:s=>{s.target.files&&s.target.files.length>0&&(d({title:"ðŸ“¸ Photos Uploaded Successfully!",description:`Added ${s.target.files.length} photo${s.target.files.length>1?"s":""} to room inspection documentation.`,duration:3e3}),console.log("Files selected:",s.target.files.length,"files"),s.target.value="")},className:"hidden"})]}),e.jsxs(S,{htmlFor:"camera-capture-desktop",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Take Photo"})]}),e.jsx(I,{id:"camera-capture-desktop",type:"file",accept:"image/*",capture:"environment",onChange:s=>{s.target.files&&s.target.files.length>0&&(d({title:"ðŸ“· Photo Captured Successfully!",description:"Camera photo has been added to your inspection documentation.",duration:3e3}),console.log("Camera photo taken:",s.target.files[0].name),s.target.value="")},className:"hidden"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select multiple images from your device or take new photos with your camera"})]})]}),e.jsx(b,{type:"submit",size:"lg",className:`w-full bg-blue-600 hover:bg-blue-700 shadow-md hover:shadow-lg transition-shadow ${l?"min-h-[56px] text-lg":"min-h-[48px]"}`,disabled:H,children:H?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 animate-spin"}),"Saving inspection..."]}):`Submit ${u[n]} Inspection`})]}),!w&&e.jsxs("div",{className:`border-t ${l?"pt-4":"pt-6"}`,children:[e.jsx(b,{onClick:Oe,size:"lg",className:`w-full bg-green-600 hover:bg-green-700 shadow-md hover:shadow-xl transition-all ${l?"min-h-[56px] text-base":"min-h-[48px]"}`,disabled:!G,children:l?"Finalize Building Inspection":"Finalize Whole Building Inspection"}),!G&&e.jsx("p",{className:`text-center text-gray-500 mt-2 ${l?"text-xs px-2":"text-sm"}`,children:l?"Complete all required inspections first":"Complete all required inspections to enable this button"})]}),!w&&n&&r.school&&r.date&&r.inspectorName.trim()&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-in fade-in-0 zoom-in-95 duration-300",children:e.jsx(b,{type:"button",onClick:s=>{const t=document.querySelector("form");if(t){const a=new Event("submit",{bubbles:!0,cancelable:!0});t.dispatchEvent(a)}},disabled:H,className:`rounded-full shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 transition-all duration-200 ${l?"w-14 h-14":"w-16 h-16"} bg-blue-600 hover:bg-blue-700 text-white`,title:"Quick Submit Room","aria-label":H?"Submitting room inspection":`Quick submit ${u[n]} inspection`,children:H?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(es,{className:"w-6 h-6"})})})]})})}export{Ts as default};
