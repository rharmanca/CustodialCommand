import{r as m,j as e,S as ye}from"./ui-C40ArZlv-v6.js";import{m as ve,g as Ne,l as Se,S as G,p as we,s as Ce,C as X,a as De,c as Ie}from"./collapsible-section-S5iIaJr_-v6.js";import{c as ke,a as E,u as Fe,C as k,B as F,b as ze,d as $,e as P,f as R,g as z,U as Be,X as Te,h as _}from"./index-BSmjchPe-v6.js";import{L as S,I as T}from"./label-BbwW0rT_-v6.js";import{T as Ee}from"./textarea-TkGUltd2-v6.js";import{S as Z,a as ee,b as se,c as te,d as ae}from"./select-5ylEU5UJ-v6.js";import{D as Ae,a as Le,b as Me,c as $e,d as Pe}from"./dialog-ChQZbHTd-v6.js";import{C as Re}from"./chevron-right-C7ge3pXJ-v6.js";import{u as _e}from"./use-mobile-aAX3j1Rq-v6.js";import{i as W,r as U}from"./custodial-criteria-aPNJLI_7-v6.js";import{S as ie}from"./save-C1kzqbF--v6.js";import{S as oe}from"./star-BzeSHEkx-v6.js";import"./vendor-Dvwkxfce-v6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);async function He(o,l={}){const{maxWidth:c=1920,maxHeight:i=1080,quality:w=.8,maxSizeKB:H=500}=l;return new Promise((C,A)=>{const y=document.createElement("canvas"),u=y.getContext("2d"),g=new Image;g.onload=()=>{let{width:b,height:x}=g;if(b>c||x>i){const h=Math.min(c/b,i/x);b=b*h,x=x*h}y.width=b,y.height=x,u==null||u.drawImage(g,0,0,b,x);let D=w;const B=()=>{y.toBlob(h=>{if(!h){A(new Error("Failed to compress image"));return}if(h.size/1024>H&&D>.1)D-=.1,B();else{const O=new File([h],o.name,{type:"image/jpeg",lastModified:Date.now()});C({compressedFile:O,originalSize:o.size,compressedSize:h.size,compressionRatio:(o.size-h.size)/o.size})}},"image/jpeg",D)};B()},g.onerror=()=>A(new Error("Failed to load image")),g.src=URL.createObjectURL(o)})}function qe(o,l=500){return o.size/1024>l}function K(o){if(o===0)return"0 Bytes";const l=1024,c=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(o)/Math.log(l));return parseFloat((o/Math.pow(l,i)).toFixed(2))+" "+c[i]}const re=m.forwardRef(({...o},l)=>e.jsx("nav",{ref:l,"aria-label":"breadcrumb",...o}));re.displayName="Breadcrumb";const ne=m.forwardRef(({className:o,...l},c)=>e.jsx("ol",{ref:c,className:E("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",o),...l}));ne.displayName="BreadcrumbList";const J=m.forwardRef(({className:o,...l},c)=>e.jsx("li",{ref:c,className:E("inline-flex items-center gap-1.5",o),...l}));J.displayName="BreadcrumbItem";const le=m.forwardRef(({asChild:o,className:l,...c},i)=>{const w=o?ye:"a";return e.jsx(w,{ref:i,className:E("transition-colors hover:text-foreground",l),...c})});le.displayName="BreadcrumbLink";const ce=m.forwardRef(({className:o,...l},c)=>e.jsx("span",{ref:c,role:"link","aria-disabled":"true","aria-current":"page",className:E("font-normal text-foreground",o),...l}));ce.displayName="BreadcrumbPage";const de=({children:o,className:l,...c})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:E("[&>svg]:w-3.5 [&>svg]:h-3.5",l),...c,children:o??e.jsx(Re,{})});de.displayName="BreadcrumbSeparator";function as({onBack:o}){const{isMobile:l}=_e(),{toast:c}=Fe(),[i,w]=m.useState({school:"",date:"",inspectionType:"single_room",locationDescription:"",roomNumber:"",locationCategory:"",floors:0,verticalHorizontalSurfaces:0,ceiling:0,restrooms:0,customerSatisfaction:0,trash:0,projectCleaning:0,activitySupport:0,safetyCompliance:0,equipment:0,monitoring:0,notes:"",images:[]}),[H,C]=m.useState(!1),[A,y]=m.useState([]),[u,g]=m.useState(null),[b,x]=m.useState(null),[D,B]=m.useState(!1),[h,q]=m.useState(!1),O=[{value:"ASA",label:"ASA"},{value:"LCA",label:"LCA"},{value:"GWC",label:"GWC"},{value:"OA",label:"OA"},{value:"CBR",label:"CBR"},{value:"WLC",label:"WLC"}],me=[{value:"exterior",label:"Exterior"},{value:"gym_bleachers",label:"Gym and Bleachers"},{value:"classroom",label:"Classroom"},{value:"cafeteria",label:"Cafeteria"},{value:"utility_storage",label:"Utility Or Storage"},{value:"admin_office",label:"Admin or Office Area"},{value:"hallway",label:"Hallway"},{value:"stairwell",label:"Stairwell"},{value:"restroom",label:"Restroom"},{value:"staff_single_restroom",label:"Staff or Single Restroom"}],[f,L]=m.useState([]);m.useEffect(()=>{ve(),pe();const s=Ne();console.log("Storage stats:",s)},[]),m.useEffect(()=>{if(u){const s=setTimeout(()=>{V()},2e3);return()=>clearTimeout(s)}},[i,f,u]);const pe=()=>{try{const s=Se(G.DRAFT_INSPECTION);s&&(y([s]),C(!0));const a=localStorage.getItem("custodial_inspection_drafts");if(a&&!s){const n=JSON.parse(a).filter(r=>{const v=new Date(r.lastModified),p=new Date;return p.setDate(p.getDate()-7),v>p});n.length>0&&(y(n),C(!0))}}catch(s){console.error("Error loading draft inspections:",s)}},ue=()=>`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,V=async()=>{if(!(!i.school||!i.date)){B(!0);try{const s=u||ue();u||g(s);const a=[];for(const n of f)try{const r=await we(n);a.push(r)}catch(r){console.error("Failed to process image:",r)}const t={id:s,...i,selectedImages:a,lastModified:new Date().toISOString(),title:`${i.school} - ${i.roomNumber||"Room"} - ${i.locationCategory||"Inspection"}`};Ce(G.DRAFT_INSPECTION,t),x(new Date)}catch(s){console.error("Error saving draft:",s)}finally{B(!1)}}},he=s=>{if(w({school:s.school||"",date:s.date||"",inspectionType:s.inspectionType||"single_room",locationDescription:s.locationDescription||"",roomNumber:s.roomNumber||"",locationCategory:s.locationCategory||"",floors:s.floors||0,verticalHorizontalSurfaces:s.verticalHorizontalSurfaces||0,ceiling:s.ceiling||0,restrooms:s.restrooms||0,customerSatisfaction:s.customerSatisfaction||0,trash:s.trash||0,projectCleaning:s.projectCleaning||0,activitySupport:s.activitySupport||0,safetyCompliance:s.safetyCompliance||0,equipment:s.equipment||0,monitoring:s.monitoring||0,notes:s.notes||"",images:[]}),s.selectedImages&&s.selectedImages.length>0){const a=s.selectedImages.map((t,n)=>{const r=atob(t.split(",")[1]),v=new Array(r.length);for(let N=0;N<r.length;N++)v[N]=r.charCodeAt(N);const p=new Uint8Array(v);return new File([p],`image_${n}.jpg`,{type:"image/jpeg"})});L(a)}g(s.id),C(!1)},Y=s=>{Ie(G.DRAFT_INSPECTION);const a=JSON.parse(localStorage.getItem("custodial_inspection_drafts")||"[]"),t=a.filter(n=>n.id!==s);t.length!==a.length&&localStorage.setItem("custodial_inspection_drafts",JSON.stringify(t)),y([]),u===s&&(g(null),x(null))},ge=()=>{C(!1),g(null),x(null)},j=(s,a)=>{w(t=>({...t,[s]:a}))},Q=async s=>{const a=s.target.files;if(a&&a.length>0){const t=Array.from(a),r=5-f.length,v=t.slice(0,r),p=[];let N=0,M=0;for(const d of v)if(N+=d.size,qe(d,500))try{const I=await He(d,{maxSizeKB:500});p.push(I.compressedFile),M+=I.compressedSize,console.log(`Compressed ${d.name}: ${K(d.size)} ‚Üí ${K(I.compressedSize)}`)}catch(I){console.error("Failed to compress image:",I),p.push(d),M+=d.size}else p.push(d),M+=d.size;if(L(d=>[...d,...p]),p.length>0){const d=N-M,I=(d/N*100).toFixed(1);c({title:"üì∏ Photos Uploaded Successfully!",description:`Added ${p.length} photo${p.length>1?"s":""} to inspection documentation.${d>0?` Saved ${K(d)} (${I}% compression).`:""}`,duration:3e3})}v.length<t.length&&c({variant:"destructive",title:"Upload Limit Reached",description:`Only ${v.length} photos were added. Maximum of 5 images allowed per inspection.`,duration:5e3}),console.log("Files selected:",p.length,"files")}},xe=s=>{L(a=>a.filter((t,n)=>n!==s))},fe=async s=>{if(s.preventDefault(),h)return;if(!i.school||!i.date){c({variant:"destructive",title:"Missing Required Fields",description:"Please fill in school and date fields before submitting.",duration:6e3});return}if(!W.some(t=>i[t.key]>0)){c({variant:"destructive",title:"Missing Ratings",description:"Please provide at least one rating for the inspection categories.",duration:6e3});return}q(!0);try{const t=new FormData;t.append("school",i.school),t.append("date",i.date),t.append("inspectionType",i.inspectionType),t.append("locationDescription",i.locationDescription),t.append("roomNumber",i.roomNumber||""),t.append("locationCategory",i.locationCategory||""),t.append("floors",(i.floors||"").toString()),t.append("verticalHorizontalSurfaces",(i.verticalHorizontalSurfaces||"").toString()),t.append("ceiling",(i.ceiling||"").toString()),t.append("restrooms",(i.restrooms||"").toString()),t.append("customerSatisfaction",(i.customerSatisfaction||"").toString()),t.append("trash",(i.trash||"").toString()),t.append("projectCleaning",(i.projectCleaning||"").toString()),t.append("activitySupport",(i.activitySupport||"").toString()),t.append("safetyCompliance",(i.safetyCompliance||"").toString()),t.append("equipment",(i.equipment||"").toString()),t.append("monitoring",(i.monitoring||"").toString()),t.append("notes",i.notes||""),f.forEach(r=>{t.append("images",r)});const n=await fetch("/api/inspections",{method:"POST",body:t});if(n.ok)c({title:"‚úÖ Inspection Submitted Successfully!",description:`Single area inspection for ${i.school} has been submitted and saved.`,variant:"default",duration:5e3}),u&&Y(u),w({school:"",date:"",inspectionType:"single_room",locationDescription:"",roomNumber:"",locationCategory:"",floors:0,verticalHorizontalSurfaces:0,ceiling:0,restrooms:0,customerSatisfaction:0,trash:0,projectCleaning:0,activitySupport:0,safetyCompliance:0,equipment:0,monitoring:0,notes:"",images:[]}),L([]),g(null),x(null),setTimeout(()=>{o&&o()},6e3);else{const r=await n.json().catch(()=>({message:"Unknown error"}));c({variant:"destructive",title:"Submission Failed",description:`Error: ${r.message||"Unable to submit inspection. Please try again."}`,duration:7e3})}}catch(t){console.error("Error submitting inspection:",t);let n="Submission Failed",r="Unable to submit inspection. Please try again.";t instanceof Error&&(t.message.includes("NetworkError")||t.message.includes("fetch")?(n="Network Error",r="Unable to connect to the server. Please check your connection and try again."):(t.message.includes("validation")||t.message.includes("Invalid"))&&(n="Invalid Data",r="Please check all required fields and try again.")),c({variant:"destructive",title:n,description:r,duration:7e3})}finally{q(!1)}},be=(s,a)=>{var t,n;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"Rate this category:"}),e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(r=>e.jsx("button",{type:"button",className:"p-2 rounded-md hover:bg-yellow-50 transition-colors touch-manipulation",onClick:()=>j(s.key,r),children:e.jsx(oe,{className:`w-6 h-6 ${r<=a&&a>0?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-300"}`})},r))}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md border text-sm font-medium transition-colors touch-manipulation ${a===0?"bg-gray-100 border-gray-300 text-gray-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,onClick:()=>j(s.key,0),children:"Not Rated"})})]}),e.jsx("div",{className:"text-center",children:a>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{variant:"secondary",className:"text-sm px-3 py-1",children:(t=U[a-1])==null?void 0:t.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:(n=U[a-1])==null?void 0:n.description})]}):e.jsx(_,{variant:"outline",className:"text-sm px-3 py-1",children:"No rating selected"})}),a>0&&s.criteria&&s.criteria[a]&&e.jsx(k,{className:"bg-blue-50 border-blue-200",children:e.jsx(z,{className:"p-3",children:e.jsxs("div",{className:"text-xs text-blue-800",children:[e.jsxs("strong",{className:"text-sm",children:["Rating ",a," Criteria:"]}),e.jsx("p",{className:"mt-1 leading-relaxed",children:s.criteria[a]})]})})})]})},je=(s,a)=>{var t,n;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(F,{type:"button",variant:a===0?"default":"outline",size:"sm",className:"px-3 py-2 text-xs",onClick:()=>j(s.key,0),children:"Not Rated"}),[1,2,3,4,5].map(r=>e.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"p-2 h-auto",onClick:()=>j(s.key,r),children:e.jsx(oe,{className:`w-6 h-6 ${r<=a&&a>0?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},r))]}),e.jsx("div",{className:"text-center px-3",children:a>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{variant:"secondary",className:"text-sm px-3 py-1",children:(t=U[a-1])==null?void 0:t.label}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:(n=U[a-1])==null?void 0:n.description})]}):e.jsx(_,{variant:"outline",className:"text-sm px-3 py-1",children:"No rating selected"})}),a>0&&s.criteria&&s.criteria[a]&&e.jsx(k,{className:"bg-accent/10 border-accent/30",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"text-xs text-accent-foreground",children:[e.jsxs("strong",{className:"text-sm",children:["Rating ",a," Criteria:"]}),e.jsx("p",{className:"mt-1 leading-relaxed",children:s.criteria[a]})]})})})]})};return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{open:H,onOpenChange:C,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Me,{children:[e.jsx($e,{children:"Resume Previous Inspection?"}),e.jsx(Pe,{children:"You have unfinished inspection drafts. Would you like to continue one of them or start a new inspection?"})]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[A.map(s=>e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last modified: ",new Date(s.lastModified).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["School: ",s.school," ‚Ä¢ Date: ",s.date,s.roomNumber&&` ‚Ä¢ Room: ${s.roomNumber}`]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{size:"sm",onClick:()=>he(s),children:"Resume"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>Y(s.id),children:"Delete"})]})]})},s.id)),e.jsx("div",{className:"flex justify-center space-x-4 pt-4",children:e.jsx(F,{onClick:ge,variant:"outline",children:"Start New Inspection"})})]})]})}),e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx(re,{className:"mb-4",children:e.jsxs(ne,{children:[e.jsx(J,{children:e.jsxs(le,{onClick:o,className:"flex items-center gap-1 cursor-pointer",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only sm:not-sr-only",children:"Home"})]})}),e.jsx(de,{}),e.jsx(J,{children:e.jsx(ce,{children:"Single Area Inspection"})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Submit Inspection"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Use this form to inspect a single room or location. Example: Cafeteria. If performing a whole building inspection please select that from the previous screen."}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 leading-relaxed",children:[e.jsx("strong",{children:"üìã Important:"})," This form is for inspecting a single room or area using the same rating criteria as the Whole Building Inspection. However, single area inspections are recorded separately and do not automatically count toward a building-wide inspection or monthly metrics. If you're conducting these inspections as part of a comprehensive building review or to meet monthly inspection requirements, you'll need to manually track your progress across all required areas."]})}),(b||D)&&e.jsx("div",{className:"mt-2 flex items-center space-x-2 text-sm text-muted-foreground",children:D?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Saving..."})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last saved: ",b.toLocaleTimeString()]})]}):null}),u&&e.jsxs(F,{type:"button",variant:"outline",onClick:V,disabled:D,className:"mt-4",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Save Draft"]})]}),e.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs($,{children:[e.jsx(P,{children:"Basic Information"}),e.jsx(R,{children:"Enter the basic details for this inspection"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"school",children:"School *"}),e.jsxs(Z,{value:i.school,onValueChange:s=>j("school",s),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select school"})}),e.jsx(te,{children:O.map(s=>e.jsx(ae,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"date",children:"Inspection Date *"}),e.jsx(T,{id:"date",type:"date",value:i.date,onChange:s=>j("date",s.target.value),required:!0,"aria-describedby":"date-help"}),e.jsx("p",{id:"date-help",className:"text-sm text-muted-foreground mt-1",children:"Select the date when this inspection was conducted"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"locationCategory",children:"Location Category"}),e.jsxs(Z,{value:i.locationCategory,onValueChange:s=>j("locationCategory",s),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select location category"})}),e.jsx(te,{children:me.map(s=>e.jsx(ae,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"roomNumber",children:"Room Number"}),e.jsx(T,{id:"roomNumber",value:i.roomNumber,onChange:s=>j("roomNumber",s.target.value),placeholder:"e.g., 101, Main Hall"})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx(T,{id:"locationDescription",value:i.locationDescription,onChange:s=>j("locationDescription",s.target.value),placeholder:"e.g., Main Building, Second Floor, Near Library"})]})]})]}),e.jsxs(k,{children:[e.jsxs($,{children:[e.jsx(P,{children:"Inspection Categories"}),e.jsx(R,{children:l?"Expand each category to rate it. Detailed criteria will appear when you select a rating.":"Expand each category to rate it based on the criteria (1-5 stars). Detailed criteria will appear when you select a rating."})]}),e.jsx(z,{className:"space-y-4",children:l?W.map(s=>e.jsx(X,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:be(s,i[s.key])},s.key)):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:W.map(s=>e.jsx(X,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:je(s,i[s.key])},s.key))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsxs($,{children:[e.jsx(P,{children:"Additional Notes & Observations"}),e.jsx(R,{children:"Detailed observations, specific issues, recommendations, or additional context"})]}),e.jsxs(z,{children:[e.jsx(Ee,{value:i.notes,onChange:s=>j("notes",s.target.value),placeholder:`Enter detailed notes about this inspection...

Examples:
‚Ä¢ Specific areas that need attention
‚Ä¢ Safety concerns observed
‚Ä¢ Maintenance recommendations
‚Ä¢ Follow-up actions required
‚Ä¢ Staff performance observations
‚Ä¢ Equipment issues noted`,rows:8,className:"min-h-[200px]","aria-describedby":"notes-help"}),e.jsx("p",{id:"notes-help",className:"text-sm text-muted-foreground mt-2",children:"Provide detailed observations, specific issues, recommendations, or additional context for this inspection"})]})]}),e.jsxs(k,{children:[e.jsxs($,{children:[e.jsx(P,{children:"Photo Documentation"}),e.jsx(R,{children:"Upload images or take photos to document inspection findings (up to 5 images)"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(S,{htmlFor:"image-upload",className:"cursor-pointer flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors min-h-[48px]",children:[e.jsx(Be,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"font-medium",children:"Upload Images"})]}),e.jsx(T,{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:Q,className:"hidden",disabled:f.length>=5})]}),e.jsxs(S,{htmlFor:"camera-capture",className:"cursor-pointer flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors min-h-[48px]",children:[e.jsx(De,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"font-medium",children:"Take Photo"})]}),e.jsx(T,{id:"camera-capture",type:"file",accept:"image/*",capture:"environment",onChange:Q,className:"hidden",disabled:f.length>=5})]})]}),f.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[f.length," of 5 images selected"]}),f.length>=5&&e.jsx("span",{className:"text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded",children:"Maximum reached"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"üì∏ Select multiple images or take photos ‚Ä¢ Up to 5 images ‚Ä¢ JPG, PNG, GIF supported"}),f.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-semibold",children:"Image Previews"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4",children:f.map((s,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Preview ${a+1}`,className:"w-full h-32 sm:h-24 object-cover rounded-lg border-2 border-gray-200",loading:"lazy"}),e.jsx("button",{type:"button",onClick:()=>xe(a),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 opacity-90 md:opacity-0 md:group-hover:opacity-100 transition-opacity shadow-lg","aria-label":`Remove image ${a+1}`,children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded",children:s.name.length>12?s.name.substring(0,12)+"...":s.name})]},a))})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(F,{type:"submit",size:"lg",disabled:h,className:`bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed ${l?"w-full h-14 text-lg":""}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Submitting..."]}):"Submit Inspection"})})]})]})]})}export{as as default};
//# sourceMappingURL=custodial-inspection-BnKqqT0z-v6.js.map
