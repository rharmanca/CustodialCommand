var ht=Object.defineProperty;var pt=(s,r,t)=>r in s?ht(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var ke=(s,r,t)=>pt(s,typeof r!="symbol"?r+"":r,t);import{r as n,s as ae,P as V,t as xt,v as ft,O as gt,C as bt,w as ge,j as e,m as vt}from"./ui-gIZ64paP-v6.js";import{u as jt,a as yt,t as wt,n as Nt,c as St,f as Ie,b as Ct}from"./custodialNotesSchema-J_wktK3T-v6.js";import{i as Ue,c as ne,S as T,u as kt,e as X,b as Re,f as Ee,g as De,h as Le,d as Ae}from"./index-ClufJbUB-v6.js";import{L as Z,I as xe}from"./label-BXDX0v-3-v6.js";import{T as It}from"./textarea-DMCDaM7J-v6.js";import{A as Rt,a as Et,b as Dt,c as Lt,d as At,e as Ft,f as $t,g as Mt}from"./alert-dialog-CksAzLOH-v6.js";import"./dialog-BVC3i4oB-v6.js";import{P as ye,a as we,b as Ne}from"./popover-B4CPRZsu-v6.js";import{L as Pt}from"./LoadingOverlay-sqcOJs4s-v6.js";import{S as qe}from"./save-CxyB9IVG-v6.js";import{a as Ot,C as Tt}from"./chevron-down-DcOdNfKy-v6.js";import{C as Fe}from"./circle-help-aTEikYZc-v6.js";import"./vendor-Dvwkxfce-v6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ue("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=Ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var We=1,qt=.9,Wt=.8,Bt=.17,$e=.1,Me=.999,Ht=.9999,Kt=.99,Vt=/[\\\/_+.#"@\[\(\{&]/,Gt=/[\\\/_+.#"@\[\(\{&]/g,Yt=/[\s-]/,Ve=/[\s-]/g;function Oe(s,r,t,p,o,d,u){if(d===r.length)return o===s.length?We:Kt;var l=`${o},${d}`;if(u[l]!==void 0)return u[l];for(var S=p.charAt(d),m=t.indexOf(S,o),v=0,x,N,L,$;m>=0;)x=Oe(s,r,t,p,m+1,d+1,u),x>v&&(m===o?x*=We:Vt.test(s.charAt(m-1))?(x*=Wt,L=s.slice(o,m-1).match(Gt),L&&o>0&&(x*=Math.pow(Me,L.length))):Yt.test(s.charAt(m-1))?(x*=qt,$=s.slice(o,m-1).match(Ve),$&&o>0&&(x*=Math.pow(Me,$.length))):(x*=Bt,o>0&&(x*=Math.pow(Me,m-o))),s.charAt(m)!==r.charAt(d)&&(x*=Ht)),(x<$e&&t.charAt(m-1)===p.charAt(d+1)||p.charAt(d+1)===p.charAt(d)&&t.charAt(m-1)!==p.charAt(d))&&(N=Oe(s,r,t,p,m+1,d+2,u),N*$e>x&&(x=N*$e)),x>v&&(v=x),m=t.indexOf(S,m+1);return u[l]=v,v}function Be(s){return s.toLowerCase().replace(Ve," ")}function Qt(s,r,t){return s=t&&t.length>0?`${s+" "+t.join(" ")}`:s,Oe(s,r,Be(s),Be(r),0,0,{})}var fe='[cmdk-group=""]',Pe='[cmdk-group-items=""]',Jt='[cmdk-group-heading=""]',Ge='[cmdk-item=""]',He=`${Ge}:not([aria-disabled="true"])`,Te="cmdk-item-select",se="data-value",_t=(s,r,t)=>Qt(s,r,t),Ye=n.createContext(void 0),be=()=>n.useContext(Ye),Qe=n.createContext(void 0),ze=()=>n.useContext(Qe),Je=n.createContext(void 0),_e=n.forwardRef((s,r)=>{let t=re(()=>{var a,h;return{search:"",value:(h=(a=s.value)!=null?a:s.defaultValue)!=null?h:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),p=re(()=>new Set),o=re(()=>new Map),d=re(()=>new Map),u=re(()=>new Set),l=Xe(s),{label:S,children:m,value:v,onValueChange:x,filter:N,shouldFilter:L,loop:$,disablePointerSelection:G=!1,vimBindings:z=!0,...B}=s,I=ae(),oe=ae(),q=ae(),O=n.useRef(null),C=is();ee(()=>{if(v!==void 0){let a=v.trim();t.current.value=a,A.emit()}},[v]),ee(()=>{C(6,ve)},[]);let A=n.useMemo(()=>({subscribe:a=>(u.current.add(a),()=>u.current.delete(a)),snapshot:()=>t.current,setState:(a,h,g)=>{var c,j,y,R;if(!Object.is(t.current[a],h)){if(t.current[a]=h,a==="search")ie(),P(),C(1,le);else if(a==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let D=document.getElementById(q);D?D.focus():(c=document.getElementById(I))==null||c.focus()}if(C(7,()=>{var D;t.current.selectedItemId=(D=H())==null?void 0:D.id,A.emit()}),g||C(5,ve),((j=l.current)==null?void 0:j.value)!==void 0){let D=h??"";(R=(y=l.current).onValueChange)==null||R.call(y,D);return}}A.emit()}},emit:()=>{u.current.forEach(a=>a())}}),[]),U=n.useMemo(()=>({value:(a,h,g)=>{var c;h!==((c=d.current.get(a))==null?void 0:c.value)&&(d.current.set(a,{value:h,keywords:g}),t.current.filtered.items.set(a,W(h,g)),C(2,()=>{P(),A.emit()}))},item:(a,h)=>(p.current.add(a),h&&(o.current.has(h)?o.current.get(h).add(a):o.current.set(h,new Set([a]))),C(3,()=>{ie(),P(),t.current.value||le(),A.emit()}),()=>{d.current.delete(a),p.current.delete(a),t.current.filtered.items.delete(a);let g=H();C(4,()=>{ie(),(g==null?void 0:g.getAttribute("id"))===a&&le(),A.emit()})}),group:a=>(o.current.has(a)||o.current.set(a,new Set),()=>{d.current.delete(a),o.current.delete(a)}),filter:()=>l.current.shouldFilter,label:S||s["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:I,inputId:q,labelId:oe,listInnerRef:O}),[]);function W(a,h){var g,c;let j=(c=(g=l.current)==null?void 0:g.filter)!=null?c:_t;return a?j(a,t.current.search,h):0}function P(){if(!t.current.search||l.current.shouldFilter===!1)return;let a=t.current.filtered.items,h=[];t.current.filtered.groups.forEach(c=>{let j=o.current.get(c),y=0;j.forEach(R=>{let D=a.get(R);y=Math.max(D,y)}),h.push([c,y])});let g=O.current;Y().sort((c,j)=>{var y,R;let D=c.getAttribute("id"),Q=j.getAttribute("id");return((y=a.get(Q))!=null?y:0)-((R=a.get(D))!=null?R:0)}).forEach(c=>{let j=c.closest(Pe);j?j.appendChild(c.parentElement===j?c:c.closest(`${Pe} > *`)):g.appendChild(c.parentElement===g?c:c.closest(`${Pe} > *`))}),h.sort((c,j)=>j[1]-c[1]).forEach(c=>{var j;let y=(j=O.current)==null?void 0:j.querySelector(`${fe}[${se}="${encodeURIComponent(c[0])}"]`);y==null||y.parentElement.appendChild(y)})}function le(){let a=Y().find(g=>g.getAttribute("aria-disabled")!=="true"),h=a==null?void 0:a.getAttribute(se);A.setState("value",h||void 0)}function ie(){var a,h,g,c;if(!t.current.search||l.current.shouldFilter===!1){t.current.filtered.count=p.current.size;return}t.current.filtered.groups=new Set;let j=0;for(let y of p.current){let R=(h=(a=d.current.get(y))==null?void 0:a.value)!=null?h:"",D=(c=(g=d.current.get(y))==null?void 0:g.keywords)!=null?c:[],Q=W(R,D);t.current.filtered.items.set(y,Q),Q>0&&j++}for(let[y,R]of o.current)for(let D of R)if(t.current.filtered.items.get(D)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=j}function ve(){var a,h,g;let c=H();c&&(((a=c.parentElement)==null?void 0:a.firstChild)===c&&((g=(h=c.closest(fe))==null?void 0:h.querySelector(Jt))==null||g.scrollIntoView({block:"nearest"})),c.scrollIntoView({block:"nearest"}))}function H(){var a;return(a=O.current)==null?void 0:a.querySelector(`${Ge}[aria-selected="true"]`)}function Y(){var a;return Array.from(((a=O.current)==null?void 0:a.querySelectorAll(He))||[])}function ce(a){let h=Y()[a];h&&A.setState("value",h.getAttribute(se))}function de(a){var h;let g=H(),c=Y(),j=c.findIndex(R=>R===g),y=c[j+a];(h=l.current)!=null&&h.loop&&(y=j+a<0?c[c.length-1]:j+a===c.length?c[0]:c[j+a]),y&&A.setState("value",y.getAttribute(se))}function ue(a){let h=H(),g=h==null?void 0:h.closest(fe),c;for(;g&&!c;)g=a>0?os(g,fe):ls(g,fe),c=g==null?void 0:g.querySelector(He);c?A.setState("value",c.getAttribute(se)):de(a)}let me=()=>ce(Y().length-1),he=a=>{a.preventDefault(),a.metaKey?me():a.altKey?ue(1):de(1)},te=a=>{a.preventDefault(),a.metaKey?ce(0):a.altKey?ue(-1):de(-1)};return n.createElement(V.div,{ref:r,tabIndex:-1,...B,"cmdk-root":"",onKeyDown:a=>{var h;(h=B.onKeyDown)==null||h.call(B,a);let g=a.nativeEvent.isComposing||a.keyCode===229;if(!(a.defaultPrevented||g))switch(a.key){case"n":case"j":{z&&a.ctrlKey&&he(a);break}case"ArrowDown":{he(a);break}case"p":case"k":{z&&a.ctrlKey&&te(a);break}case"ArrowUp":{te(a);break}case"Home":{a.preventDefault(),ce(0);break}case"End":{a.preventDefault(),me();break}case"Enter":{a.preventDefault();let c=H();if(c){let j=new Event(Te);c.dispatchEvent(j)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:U.inputId,id:U.labelId,style:ds},S),Ce(s,a=>n.createElement(Qe.Provider,{value:A},n.createElement(Ye.Provider,{value:U},a))))}),Xt=n.forwardRef((s,r)=>{var t,p;let o=ae(),d=n.useRef(null),u=n.useContext(Je),l=be(),S=Xe(s),m=(p=(t=S.current)==null?void 0:t.forceMount)!=null?p:u==null?void 0:u.forceMount;ee(()=>{if(!m)return l.item(o,u==null?void 0:u.id)},[m]);let v=Ze(o,d,[s.value,s.children,d],s.keywords),x=ze(),N=K(C=>C.value&&C.value===v.current),L=K(C=>m||l.filter()===!1?!0:C.search?C.filtered.items.get(o)>0:!0);n.useEffect(()=>{let C=d.current;if(!(!C||s.disabled))return C.addEventListener(Te,$),()=>C.removeEventListener(Te,$)},[L,s.onSelect,s.disabled]);function $(){var C,A;G(),(A=(C=S.current).onSelect)==null||A.call(C,v.current)}function G(){x.setState("value",v.current,!0)}if(!L)return null;let{disabled:z,value:B,onSelect:I,forceMount:oe,keywords:q,...O}=s;return n.createElement(V.div,{ref:ge(d,r),...O,id:o,"cmdk-item":"",role:"option","aria-disabled":!!z,"aria-selected":!!N,"data-disabled":!!z,"data-selected":!!N,onPointerMove:z||l.getDisablePointerSelection()?void 0:G,onClick:z?void 0:$},s.children)}),Zt=n.forwardRef((s,r)=>{let{heading:t,children:p,forceMount:o,...d}=s,u=ae(),l=n.useRef(null),S=n.useRef(null),m=ae(),v=be(),x=K(L=>o||v.filter()===!1?!0:L.search?L.filtered.groups.has(u):!0);ee(()=>v.group(u),[]),Ze(u,l,[s.value,s.heading,S]);let N=n.useMemo(()=>({id:u,forceMount:o}),[o]);return n.createElement(V.div,{ref:ge(l,r),...d,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},t&&n.createElement("div",{ref:S,"cmdk-group-heading":"","aria-hidden":!0,id:m},t),Ce(s,L=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?m:void 0},n.createElement(Je.Provider,{value:N},L))))}),es=n.forwardRef((s,r)=>{let{alwaysRender:t,...p}=s,o=n.useRef(null),d=K(u=>!u.search);return!t&&!d?null:n.createElement(V.div,{ref:ge(o,r),...p,"cmdk-separator":"",role:"separator"})}),ts=n.forwardRef((s,r)=>{let{onValueChange:t,...p}=s,o=s.value!=null,d=ze(),u=K(m=>m.search),l=K(m=>m.selectedItemId),S=be();return n.useEffect(()=>{s.value!=null&&d.setState("search",s.value)},[s.value]),n.createElement(V.input,{ref:r,...p,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":S.listId,"aria-labelledby":S.labelId,"aria-activedescendant":l,id:S.inputId,type:"text",value:o?s.value:u,onChange:m=>{o||d.setState("search",m.target.value),t==null||t(m.target.value)}})}),ss=n.forwardRef((s,r)=>{let{children:t,label:p="Suggestions",...o}=s,d=n.useRef(null),u=n.useRef(null),l=K(m=>m.selectedItemId),S=be();return n.useEffect(()=>{if(u.current&&d.current){let m=u.current,v=d.current,x,N=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let L=m.offsetHeight;v.style.setProperty("--cmdk-list-height",L.toFixed(1)+"px")})});return N.observe(m),()=>{cancelAnimationFrame(x),N.unobserve(m)}}},[]),n.createElement(V.div,{ref:ge(d,r),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":p,id:S.listId},Ce(s,m=>n.createElement("div",{ref:ge(u,S.listInnerRef),"cmdk-list-sizer":""},m)))}),rs=n.forwardRef((s,r)=>{let{open:t,onOpenChange:p,overlayClassName:o,contentClassName:d,container:u,...l}=s;return n.createElement(xt,{open:t,onOpenChange:p},n.createElement(ft,{container:u},n.createElement(gt,{"cmdk-overlay":"",className:o}),n.createElement(bt,{"aria-label":s.label,"cmdk-dialog":"",className:d},n.createElement(_e,{ref:r,...l}))))}),as=n.forwardRef((s,r)=>K(t=>t.filtered.count===0)?n.createElement(V.div,{ref:r,...s,"cmdk-empty":"",role:"presentation"}):null),ns=n.forwardRef((s,r)=>{let{progress:t,children:p,label:o="Loading...",...d}=s;return n.createElement(V.div,{ref:r,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Ce(s,u=>n.createElement("div",{"aria-hidden":!0},u)))}),M=Object.assign(_e,{List:ss,Item:Xt,Input:ts,Group:Zt,Separator:es,Dialog:rs,Empty:as,Loading:ns});function os(s,r){let t=s.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function ls(s,r){let t=s.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function Xe(s){let r=n.useRef(s);return ee(()=>{r.current=s}),r}var ee=typeof window>"u"?n.useEffect:n.useLayoutEffect;function re(s){let r=n.useRef();return r.current===void 0&&(r.current=s()),r}function K(s){let r=ze(),t=()=>s(r.snapshot());return n.useSyncExternalStore(r.subscribe,t,t)}function Ze(s,r,t,p=[]){let o=n.useRef(),d=be();return ee(()=>{var u;let l=(()=>{var m;for(let v of t){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(m=v.current.textContent)==null?void 0:m.trim():o.current}})(),S=p.map(m=>m.trim());d.value(s,l,S),(u=r.current)==null||u.setAttribute(se,l),o.current=l}),o}var is=()=>{let[s,r]=n.useState(),t=re(()=>new Map);return ee(()=>{t.current.forEach(p=>p()),t.current=new Map},[s]),(p,o)=>{t.current.set(p,o),r({})}};function cs(s){let r=s.type;return typeof r=="function"?r(s.props):"render"in r?r.render(s.props):s}function Ce({asChild:s,children:r},t){return s&&n.isValidElement(r)?n.cloneElement(cs(r),{ref:r.ref},t(r.props.children)):t(r)}var ds={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const et=n.forwardRef(({className:s,...r},t)=>e.jsx(M,{ref:t,className:ne("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r}));et.displayName=M.displayName;const tt=n.forwardRef(({className:s,...r},t)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(zt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(M.Input,{ref:t,className:ne("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]}));tt.displayName=M.Input.displayName;const us=n.forwardRef(({className:s,...r},t)=>e.jsx(M.List,{ref:t,className:ne("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r}));us.displayName=M.List.displayName;const st=n.forwardRef((s,r)=>e.jsx(M.Empty,{ref:r,className:"py-6 text-center text-sm",...s}));st.displayName=M.Empty.displayName;const rt=n.forwardRef(({className:s,...r},t)=>e.jsx(M.Group,{ref:t,className:ne("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r}));rt.displayName=M.Group.displayName;const ms=n.forwardRef(({className:s,...r},t)=>e.jsx(M.Separator,{ref:t,className:ne("-mx-1 h-px bg-border",s),...r}));ms.displayName=M.Separator.displayName;const at=n.forwardRef(({className:s,...r},t)=>e.jsx(M.Item,{ref:t,className:ne("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...r}));at.displayName=M.Item.displayName;class hs extends vt.Component{constructor(t){super(t);ke(this,"handleRetry",()=>{window.location.reload()});ke(this,"handleClearData",()=>{try{localStorage.clear(),console.log("LocalStorage cleared successfully")}catch(t){console.error("Failed to clear localStorage:",t)}window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,p){console.error("LocalStorage Error Boundary caught an error:",t),console.error("Component Stack:",p.componentStack),this.setState({errorInfo:p})}render(){const{hasError:t,error:p,errorInfo:o}=this.state,{children:d,fallback:u}=this.props;return t?u||e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"rounded-full bg-red-100 p-3",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something Went Wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We encountered an issue saving your preferences. This might happen if your browser's storage is full or if you're using private browsing mode."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Retry"}),e.jsx("button",{onClick:this.handleClearData,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors",children:"Clear Saved Data & Retry"})]}),!1]})}):d}}const Ke={WARNING:80,CRITICAL:95};function ps(s={}){const{onWarning:r,checkInterval:t=3e4,checkOnMount:p=!0}=s,o=n.useRef(new Set),d=async()=>{try{const u=await T.getQuotaInfo();if(!u||u.percentage===0)return;const{percentage:l,usage:S,quota:m}=u,v=x=>{const N=x/1048576;return N<1?`${(x/1024).toFixed(1)} KB`:`${N.toFixed(1)} MB`};if(l>=Ke.CRITICAL){const x=`critical-${Math.floor(l)}`;o.current.has(x)||(console.warn(`[Storage Quota Monitor] CRITICAL: Storage at ${l.toFixed(1)}% capacity`),r==null||r(`Your browser storage is nearly full (${l.toFixed(1)}% used). Using ${v(S)} of ${v(m)} available. Please clear old data or browser cache to continue using this feature.`,l,"critical"),o.current.add(x))}else if(l>=Ke.WARNING){const x=`warning-${Math.floor(l/5)*5}`;o.current.has(x)||(console.warn(`[Storage Quota Monitor] WARNING: Storage at ${l.toFixed(1)}% capacity`),r==null||r(`Your browser storage is ${l.toFixed(1)}% full. Using ${v(S)} of ${v(m)} available. Consider clearing old data to ensure smooth operation.`,l,"warning"),o.current.add(x))}}catch(u){console.error("[Storage Quota Monitor] Failed to check quota:",u)}};return n.useEffect(()=>{p&&d();const u=setInterval(d,t);return()=>{clearInterval(u)}},[t,p,r]),{checkQuota:d}}const xs=["ASA","CBR","GWC","LCA","OA","WLC"],fs=`
  @keyframes progress {
    from {
      width: 0%;
    }
    to {
      width: 100%;
    }
  }
`;function Ls({onBack:s}){const{toast:r}=kt();ps({onWarning:(i,b,f)=>{r({variant:f==="critical"?"destructive":"default",title:f==="critical"?"‚ö†Ô∏è Storage Almost Full":"‚ö° Storage Warning",description:i,duration:7e3})},checkInterval:3e4,checkOnMount:!0});const{register:t,handleSubmit:p,formState:{errors:o,isSubmitting:d},reset:u,setValue:l,getValues:S,watch:m,clearErrors:v}=jt({resolver:wt(Ct),defaultValues:yt}),x=m(),[N,L]=n.useState([]),[$,G]=n.useState([]),[z,B]=n.useState(!1),[I,oe]=n.useState(null),[q,O]=n.useState(!1),[C,A]=n.useState(!1),[U,W]=n.useState(""),[P,le]=n.useState(null),[ie,ve]=n.useState(!0),[H,Y]=n.useState(!1),[ce,de]=n.useState(!0),[ue,me]=n.useState([]),[he,te]=n.useState(null),[a,h]=n.useState(!1),[g,c]=n.useState(!1),[j,y]=n.useState(!1),[R,D]=n.useState(null);n.useEffect(()=>{const i=()=>{const b=document.querySelectorAll(".form-section"),f=window.scrollY+window.innerHeight/2;b.forEach((w,k)=>{const J=w.getBoundingClientRect(),F=J.top+window.scrollY,pe=F+J.height;f>=F&&f<pe&&le(k+1)}),window.scrollY>100&&ve(!1)};return window.addEventListener("scroll",i),i(),()=>window.removeEventListener("scroll",i)},[]),n.useEffect(()=>{const i=()=>{const b=window.innerWidth<=768,f=window.innerHeight<500;Y(b&&f)};return i(),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),()=>{window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i)}},[]),n.useEffect(()=>{if(Object.values(x).some(b=>b&&b!=="")&&!q){const b=setTimeout(()=>{h(!0);const f={...x,selectedSchool:U,savedAt:new Date().toISOString()};T.setItem("custodialNotesDraft",JSON.stringify(f)),te(new Date),h(!1)},2e3);return()=>clearTimeout(b)}},[x,U,q]),n.useEffect(()=>{try{const i=T.getItem("custodialNotesDraft");let b=!1;if(i){const w=JSON.parse(i),k=new Date(w.savedAt);(Date.now()-k.getTime())/(1e3*60*60)<24?(b=!0,Object.keys(w).forEach(F=>{F!=="savedAt"&&F!=="selectedSchool"&&l(F,w[F])}),w.selectedSchool&&(W(w.selectedSchool),l("school",w.selectedSchool)),te(k),r({title:"Draft Restored",description:`Your work from ${k.toLocaleString()} was restored.`,duration:5e3})):T.removeItem("custodialNotesDraft")}if(!b){const w=T.getItem("custodialInspectorName");w&&l("inspectorName",w);const k=T.getItem("custodialLastSchool");k&&(W(k),l("school",k))}const f=T.getItem("custodialRecentLocations");if(f){const w=JSON.parse(f);me(Array.isArray(w)?w:[])}}catch(i){console.error("Error loading saved data:",i)}},[l,W,r]);const Q=async i=>{const b=i.target.files;if(b&&b.length>0){const f=Array.from(b),k=5-N.length,J=f.slice(0,k);J.length<f.length&&r({title:"Maximum Images Reached",description:`Only ${J.length} images were added. Maximum of 5 images allowed.`});const F=[];let pe=0,je=0;for(const E of J)if(pe+=E.size,Nt(E,500))try{const _=await St(E,{maxSizeKB:500});F.push(_.compressedFile),je+=_.compressedSize,console.log(`Compressed ${E.name}: ${Ie(E.size)} ‚Üí ${Ie(_.compressedSize)}`)}catch(_){console.error("Failed to compress image:",_),F.push(E),je+=E.size}else F.push(E),je+=E.size;L(E=>[...E,...F]);const mt=F.map(E=>URL.createObjectURL(E));if(G(E=>[...E,...mt]),F.length>0){const E=pe-je,_=E>0?(E/pe*100).toFixed(1):"0";r({title:"üì∏ Photos Uploaded Successfully!",description:`Successfully added ${F.length} photo${F.length>1?"s":""} to your custodial note documentation.${E>0?` Saved ${Ie(E)} (${_}% compression).`:""}`,duration:3e3})}}i.target.value=""},nt=()=>{if(N.length>=5){r({variant:"destructive",title:"Maximum Images Reached",description:"Maximum of 5 images allowed. Please remove some images first."});return}const i=document.createElement("input");i.type="file",i.accept="image/*",i.capture="environment",i.onchange=b=>{const f=b;f.target.files&&f.target.files.length>0&&r({title:"üì∑ Photo Captured Successfully!",description:"Camera photo is being processed and added to your documentation.",duration:2e3}),Q(f)},i.click()},ot=i=>{const b=N.filter((w,k)=>k!==i),f=$.filter((w,k)=>k!==i);URL.revokeObjectURL($[i]),L(b),G(f)},lt=i=>{i.trim()&&me(b=>{const f=b.filter(k=>k!==i),w=[i,...f].slice(0,5);try{T.setItem("custodialRecentLocations",JSON.stringify(w))}catch(k){console.error("Error saving recent locations:",k)}return w})},it=()=>{R&&(l("inspectorName",R.inspectorName),l("school",R.school),l("date",R.date),l("location",R.location),l("locationDescription",R.locationDescription||""),W(R.school),l("notes",""),l("images",[]),y(!1),D(null),window.scrollTo({top:0,behavior:"smooth"}),r({title:"Form Pre-filled",description:"Inspector, school, date, and location have been filled in. Just add new notes and photos!",duration:4e3}))},ct=()=>{y(!1),D(null),s&&s()},dt=async i=>{oe(i),B(!0)},ut=async()=>{if(I){O(!0),B(!1);try{const i=new FormData;Object.entries(I).forEach(([f,w])=>{f!=="images"&&i.append(f,(w==null?void 0:w.toString())||"")}),N.forEach(f=>{i.append("images",f)});const b=await fetch("/api/custodial-notes",{method:"POST",body:i});if(b.ok){c(!0),T.removeItem("custodialNotesDraft");try{T.setItem("custodialInspectorName",I.inspectorName),T.setItem("custodialLastSchool",U),lt(I.location)}catch(k){console.error("Error saving user preferences:",k)}D(I),r({title:"‚úÖ Custodial Note Submitted Successfully!",description:"Your custodial concern has been recorded and will be reviewed.",variant:"default",duration:5e3});const f=I.inspectorName,w=U;u(),l("inspectorName",f),l("school",w),W(w),L([]),$.forEach(k=>URL.revokeObjectURL(k)),G([]),oe(null),te(null),O(!1),setTimeout(()=>{c(!1),y(!0)},3e3)}else{const f=await b.json().catch(()=>({message:"Unknown error"}));r({variant:"destructive",title:"Submission Failed",description:`Error: ${f.message||"Unable to submit custodial note. Please try again."}`,duration:7e3}),O(!1)}}catch(i){console.error("Error submitting custodial note:",i),r({variant:"destructive",title:"Network Error",description:"Unable to connect to the server. Please check your connection and try again.",duration:7e3}),O(!1)}}};return e.jsxs(hs,{children:[e.jsx("style",{children:fs}),e.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8",children:[s&&e.jsx(X,{onClick:s,variant:"outline",className:"mb-4 back-button min-h-[48px] px-6",children:"‚Üê Back to Custodial"}),H&&ce&&e.jsx("div",{className:"bg-orange-50 border-2 border-orange-400 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"üì±"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-orange-900 text-lg mb-1",children:"Landscape Mode Detected"}),e.jsxs("p",{className:"text-orange-800 text-sm",children:["For the best experience filling out this form, please"," ",e.jsx("strong",{children:"rotate your device to portrait mode"})," ","(vertical orientation)."]})]})]}),e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>de(!1),className:"text-orange-900 hover:bg-orange-100 flex-shrink-0",children:"‚úï"})]})}),he&&e.jsx("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:a?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 animate-pulse"}),e.jsx("span",{children:"Saving draft..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:["Draft saved at ",he.toLocaleTimeString()]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-800 mb-2",children:"Submit Custodial Note"}),e.jsx("p",{className:"text-gray-600",children:"Report maintenance issues, concerns, or general observations"})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b-2 border-blue-200 py-3 -mx-6 px-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Form Progress:"}),P&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-blue-100 text-blue-800 border-2 border-blue-300",children:["Section ",P," of 3"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${P===1?"bg-blue-600":P&&P>1?"bg-blue-400":"bg-gray-200"}`}),e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${P===2?"bg-blue-600":P&&P>2?"bg-blue-400":"bg-gray-200"}`}),e.jsx("div",{className:`w-16 h-2 rounded-full transition-colors ${P===3?"bg-blue-600":"bg-gray-200"}`})]})]})}),ie&&e.jsxs("div",{className:"animate-bounce text-center text-gray-500 text-sm",children:[e.jsx(Ot,{className:"inline-block"}),e.jsx("p",{children:"Scroll down to continue"})]}),e.jsx("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"‚≠ê"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-900 text-lg mb-1",children:"New Requirement: Inspector Name"}),e.jsxs("p",{className:"text-amber-800 text-sm",children:["Please enter your name in the ",e.jsx("strong",{children:"Inspector Name"})," ","field. This is now required for all custodial notes to ensure proper accountability and follow-up."]})]})]})}),e.jsxs("form",{onSubmit:p(dt),className:"space-y-8",children:[e.jsxs(Re,{className:"form-section",children:[e.jsxs(Ee,{children:[e.jsx(De,{children:"Basic Information"}),e.jsx(Le,{children:"Enter the basic details for this custodial note"})]}),e.jsxs(Ae,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"inspectorName",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Inspector Name"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"}),e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsxs(Ne,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Why is this required?"}),e.jsx("p",{className:"text-gray-600",children:"Your name ensures accountability and allows for proper follow-up on reported issues. This helps maintain quality standards across all facilities."})]})]})]}),e.jsx(xe,{id:"inspectorName",...t("inspectorName"),placeholder:"Enter your name",className:"border-2 min-h-[48px]"}),o.inspectorName&&e.jsx("p",{className:"text-sm text-red-500",children:o.inspectorName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"school",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"School"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"})]}),e.jsxs(ye,{open:C,onOpenChange:A,children:[e.jsx(we,{asChild:!0,children:e.jsxs(X,{variant:"outline",role:"combobox","aria-expanded":C,className:"w-full justify-between border-2 min-h-[48px] text-left font-normal",children:[U||"Select school...",e.jsx(Ut,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ne,{className:"w-full p-0",align:"start",children:e.jsxs(et,{children:[e.jsx(tt,{placeholder:"Search schools..."}),e.jsx(st,{children:"No school found."}),e.jsx(rt,{children:xs.map(i=>e.jsxs(at,{value:i,onSelect:b=>{const f=b.toUpperCase();W(f),l("school",f),A(!1)},className:"min-h-[48px] cursor-pointer",children:[e.jsx(Tt,{className:`mr-2 h-4 w-4 ${U===i?"opacity-100":"opacity-0"}`}),i]},i))})]})})]}),o.school&&e.jsx("p",{className:"text-sm text-red-500",children:o.school.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"date",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Date"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"})]}),e.jsx(xe,{id:"date",type:"date",...t("date"),className:"border-2 min-h-[48px]"}),o.date&&e.jsx("p",{className:"text-sm text-red-500",children:o.date.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"location",className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:"Location"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-red-100 text-red-800 border border-red-300",children:"Required"}),e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsxs(Ne,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Location Examples"}),e.jsxs("ul",{className:"text-gray-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:'Room numbers: "Room 105", "Classroom 202"'}),e.jsx("li",{children:'Common areas: "Gymnasium", "Cafeteria", "Library"'}),e.jsx("li",{children:'Outdoor: "Playground", "Parking Lot", "Field"'}),e.jsx("li",{children:'Facilities: "Restroom 1st Floor", "Main Office"'})]})]})]})]}),ue.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"Recent locations:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map((i,b)=>e.jsx("button",{type:"button",onClick:()=>{l("location",i),o.location&&v("location")},className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 hover:border-blue-300 transition-colors",children:i},b))})]}),e.jsx(xe,{id:"location",...t("location"),placeholder:"e.g., Room 105, Gymnasium, Cafeteria",className:"border-2 min-h-[48px]"}),o.location&&e.jsx("p",{className:"text-sm text-red-500",children:o.location.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx(xe,{id:"locationDescription",...t("locationDescription"),placeholder:"e.g., Main Building, East Wing, 2nd Floor",className:"min-h-[48px]"}),o.locationDescription&&e.jsx("p",{className:"text-sm text-red-500",children:o.locationDescription.message})]})]})]}),e.jsxs(Re,{className:"form-section",children:[e.jsxs(Ee,{children:[e.jsxs(De,{className:"flex items-center gap-2",children:["Issue Description & Notes",e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsxs(Ne,{className:"w-80 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"What to Include"}),e.jsxs("ul",{className:"text-gray-600 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"What:"})," Describe the issue clearly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Where:"})," Specific location details"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"When:"})," When you noticed it"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Severity:"})," Is it urgent or can it wait?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Impact:"})," How does it affect operations?"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Action:"})," What needs to be done?"]})]})]})]})]}),e.jsx(Le,{children:"Provide detailed information about the custodial issue or observation"})]}),e.jsxs(Ae,{children:[e.jsx(It,{...t("notes"),placeholder:`Describe the issue, maintenance need, or observation...

Examples:
‚Ä¢ Broken equipment or fixtures
‚Ä¢ Cleaning supply needs
‚Ä¢ Safety concerns
‚Ä¢ Maintenance requests
‚Ä¢ General observations
‚Ä¢ Follow-up needed`,rows:10,className:"min-h-[250px]"}),o.notes&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:o.notes.message})]})]}),e.jsxs(Re,{className:"form-section",children:[e.jsxs(Ee,{children:[e.jsx(De,{children:"Photos & Documentation"}),e.jsx(Le,{children:"Upload images or capture photos to document the issue"})]}),e.jsxs(Ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{htmlFor:"imageUpload",className:"block mb-2",children:"Upload Images (Optional)"}),e.jsx(xe,{id:"imageUpload",type:"file",accept:"image/*",multiple:!0,onChange:Q,className:"hidden"}),e.jsx(X,{type:"button",onClick:()=>{var i;return(i=document.getElementById("imageUpload"))==null?void 0:i.click()},variant:"outline",className:"w-full h-12 border-2 border-dashed hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsxs("span",{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"text-2xl",children:"üìÅ"}),e.jsxs("span",{className:"font-medium",children:["Tap to Select Photos"," ",N.length>0&&`(${N.length} selected)`]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 5 images ‚Ä¢ Images auto-compressed"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(X,{type:"button",onClick:nt,variant:"outline",className:"w-full sm:w-auto h-12 border-2",children:e.jsxs("span",{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"text-xl",children:"üì∑"}),e.jsx("span",{children:"Capture Photo"})]})})})]}),$.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(Z,{className:"block mb-2",children:["Uploaded Images (",N.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:$.map((i,b)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:i,alt:`Upload ${b+1}`,className:"w-full h-24 object-cover rounded-lg border"}),e.jsx(X,{type:"button",onClick:()=>ot(b),variant:"destructive",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:"√ó"})]},b))})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(X,{type:"submit",size:"lg",disabled:d||q,className:"w-full md:w-auto disabled:bg-gray-400 disabled:cursor-not-allowed min-h-[56px] text-lg font-semibold transition-all duration-300 relative overflow-hidden",children:d||q?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-5 h-5 border-3 border-white/30 rounded-full"})]}),e.jsx("span",{className:"animate-pulse",children:"Submitting your report..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Custodial Note"})]})})})]}),e.jsx(Rt,{open:z,onOpenChange:B,children:e.jsxs(Et,{className:"max-w-lg",children:[e.jsxs(Dt,{children:[e.jsx(Lt,{className:"text-blue-800 text-xl",children:"‚úÖ Confirm Submission"}),e.jsx(At,{className:"text-left",children:"Please review your custodial note before submitting:"})]}),I&&e.jsx("div",{className:"space-y-3 py-4",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900",children:I.inspectorName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"School:"}),e.jsx("p",{className:"text-gray-900",children:I.school})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Date:"}),e.jsx("p",{className:"text-gray-900",children:I.date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Location:"}),e.jsx("p",{className:"text-gray-900",children:I.location})]})]}),I.locationDescription&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Location Details:"}),e.jsx("p",{className:"text-gray-900 text-sm",children:I.locationDescription})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Notes:"}),e.jsx("p",{className:"text-gray-900 text-sm max-h-24 overflow-y-auto",children:I.notes&&I.notes.length>200?`${I.notes.substring(0,200)}...`:I.notes||"No notes provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:"Photos:"}),e.jsxs("p",{className:"text-gray-900",children:[N.length," image",N.length!==1?"s":""," ","attached"]})]})]})}),e.jsxs(Ft,{children:[e.jsx($t,{children:"Review/Edit"}),e.jsx(Mt,{onClick:ut,className:"bg-blue-600 hover:bg-blue-700",children:"Confirm & Submit"})]})]})}),q&&e.jsx(Pt,{message:"Submitting report..."}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center animate-bounce",children:e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("svg",{className:"w-12 h-12 text-white animate-in zoom-in duration-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsx(Se,{className:"absolute -top-2 -right-2 h-8 w-8 text-yellow-400 animate-pulse"}),e.jsx(Se,{className:"absolute -bottom-2 -left-2 h-6 w-6 text-yellow-400 animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx(Se,{className:"absolute -top-2 -left-2 h-5 w-5 text-blue-400 animate-pulse",style:{animationDelay:"0.4s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-700",children:"üéâ Success!"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Your custodial note has been submitted successfully!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you back to the home page..."})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full animate-[progress_3s_ease-in-out]",style:{animation:"progress 3s ease-in-out forwards"}})})]})})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Report Another Issue?"}),e.jsx("p",{className:"text-gray-600",children:"Found another issue at the same location?"}),e.jsx("p",{className:"text-sm text-gray-500",children:"We can pre-fill your inspector name, school, date, and location to save you time!"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:it,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors shadow-md hover:shadow-lg min-h-[48px]",children:"üìù Report Another Issue Here"}),e.jsx("button",{onClick:ct,className:"w-full px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg transition-colors min-h-[48px]",children:"üè† Return to Home"})]})]})})})]})]})}export{Ls as default};
//# sourceMappingURL=custodial-notes-JS80bwIz-v6.js.map
