var Be=Object.defineProperty,Me=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var me=(a,o,i)=>o in a?Be(a,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[o]=i,f=(a,o)=>{for(var i in o||(o={}))de.call(o,i)&&me(a,i,o[i]);if(q)for(var i of q(o))ue.call(o,i)&&me(a,i,o[i]);return a},k=(a,o)=>Me(a,Ue(o));var T=(a,o)=>{var i={};for(var n in a)de.call(a,n)&&o.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&q)for(var n of q(a))o.indexOf(n)<0&&ue.call(a,n)&&(i[n]=a[n]);return i};var G=(a,o,i)=>new Promise((n,u)=>{var m=r=>{try{h(i.next(r))}catch(S){u(S)}},N=r=>{try{h(i.throw(r))}catch(S){u(S)}},h=r=>r.done?n(r.value):Promise.resolve(r.value).then(m,N);h((i=i.apply(a,o)).next())});import{r as x,j as e,Y as Oe}from"./ui-BqtzBtHj-v6.js";import{b as He,c as qe,s as A,n as j,l as V,u as Ge,C as xe}from"./forms-Ba_dyWLB-v6.js";import{T as Ve,n as We,c as Je,f as te,t as Ye}from"./textarea-goZqq0ZK-v6.js";import{m as Ke,g as Xe,l as Qe,e as ae,p as Ze,s as es,S as pe,a as ge,b as he,c as fe,d as be,C as je,f as ss}from"./collapsible-section-B7qixoUz-v6.js";import{c as z,u as ts,d as as,i as W,C as $,h as E,B as F,e as J,f as Y,g as K}from"./index-BaYUFHT0-v6.js";import{L as I,I as _,a as os}from"./LoadingOverlay-C66DN95D-v6.js";import{D as is,b as rs,c as ls,d as ns,e as cs}from"./dialog-DQHEhcSp-v6.js";import{c as ms,f as Ne,g as ds,a as us,h as oe,i as ye,H as xs,U as ps,j as gs,X as hs}from"./icons-CP4MPgx_-v6.js";import{r as X,i as ve}from"./rating-criteria-DCg5BUcG-v6.js";import"./vendor-oOSsakeb-v6.js";import"./charts-ChLs-CWD-v6.js";import"./utils-Cj9wHvoQ-v6.js";const Se=x.forwardRef((i,o)=>{var a=T(i,[]);return e.jsx("nav",f({ref:o,"aria-label":"breadcrumb"},a))});Se.displayName="Breadcrumb";const Ce=x.forwardRef((n,i)=>{var u=n,{className:a}=u,o=T(u,["className"]);return e.jsx("ol",f({ref:i,className:z("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",a)},o))});Ce.displayName="BreadcrumbList";const ie=x.forwardRef((n,i)=>{var u=n,{className:a}=u,o=T(u,["className"]);return e.jsx("li",f({ref:i,className:z("inline-flex items-center gap-1.5",a)},o))});ie.displayName="BreadcrumbItem";const we=x.forwardRef((u,n)=>{var m=u,{asChild:a,className:o}=m,i=T(m,["asChild","className"]);const N=a?Oe:"a";return e.jsx(N,f({ref:n,className:z("transition-colors hover:text-foreground",o)},i))});we.displayName="BreadcrumbLink";const De=x.forwardRef((n,i)=>{var u=n,{className:a}=u,o=T(u,["className"]);return e.jsx("span",f({ref:i,role:"link","aria-disabled":"true","aria-current":"page",className:z("font-normal text-foreground",a)},o))});De.displayName="BreadcrumbPage";const Ie=n=>{var u=n,{children:a,className:o}=u,i=T(u,["children","className"]);return e.jsx("li",k(f({role:"presentation","aria-hidden":"true",className:z("[&>svg]:w-3.5 [&>svg]:h-3.5",o)},i),{children:a!=null?a:e.jsx(ms,{})}))};Ie.displayName="BreadcrumbSeparator";const fs=He({school:A().min(1,"School is required").max(100,"School name too long"),date:A().min(1,"Date is required").refine(a=>!isNaN(Date.parse(a)),"Invalid date format"),inspectionType:V("single_room").default("single_room"),locationDescription:A().min(3,"Please describe the location (minimum 3 characters)").max(500,"Location description too long"),roomNumber:A().max(50,"Room number too long").optional().or(V("")),locationCategory:A().max(100,"Location category too long").optional().or(V("")),floors:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),verticalHorizontalSurfaces:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),ceiling:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),restrooms:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),customerSatisfaction:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),trash:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),projectCleaning:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),activitySupport:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),safetyCompliance:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),equipment:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),monitoring:j().min(0,"Rating must be 0-5").max(5,"Rating must be 0-5").default(0),notes:A().max(5e3,"Notes too long").optional().or(V("")),images:qe(A()).max(5,"Maximum 5 images allowed").default([])}),bs={school:"",date:"",inspectionType:"single_room",locationDescription:"",roomNumber:"",locationCategory:"",floors:0,verticalHorizontalSurfaces:0,ceiling:0,restrooms:0,customerSatisfaction:0,trash:0,projectCleaning:0,activitySupport:0,safetyCompliance:0,equipment:0,monitoring:0,notes:"",images:[]};function js({status:a,lastSaved:o,errorMessage:i,className:n=""}){const[u,m]=x.useState("");x.useEffect(()=>{if(!o){m("");return}const S=()=>{const Q=new Date().getTime()-o.getTime(),v=Math.floor(Q/1e3),B=Math.floor(v/60);v<10?m("just now"):v<60?m(`${v}s ago`):B<60?m(`${B}m ago`):m(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))};S();const P=setInterval(S,1e4);return()=>clearInterval(P)},[o]);const h=(()=>{switch(a){case"saving":return{icon:oe,text:"Saving...",bgColor:"bg-blue-100 border-blue-300",textColor:"text-blue-800",iconColor:"text-blue-600",animate:!0};case"saved":return{icon:us,text:u?`Saved ${u}`:"Saved",bgColor:"bg-green-100 border-green-300",textColor:"text-green-800",iconColor:"text-green-600",animate:!1};case"error":return{icon:ds,text:i||"Save failed",bgColor:"bg-red-100 border-red-300",textColor:"text-red-800",iconColor:"text-red-600",animate:!1};default:return{icon:Ne,text:"Not saved",bgColor:"bg-gray-100 border-gray-300",textColor:"text-gray-700",iconColor:"text-gray-500",animate:!1}}})(),r=h.icon;return e.jsxs("div",{className:`fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-lg border-2 shadow-lg transition-all duration-200 ${h.bgColor} ${n}`,role:"status","aria-live":"polite",children:[e.jsx(r,{className:`h-4 w-4 ${h.iconColor} ${h.animate?"animate-pulse":""}`}),e.jsx("span",{className:`text-sm font-medium ${h.textColor}`,children:h.text})]})}function Fs({onBack:a}){const{isMobile:o}=ts(),{toast:i}=as(),{register:n,handleSubmit:u,formState:{errors:m,isSubmitting:N},reset:h,setValue:r,watch:S,control:P}=Ge({resolver:Ye(fs),defaultValues:bs}),y=S(),[Q,v]=x.useState(!1),[B,Z]=x.useState([]),[C,L]=x.useState(null),[M,U]=x.useState(null),[ee,re]=x.useState(!1),[Re,se]=x.useState("idle"),ke=[{value:"ASA",label:"ASA"},{value:"LCA",label:"LCA"},{value:"GWC",label:"GWC"},{value:"OA",label:"OA"},{value:"CBR",label:"CBR"},{value:"WLC",label:"WLC"}],Te=[{value:"exterior",label:"Exterior"},{value:"gym_bleachers",label:"Gym and Bleachers"},{value:"classroom",label:"Classroom"},{value:"cafeteria",label:"Cafeteria"},{value:"utility_storage",label:"Utility Or Storage"},{value:"admin_office",label:"Admin or Office Area"},{value:"hallway",label:"Hallway"},{value:"stairwell",label:"Stairwell"},{value:"restroom",label:"Restroom"},{value:"staff_single_restroom",label:"Staff or Single Restroom"}],[b,O]=x.useState([]);x.useEffect(()=>{Ke(),Ae();const s=Xe();console.log("Storage stats:",s)},[]),x.useEffect(()=>{if(C){const s=setTimeout(()=>{le()},2e3);return()=>clearTimeout(s)}},[y,b,C]);const Ae=()=>{try{const s=Qe(ae.DRAFT_INSPECTION);s&&(Z([s]),v(!0));const t=localStorage.getItem("custodial_inspection_drafts");if(t&&!s){const l=JSON.parse(t).filter(d=>{const w=new Date(d.lastModified),g=new Date;return g.setDate(g.getDate()-7),w>g});l.length>0&&(Z(l),v(!0))}}catch(s){console.error("Error loading draft inspections:",s)}},$e=()=>`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,le=()=>G(null,null,function*(){if(!(!y.school||!y.date)){re(!0),se("saving");try{const s=C||$e();C||L(s);const t=[];for(const l of b)try{const d=yield Ze(l);t.push(d)}catch(d){console.error("Failed to process image:",d)}const c=k(f({id:s},y),{selectedImages:t,lastModified:new Date().toISOString(),title:`${y.school} - ${y.roomNumber||"Room"} - ${y.locationCategory||"Inspection"}`});es(ae.DRAFT_INSPECTION,c),U(new Date),se("saved")}catch(s){console.error("Error saving draft:",s),se("error")}finally{re(!1)}}}),Fe=s=>{if(r("school",s.school||""),r("date",s.date||""),r("inspectionType",s.inspectionType||"single_room"),r("locationDescription",s.locationDescription||""),r("roomNumber",s.roomNumber||""),r("locationCategory",s.locationCategory||""),r("floors",s.floors||0),r("verticalHorizontalSurfaces",s.verticalHorizontalSurfaces||0),r("ceiling",s.ceiling||0),r("restrooms",s.restrooms||0),r("customerSatisfaction",s.customerSatisfaction||0),r("trash",s.trash||0),r("projectCleaning",s.projectCleaning||0),r("activitySupport",s.activitySupport||0),r("safetyCompliance",s.safetyCompliance||0),r("equipment",s.equipment||0),r("monitoring",s.monitoring||0),r("notes",s.notes||""),s.selectedImages&&s.selectedImages.length>0){const t=s.selectedImages.map((c,l)=>{const d=atob(c.split(",")[1]),w=new Array(d.length);for(let D=0;D<d.length;D++)w[D]=d.charCodeAt(D);const g=new Uint8Array(w);return new File([g],`image_${l}.jpg`,{type:"image/jpeg"})});O(t)}L(s.id),v(!1)},ne=s=>{ss(ae.DRAFT_INSPECTION);const t=JSON.parse(localStorage.getItem("custodial_inspection_drafts")||"[]"),c=t.filter(l=>l.id!==s);c.length!==t.length&&localStorage.setItem("custodial_inspection_drafts",JSON.stringify(c)),Z([]),C===s&&(L(null),U(null))},Ee=()=>{v(!1),L(null),U(null)},ce=s=>G(null,null,function*(){const t=s.target.files;if(t&&t.length>0){const c=Array.from(t),d=5-b.length,w=c.slice(0,d),g=[];let D=0,H=0;for(const p of w)if(D+=p.size,We(p,500))try{const R=yield Je(p,{maxSizeKB:500});g.push(R.compressedFile),H+=R.compressedSize,console.log(`Compressed ${p.name}: ${te(p.size)} ‚Üí ${te(R.compressedSize)}`)}catch(R){console.error("Failed to compress image:",R),g.push(p),H+=p.size}else g.push(p),H+=p.size;if(O(p=>[...p,...g]),g.length>0){const p=D-H,R=(p/D*100).toFixed(1);i({title:"üì∏ Photos Uploaded Successfully!",description:`Added ${g.length} photo${g.length>1?"s":""} to inspection documentation.${p>0?` Saved ${te(p)} (${R}% compression).`:""}`,duration:3e3})}w.length<c.length&&i({variant:"destructive",title:"Upload Limit Reached",description:`Only ${w.length} photos were added. Maximum of 5 images allowed per inspection.`,duration:5e3}),console.log("Files selected:",g.length,"files")}}),Le=s=>{O(t=>t.filter((c,l)=>l!==s))},_e=s=>G(null,null,function*(){try{const t=new FormData;Object.entries(s).forEach(([l,d])=>{l!=="images"&&t.append(l,(d==null?void 0:d.toString())||"")}),b.forEach(l=>{t.append("images",l)});const c=yield fetch("/api/inspections",{method:"POST",body:t});if(c.ok)i({title:"‚úÖ Inspection Submitted Successfully!",description:`Single area inspection for ${s.school} has been submitted and saved.`,variant:"default",duration:5e3}),C&&ne(C),h(),O([]),L(null),U(null),setTimeout(()=>{a&&a()},6e3);else{const l=yield c.json().catch(()=>({message:"Unknown error"}));i({variant:"destructive",title:"Submission Failed",description:`Error: ${l.message||"Unable to submit inspection. Please try again."}`,duration:7e3})}}catch(t){console.error("Error submitting inspection:",t);let c="Submission Failed",l="Unable to submit inspection. Please try again.";t instanceof Error&&(t.message.includes("NetworkError")||t.message.includes("fetch")?(c="Network Error",l="Unable to connect to the server. Please check your connection and try again."):(t.message.includes("validation")||t.message.includes("Invalid"))&&(c="Invalid Data",l="Please check all required fields and try again.")),i({variant:"destructive",title:c,description:l,duration:7e3})}}),ze=x.useCallback((s,t)=>{var c,l;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"Rate this category:"}),e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(d=>e.jsx("button",{type:"button",className:"p-3 min-w-[48px] min-h-[48px] rounded-md hover:bg-yellow-50 transition-colors touch-manipulation flex items-center justify-center",onClick:()=>r(s.key,d),children:e.jsx(ye,{className:`w-7 h-7 ${d<=t&&t>0?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-300"}`})},d))}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`px-6 py-3 min-h-[48px] rounded-md border text-sm font-medium transition-colors touch-manipulation ${t===0?"bg-gray-100 border-gray-300 text-gray-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,onClick:()=>r(s.key,0),children:"Not Rated"})})]}),e.jsx("div",{className:"text-center",children:t>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{variant:"secondary",className:"text-sm px-3 py-1",children:(c=X[t-1])==null?void 0:c.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:(l=X[t-1])==null?void 0:l.description})]}):e.jsx(W,{variant:"outline",className:"text-sm px-3 py-1",children:"No rating selected"})}),t>0&&s.criteria&&s.criteria[t]&&e.jsx($,{className:"bg-blue-50 border-blue-200",children:e.jsx(E,{className:"p-3",children:e.jsxs("div",{className:"text-xs text-blue-800",children:[e.jsxs("strong",{className:"text-sm",children:["Rating ",t," Criteria:"]}),e.jsx("p",{className:"mt-1 leading-relaxed",children:s.criteria[t]})]})})})]})},[r]),Pe=x.useCallback((s,t)=>{var c,l;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(F,{type:"button",variant:t===0?"default":"outline",size:"sm",className:"px-4 py-3 text-xs min-h-[48px]",onClick:()=>r(s.key,0),children:"Not Rated"}),[1,2,3,4,5].map(d=>e.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"min-w-[48px] min-h-[48px]",onClick:()=>r(s.key,d),children:e.jsx(ye,{className:`w-7 h-7 ${d<=t&&t>0?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},d))]}),e.jsx("div",{className:"text-center px-3",children:t>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{variant:"secondary",className:"text-sm px-3 py-1",children:(c=X[t-1])==null?void 0:c.label}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:(l=X[t-1])==null?void 0:l.description})]}):e.jsx(W,{variant:"outline",className:"text-sm px-3 py-1",children:"No rating selected"})}),t>0&&s.criteria&&s.criteria[t]&&e.jsx($,{className:"bg-accent/10 border-accent/30",children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"text-xs text-accent-foreground",children:[e.jsxs("strong",{className:"text-sm",children:["Rating ",t," Criteria:"]}),e.jsx("p",{className:"mt-1 leading-relaxed",children:s.criteria[t]})]})})})]})},[r]);return e.jsxs(e.Fragment,{children:[e.jsx(is,{open:Q,onOpenChange:v,children:e.jsxs(rs,{className:"max-w-2xl",children:[e.jsxs(ls,{children:[e.jsx(ns,{children:"Resume Previous Inspection?"}),e.jsx(cs,{children:"You have unfinished inspection drafts. Would you like to continue one of them or start a new inspection?"})]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[B.map(s=>e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last modified: ",new Date(s.lastModified).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["School: ",s.school," ‚Ä¢ Date: ",s.date,s.roomNumber&&` ‚Ä¢ Room: ${s.roomNumber}`]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{size:"sm",onClick:()=>Fe(s),children:"Resume"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>ne(s.id),children:"Delete"})]})]})},s.id)),e.jsx("div",{className:"flex justify-center space-x-4 pt-4",children:e.jsx(F,{onClick:Ee,variant:"outline",children:"Start New Inspection"})})]})]})}),e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx(Se,{className:"mb-4",children:e.jsxs(Ce,{children:[e.jsx(ie,{children:e.jsxs(we,{onClick:a,className:"flex items-center gap-1 cursor-pointer",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only sm:not-sr-only",children:"Home"})]})}),e.jsx(Ie,{}),e.jsx(ie,{children:e.jsx(De,{children:"Single Area Inspection"})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Submit Inspection"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Use this form to inspect a single room or location. Example: Cafeteria. If performing a whole building inspection please select that from the previous screen."}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 leading-relaxed",children:[e.jsx("strong",{children:"üìã Important:"})," This form is for inspecting a single room or area using the same rating criteria as the Whole Building Inspection. However, single area inspections are recorded separately and do not automatically count toward a building-wide inspection or monthly metrics. If you're conducting these inspections as part of a comprehensive building review or to meet monthly inspection requirements, you'll need to manually track your progress across all required areas."]})}),(M||ee)&&e.jsx("div",{className:"mt-2 flex items-center space-x-2 text-sm text-muted-foreground",children:ee?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Saving..."})]}):M?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last saved: ",M.toLocaleTimeString()]})]}):null}),C&&e.jsxs(F,{type:"button",variant:"outline",onClick:le,disabled:ee,className:"mt-4",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Save Draft"]})]}),e.jsxs("form",{onSubmit:u(_e),className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(J,{children:[e.jsx(Y,{children:"Basic Information"}),e.jsx(K,{children:"Enter the basic details for this inspection"})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"school",children:"School *"}),e.jsx(xe,{name:"school",control:P,render:({field:s})=>e.jsxs(pe,{value:s.value,onValueChange:s.onChange,children:[e.jsx(ge,{children:e.jsx(he,{placeholder:"Select school"})}),e.jsx(fe,{children:ke.map(t=>e.jsx(be,{value:t.value,children:t.label},t.value))})]})}),m.school&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.school.message})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"date",children:"Inspection Date *"}),e.jsx(_,k(f({id:"date",type:"date"},n("date")),{"aria-describedby":"date-help"})),m.date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.date.message}),e.jsx("p",{id:"date-help",className:"text-sm text-muted-foreground mt-1",children:"Select the date when this inspection was conducted"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"locationCategory",children:"Location Category"}),e.jsx(xe,{name:"locationCategory",control:P,render:({field:s})=>e.jsxs(pe,{value:s.value,onValueChange:s.onChange,children:[e.jsx(ge,{children:e.jsx(he,{placeholder:"Select location category"})}),e.jsx(fe,{children:Te.map(t=>e.jsx(be,{value:t.value,children:t.label},t.value))})]})}),m.locationCategory&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.locationCategory.message})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"roomNumber",children:"Room Number"}),e.jsx(_,k(f({id:"roomNumber"},n("roomNumber")),{placeholder:"e.g., 101, Main Hall"})),m.roomNumber&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.roomNumber.message})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"locationDescription",children:"Location Description"}),e.jsx(_,k(f({id:"locationDescription"},n("locationDescription")),{placeholder:"e.g., Main Building, Second Floor, Near Library"})),m.locationDescription&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.locationDescription.message})]})]})]}),e.jsxs($,{children:[e.jsxs(J,{children:[e.jsx(Y,{children:"Inspection Categories"}),e.jsx(K,{children:o?"Expand each category to rate it. Detailed criteria will appear when you select a rating.":"Expand each category to rate it based on the criteria (1-5 stars). Detailed criteria will appear when you select a rating."})]}),e.jsx(E,{className:"space-y-4",children:o?ve.map(s=>e.jsx(je,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:ze(s,y[s.key])},s.key)):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ve.map(s=>e.jsx(je,{title:s.label,defaultCollapsed:!0,className:"border border-gray-200",titleClassName:"text-left font-medium",contentClassName:"space-y-3",children:Pe(s,y[s.key])},s.key))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(J,{children:[e.jsx(Y,{children:"Additional Notes & Observations"}),e.jsx(K,{children:"Detailed observations, specific issues, recommendations, or additional context"})]}),e.jsxs(E,{children:[e.jsx(Ve,k(f({},n("notes")),{placeholder:`Enter detailed notes about this inspection...

Examples:
‚Ä¢ Specific areas that need attention
‚Ä¢ Safety concerns observed
‚Ä¢ Maintenance recommendations
‚Ä¢ Follow-up actions required
‚Ä¢ Staff performance observations
‚Ä¢ Equipment issues noted`,rows:8,className:"min-h-[200px]","aria-describedby":"notes-help"})),m.notes&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:m.notes.message}),e.jsx("p",{id:"notes-help",className:"text-sm text-muted-foreground mt-2",children:"Provide detailed observations, specific issues, recommendations, or additional context for this inspection"})]})]}),e.jsxs($,{children:[e.jsxs(J,{children:[e.jsx(Y,{children:"Photo Documentation"}),e.jsx(K,{children:"Upload images or take photos to document inspection findings (up to 5 images)"})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(I,{htmlFor:"image-upload",className:"cursor-pointer flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors min-h-[48px]",children:[e.jsx(ps,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"font-medium",children:"Upload Images"})]}),e.jsx(_,{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"hidden",disabled:b.length>=5})]}),e.jsxs(I,{htmlFor:"camera-capture",className:"cursor-pointer flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors min-h-[48px]",children:[e.jsx(gs,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"font-medium",children:"Take Photo"})]}),e.jsx(_,{id:"camera-capture",type:"file",accept:"image/*",capture:"environment",onChange:ce,className:"hidden",disabled:b.length>=5})]})]}),b.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[b.length," of 5 images selected"]}),b.length>=5&&e.jsx("span",{className:"text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded",children:"Maximum reached"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"üì∏ Select multiple images or take photos ‚Ä¢ Up to 5 images ‚Ä¢ JPG, PNG, GIF supported"}),b.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-sm font-semibold",children:"Image Previews"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4",children:b.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Preview ${t+1}`,className:"w-full h-32 sm:h-24 object-cover rounded-lg border-2 border-gray-200",loading:"lazy"}),e.jsx("button",{type:"button",onClick:()=>Le(t),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 opacity-90 md:opacity-0 md:group-hover:opacity-100 transition-opacity shadow-lg","aria-label":`Remove image ${t+1}`,children:e.jsx(hs,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded",children:s.name.length>12?s.name.substring(0,12)+"...":s.name})]},t))})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(F,{type:"submit",size:"lg",disabled:N,className:`bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed ${o?"w-full h-14 text-lg":""}`,children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Submitting..."]}):"Submit Inspection"})})]})]}),N&&e.jsx(os,{message:"Submitting inspection..."}),e.jsx(js,{status:Re,lastSaved:M})]})}export{Fs as default};
