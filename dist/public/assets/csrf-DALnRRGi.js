let o=null,n=null;async function r(){try{const e=await fetch("/api/csrf-token",{method:"GET",credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch CSRF token: ${e.status}`);const t=await e.json();return o=t.csrfToken,n=Date.now()+t.expiresIn-6e4,console.log("[CSRF] Token fetched successfully"),o}catch(e){throw console.error("[CSRF] Failed to fetch token:",e),e}}async function c(){try{await r(),console.log("[CSRF] Initialized successfully")}catch(e){console.warn("[CSRF] Initialization failed (backend may not support CSRF yet):",e)}}export{r as fetchCsrfToken,c as initializeCsrf};
