[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm install --production=false"]

[phases.build]
# Build phase - compile TypeScript and bundle frontend
cmds = [
  "echo 'Starting build...'",
  "cat package.json | grep railway",
  "npm run build",
  "echo 'Build complete, checking dist/package.json...'",
  "cat dist/package.json | grep railway"
]

[start]
cmd = "npm run railway:start"
